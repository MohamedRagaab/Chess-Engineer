"use strict";(self.webpackChunkChess_Engineer=self.webpackChunkChess_Engineer||[]).push([[179],{2011:(ze,ve,M)=>{M.d(ve,{hO:()=>Le,xv:()=>ae,Dh:()=>ue,GT:()=>de,cc:()=>we,on:()=>j,pX:()=>J});var p=M(5e3),q=M(127),P=M(5813);ze=M.hmd(ze);const se=["ngOnDestroy"],J=(_e,$e,Ue,Ee={})=>new Proxy(_e,{get:(pe,me)=>Ue.runOutsideAngular(()=>{var Oe;if(_e[me])return(null===(Oe=null==Ee?void 0:Ee.spy)||void 0===Oe?void 0:Oe.get)&&Ee.spy.get(me,_e[me]),_e[me];if(se.indexOf(me)>-1)return()=>{};const Ne=$e.toPromise().then(ee=>{const G=ee&&ee[me];return"function"==typeof G?G.bind(ee):G&&G.then?G.then(te=>Ue.run(()=>te)):Ue.run(()=>G)});return new Proxy(()=>{},{get:(ee,G)=>Ne[G],apply:(ee,G,te)=>Ne.then(he=>{var ne;const Te=he&&he(...te);return(null===(ne=null==Ee?void 0:Ee.spy)||void 0===ne?void 0:ne.apply)&&Ee.spy.apply(me,te,Te),Te})})})}),de=(_e,$e)=>{$e.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Ee=>{Object.defineProperty(_e.prototype,Ee,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Ee))})})};class ie{constructor($e){return $e}}const ue=new p.OlP("angularfire2.app.options"),ae=new p.OlP("angularfire2.app.name");function j(_e,$e,Ue){const pe="object"==typeof Ue&&Ue||{};pe.name=pe.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Oe=q.Z.apps.filter(Ne=>Ne&&Ne.name===pe.name)[0]||$e.runOutsideAngular(()=>q.Z.initializeApp(_e,pe));try{JSON.stringify(_e)!==JSON.stringify(Oe.options)&&H("error",`${Oe.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return new ie(Oe)}const H=(_e,...$e)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[_e](...$e)},Y={provide:ie,useFactory:j,deps:[ue,p.R0b,[new p.FiY,ae]]};let Le=(()=>{class _e{constructor(Ue){q.Z.registerVersion("angularfire",P.q4.full,"core"),q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),q.Z.registerVersion("angular",p.q4F.full,Ue.toString())}static initializeApp(Ue,Ee){return{ngModule:_e,providers:[{provide:ue,useValue:Ue},{provide:ae,useValue:Ee}]}}}return _e.\u0275fac=function(Ue){return new(Ue||_e)(p.LFG(p.Lbi))},_e.\u0275mod=p.oAB({type:_e}),_e.\u0275inj=p.cJS({providers:[Y]}),_e})();function we(_e,$e,Ue,Ee,pe){const[,me,Oe]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===_e)||[];if(me)return function Se(_e,$e){try{return _e.toString()===$e.toString()}catch(Ue){return _e===$e}}(pe,Oe)||(ce("error",`${$e} was already initialized on the ${Ue} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),ce("warn",{is:pe,was:Oe})),me;{const Ne=Ee();return globalThis.\u0275AngularfireInstanceCache.push([_e,Ne,pe]),Ne}}const ke=!!ze.hot,ce=(_e,...$e)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[_e](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ze,ve,M)=>{M.d(ve,{q4:()=>Cl,iC:()=>Tl,HU:()=>Ia,vb:()=>Au,JM:()=>Xi});var p=M(5e3),q=M(5867),P=M(5861),se=M(9681),J=M(2090),de=M(4859),ie=M(1877);const ue="@firebase/installations",H="w:0.5.7",Y="FIS_v2",_e=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(I){return I instanceof J.ZR&&I.code.includes("request-failed")}function Ue({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ee(I){return{token:I.token,requestStatus:2,expiresIn:te(I.expiresIn),creationTime:Date.now()}}function pe(I,w){return me.apply(this,arguments)}function me(){return(me=(0,P.Z)(function*(I,w){const F=(yield w.json()).error;return _e.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Oe({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ne(I,{refreshToken:w}){const A=Oe(I);return A.append("Authorization",function he(I){return`${Y} ${I}`}(w)),A}function ee(I){return G.apply(this,arguments)}function G(){return(G=(0,P.Z)(function*(I){const w=yield I();return w.status>=500&&w.status<600?I():w})).apply(this,arguments)}function te(I){return Number(I.replace("s","000"))}function ne(I,w){return Te.apply(this,arguments)}function Te(){return(Te=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:w},{fid:A}){const F=Ue(I),z=Oe(I),X=w.getImmediate({optional:!0});if(X){const at=yield X.getHeartbeatsHeader();at&&z.append("x-firebase-client",at)}const De={method:"POST",headers:z,body:JSON.stringify({fid:A,authVersion:Y,appId:I.appId,sdkVersion:H})},Ve=yield ee(()=>fetch(F,De));if(Ve.ok){const at=yield Ve.json();return{fid:at.fid||A,registrationStatus:2,refreshToken:at.refreshToken,authToken:Ee(at.authToken)}}throw yield pe("Create Installation",Ve)})).apply(this,arguments)}function oe(I){return new Promise(w=>{setTimeout(w,I)})}const Pt=/^[cdef][\w-]{21}$/;function Ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const A=function et(I){return function lt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Pt.test(A)?A:""}catch(I){return""}}function Vt(I){return`${I.appName}!${I.appId}`}const jt=new Map;function Or(I,w){const A=Vt(I);xt(A,w),function wt(I,w){const A=function sr(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=I=>{xt(I.data.key,I.data.fid)}),Mn}();A&&A.postMessage({key:I,fid:w}),function ki(){0===jt.size&&Mn&&(Mn.close(),Mn=null)}()}(A,w)}function xt(I,w){const A=jt.get(I);if(A)for(const F of A)F(w)}let Mn=null;const er="firebase-installations-store";let ci=null;function Jr(){return ci||(ci=(0,J.X3)("firebase-installations-database",1,(I,w)=>{0===w&&I.createObjectStore(er)})),ci}function Ye(I,w){return or.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(I,w){const A=Vt(I),z=(yield Jr()).transaction(er,"readwrite"),X=z.objectStore(er),be=yield X.get(A);return yield X.put(w,A),yield z.complete,(!be||be.fid!==w.fid)&&Or(I,w.fid),w})).apply(this,arguments)}function Sn(I){return In.apply(this,arguments)}function In(){return(In=(0,P.Z)(function*(I){const w=Vt(I),F=(yield Jr()).transaction(er,"readwrite");yield F.objectStore(er).delete(w),yield F.complete})).apply(this,arguments)}function Cr(I,w){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,P.Z)(function*(I,w){const A=Vt(I),z=(yield Jr()).transaction(er,"readwrite"),X=z.objectStore(er),be=yield X.get(A),De=w(be);return void 0===De?yield X.delete(A):yield X.put(De,A),yield z.complete,De&&(!be||be.fid!==De.fid)&&Or(I,De.fid),De})).apply(this,arguments)}function zt(I){return An.apply(this,arguments)}function An(){return(An=(0,P.Z)(function*(I){let w;const A=yield Cr(I.appConfig,F=>{const z=di(F),X=Zs(I,z);return w=X.registrationPromise,X.installationEntry});return""===A.fid?{installationEntry:yield w}:{installationEntry:A,registrationPromise:w}})).apply(this,arguments)}function di(I){return Dt(I||{fid:Ze(),registrationStatus:0})}function Zs(I,w){if(0===w.registrationStatus){if(!navigator.onLine)return{installationEntry:w,registrationPromise:Promise.reject(_e.create("app-offline"))};const A={fid:w.fid,registrationStatus:1,registrationTime:Date.now()},F=function bt(I,w){return Ge.apply(this,arguments)}(I,A);return{installationEntry:A,registrationPromise:F}}return 1===w.registrationStatus?{installationEntry:w,registrationPromise:ot(I)}:{installationEntry:w}}function Ge(){return(Ge=(0,P.Z)(function*(I,w){try{const A=yield ne(I,w);return Ye(I.appConfig,A)}catch(A){throw $e(A)&&409===A.customData.serverCode?yield Sn(I.appConfig):yield Ye(I.appConfig,{fid:w.fid,registrationStatus:0}),A}})).apply(this,arguments)}function ot(I){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(I){let w=yield Xr(I.appConfig);for(;1===w.registrationStatus;)yield oe(100),w=yield Xr(I.appConfig);if(0===w.registrationStatus){const{installationEntry:A,registrationPromise:F}=yield zt(I);return F||A}return w})).apply(this,arguments)}function Xr(I){return Cr(I,w=>{if(!w)throw _e.create("installation-not-found");return Dt(w)})}function Dt(I){return function gs(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Un(I,w){return xn.apply(this,arguments)}function xn(){return(xn=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:w},A){const F=Qe(I,A),z=Ne(I,A),X=w.getImmediate({optional:!0});if(X){const at=yield X.getHeartbeatsHeader();at&&z.append("x-firebase-client",at)}const De={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:H,appId:I.appId}})},Ve=yield ee(()=>fetch(F,De));if(Ve.ok)return Ee(yield Ve.json());throw yield pe("Generate Auth Token",Ve)})).apply(this,arguments)}function Qe(I,{fid:w}){return`${Ue(I)}/${w}/authTokens:generate`}function Bn(I){return vt.apply(this,arguments)}function vt(){return(vt=(0,P.Z)(function*(I,w=!1){let A;const F=yield Cr(I.appConfig,X=>{if(!_t(X))throw _e.create("not-registered");const be=X.authToken;if(!w&&B(be))return X;if(1===be.requestStatus)return A=Be(I,w),X;{if(!navigator.onLine)throw _e.create("app-offline");const De=$(X);return A=Je(I,De),De}});return A?yield A:F.authToken})).apply(this,arguments)}function Be(I,w){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(I,w){let A=yield je(I.appConfig);for(;1===A.authToken.requestStatus;)yield oe(100),A=yield je(I.appConfig);const F=A.authToken;return 0===F.requestStatus?Bn(I,w):F})).apply(this,arguments)}function je(I){return Cr(I,w=>{if(!_t(w))throw _e.create("not-registered");return function le(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(w.authToken)?Object.assign(Object.assign({},w),{authToken:{requestStatus:0}}):w})}function Je(I,w){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(I,w){try{const A=yield Un(I,w),F=Object.assign(Object.assign({},w),{authToken:A});return yield Ye(I.appConfig,F),A}catch(A){if(!$e(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const F=Object.assign(Object.assign({},w),{authToken:{requestStatus:0}});yield Ye(I.appConfig,F)}else yield Sn(I.appConfig);throw A}})).apply(this,arguments)}function _t(I){return void 0!==I&&2===I.registrationStatus}function B(I){return 2===I.requestStatus&&!function L(I){const w=Date.now();return w<I.creationTime||I.creationTime+I.expiresIn<w+36e5}(I)}function $(I){const w={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:w})}function Pe(){return(Pe=(0,P.Z)(function*(I){const w=I,{installationEntry:A,registrationPromise:F}=yield zt(w);return F?F.catch(console.error):Bn(w).catch(console.error),A.fid})).apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(I,w=!1){const A=I;return yield Vn(A),(yield Bn(A,w)).token})).apply(this,arguments)}function Vn(I){return St.apply(this,arguments)}function St(){return(St=(0,P.Z)(function*(I){const{registrationPromise:w}=yield zt(I);w&&(yield w)})).apply(this,arguments)}function wn(I){return _e.create("missing-app-config-values",{valueName:I})}const To="installations",Ae=I=>{const w=I.getProvider("app").getImmediate(),A=function hi(I){if(!I||!I.options)throw wn("App Configuration");if(!I.name)throw wn("App Name");const w=["projectId","apiKey","appId"];for(const A of w)if(!I.options[A])throw wn(A);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(w);return{app:w,appConfig:A,heartbeatServiceProvider:(0,se._getProvider)(w,"heartbeat"),_delete:()=>Promise.resolve()}},pt=I=>{const w=I.getProvider("app").getImmediate(),A=(0,se._getProvider)(w,To).getImmediate();return{getId:()=>function K(I){return Pe.apply(this,arguments)}(A),getToken:z=>function tt(I){return At.apply(this,arguments)}(A,z)}};(function Wt(){(0,se._registerComponent)(new de.wA(To,Ae,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",pt,"PRIVATE"))})(),(0,se.registerVersion)(ue,"0.5.7"),(0,se.registerVersion)(ue,"0.5.7","esm2017");const Nn="@firebase/remote-config",cn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kc{constructor(w,A,F,z){this.client=w,this.storage=A,this.storageCache=F,this.logger=z}isCachedDataFresh(w,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-A,z=F<=w;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${w}. Is cache hit: ${z}.`),z}fetch(w){var A=this;return(0,P.Z)(function*(){const[F,z]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(z&&A.isCachedDataFresh(w.cacheMaxAgeMillis,F))return z;w.eTag=z&&z.eTag;const X=yield A.client.fetch(w),be=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&be.push(A.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(be),X})()}}function au(I=navigator){return I.languages&&I.languages[0]||I.language}class na{constructor(w,A,F,z,X,be){this.firebaseInstallations=w,this.sdkVersion=A,this.namespace=F,this.projectId=z,this.apiKey=X,this.appId=be}fetch(w){var A=this;return(0,P.Z)(function*(){const[F,z]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,De={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},Ve={sdk_version:A.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:A.appId,language_code:au()},at={method:"POST",headers:De,body:JSON.stringify(Ve)},ft=fetch(be,at),ut=new Promise((kr,$r)=>{w.signal.addEventListener(()=>{const ks=new Error("The operation was aborted.");ks.name="AbortError",$r(ks)})});let En;try{yield Promise.race([ft,ut]),En=yield ft}catch(kr){let $r="fetch-client-network";throw"AbortError"===kr.name&&($r="fetch-timeout"),cn.create($r,{originalErrorMessage:kr.message})}let an=En.status;const ho=En.headers.get("ETag")||void 0;let Rs,nr;if(200===En.status){let kr;try{kr=yield En.json()}catch($r){throw cn.create("fetch-client-parse",{originalErrorMessage:$r.message})}Rs=kr.entries,nr=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===nr?an=500:"NO_CHANGE"===nr?an=304:("NO_TEMPLATE"===nr||"EMPTY_CONFIG"===nr)&&(Rs={}),304!==an&&200!==an)throw cn.create("fetch-status",{httpStatus:an});return{status:an,eTag:ho,config:Rs}})()}}class nh{constructor(w,A){this.client=w,this.storage=A}fetch(w){var A=this;return(0,P.Z)(function*(){const F=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(w,F)})()}attemptFetch(w,{throttleEndTimeMillis:A,backoffCount:F}){var z=this;return(0,P.Z)(function*(){yield function yn(I,w){return new Promise((A,F)=>{const z=Math.max(w-Date.now(),0),X=setTimeout(A,z);I.addEventListener(()=>{clearTimeout(X),F(cn.create("fetch-throttle",{throttleEndTimeMillis:w}))})})}(w.signal,A);try{const X=yield z.client.fetch(w);return yield z.storage.deleteThrottleMetadata(),X}catch(X){if(!function lu(I){if(!(I instanceof J.ZR&&I.customData))return!1;const w=Number(I.customData.httpStatus);return 429===w||500===w||503===w||504===w}(X))throw X;const be={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(be),z.attemptFetch(w,be)}})()}}class uu{constructor(w,A,F,z,X){this.app=w,this._client=A,this._storageCache=F,this._storage=z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xa(I,w){const A=I.target.error||void 0;return cn.create(w,{originalErrorMessage:A&&A.message})}const Fi="app_namespace_store";class oh{constructor(w,A,F,z=function sh(){return new Promise((I,w)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=F=>{w(Xa(F,"storage-open"))},A.onsuccess=F=>{I(F.target.result)},A.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Fi,{keyPath:"compositeKey"})}}catch(A){w(cn.create("storage-open",{originalErrorMessage:A}))}})}()){this.appId=w,this.appName=A,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(w){return this.set("last_fetch_status",w)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(w){return this.set("last_successful_fetch_timestamp_millis",w)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(w){return this.set("last_successful_fetch_response",w)}getActiveConfig(){return this.get("active_config")}setActiveConfig(w){return this.set("active_config",w)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(w){return this.set("active_config_etag",w)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(w){return this.set("throttle_metadata",w)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(w){var A=this;return(0,P.Z)(function*(){const F=yield A.openDbPromise;return new Promise((z,X)=>{const De=F.transaction([Fi],"readonly").objectStore(Fi),Ve=A.createCompositeKey(w);try{const at=De.get(Ve);at.onerror=ft=>{X(Xa(ft,"storage-get"))},at.onsuccess=ft=>{const ut=ft.target.result;z(ut?ut.value:void 0)}}catch(at){X(cn.create("storage-get",{originalErrorMessage:at&&at.message}))}})})()}set(w,A){var F=this;return(0,P.Z)(function*(){const z=yield F.openDbPromise;return new Promise((X,be)=>{const Ve=z.transaction([Fi],"readwrite").objectStore(Fi),at=F.createCompositeKey(w);try{const ft=Ve.put({compositeKey:at,value:A});ft.onerror=ut=>{be(Xa(ut,"storage-set"))},ft.onsuccess=()=>{X()}}catch(ft){be(cn.create("storage-set",{originalErrorMessage:ft&&ft.message}))}})})()}delete(w){var A=this;return(0,P.Z)(function*(){const F=yield A.openDbPromise;return new Promise((z,X)=>{const De=F.transaction([Fi],"readwrite").objectStore(Fi),Ve=A.createCompositeKey(w);try{const at=De.delete(Ve);at.onerror=ft=>{X(Xa(ft,"storage-delete"))},at.onsuccess=()=>{z()}}catch(at){X(cn.create("storage-delete",{originalErrorMessage:at&&at.message}))}})})()}createCompositeKey(w){return[this.appId,this.appName,this.namespace,w].join()}}class du{constructor(w){this.storage=w}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var w=this;return(0,P.Z)(function*(){const A=w.storage.getLastFetchStatus(),F=w.storage.getLastSuccessfulFetchTimestampMillis(),z=w.storage.getActiveConfig(),X=yield A;X&&(w.lastFetchStatus=X);const be=yield F;be&&(w.lastSuccessfulFetchTimestampMillis=be);const De=yield z;De&&(w.activeConfig=De)})()}setLastFetchStatus(w){return this.lastFetchStatus=w,this.storage.setLastFetchStatus(w)}setLastSuccessfulFetchTimestampMillis(w){return this.lastSuccessfulFetchTimestampMillis=w,this.storage.setLastSuccessfulFetchTimestampMillis(w)}setActiveConfig(w){return this.activeConfig=w,this.storage.setActiveConfig(w)}}function ys(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,P.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Ks(){(0,se._registerComponent)(new de.wA("remote-config",function I(w,{instanceIdentifier:A}){const F=w.getProvider("app").getImmediate(),z=w.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw cn.create("registration-window");if(!(0,J.hl)())throw cn.create("indexed-db-unavailable");const{projectId:X,apiKey:be,appId:De}=F.options;if(!X)throw cn.create("registration-project-id");if(!be)throw cn.create("registration-api-key");if(!De)throw cn.create("registration-app-id");const Ve=new oh(De,F.name,A=A||"firebase"),at=new du(Ve),ft=new ie.Yd(Nn);ft.logLevel=ie.in.ERROR;const ut=new na(z,se.SDK_VERSION,A,X,be,De),En=new nh(ut,Ve),an=new kc(En,Ve,at,ft),ho=new uu(F,an,at,Ve,ft);return function Fr(I){const w=(0,J.m9)(I);w._initializePromise||(w._initializePromise=w._storageCache.loadFromStorage().then(()=>{w._isInitializationComplete=!0}))}(ho),ho},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Nn,"0.3.6"),(0,se.registerVersion)(Nn,"0.3.6","esm2017")}();const el="/firebase-messaging-sw.js",Li="/firebase-cloud-messaging-push-scope",lr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vs="google.c.a.c_id",Ao="google.c.a.c_l",hu="google.c.a.ts",ah="google.c.a.e";var Ui=(()=>{return(I=Ui||(Ui={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ui;var I})();function br(I){const w=new Uint8Array(I);return btoa(String.fromCharCode(...w)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ia(I){const A=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(A),z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)z[X]=F.charCodeAt(X);return z}const sa="fcm_token_details_db",Hn="fcm_token_object_Store";function Pc(I){return oa.apply(this,arguments)}function oa(){return oa=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(sa))return null;let w=null;return(yield(0,J.X3)(sa,5,function(){var F=(0,P.Z)(function*(z,X,be,De){var Ve;if(X<2||!z.objectStoreNames.contains(Hn))return;const at=De.objectStore(Hn),ft=yield at.index("fcmSenderId").get(I);if(yield at.clear(),ft)if(2===X){const ut=ft;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;w={token:ut.fcmToken,createTime:null!==(Ve=ut.createTime)&&void 0!==Ve?Ve:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:br(ut.vapidKey)}}}else if(3===X){const ut=ft;w={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:br(ut.auth),p256dh:br(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:br(ut.vapidKey)}}}else if(4===X){const ut=ft;w={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:br(ut.auth),p256dh:br(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:br(ut.vapidKey)}}}});return function(z,X,be,De){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(sa),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),fu(w)?w:null}),oa.apply(this,arguments)}function fu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:w}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof w.auth&&w.auth.length>0&&"string"==typeof w.p256dh&&w.p256dh.length>0&&"string"==typeof w.endpoint&&w.endpoint.length>0&&"string"==typeof w.swScope&&w.swScope.length>0&&"string"==typeof w.vapidKey&&w.vapidKey.length>0}const mi="firebase-messaging-store";let Ro=null;function tl(){return Ro||(Ro=(0,J.X3)("firebase-messaging-database",1,(I,w)=>{0===w&&I.createObjectStore(mi)})),Ro}function Zt(I){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(I){const w=Cs(I),F=yield(yield tl()).transaction(mi).objectStore(mi).get(w);if(F)return F;{const z=yield Pc(I.appConfig.senderId);if(z)return yield Bi(I,z),z}})).apply(this,arguments)}function Bi(I,w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,P.Z)(function*(I,w){const A=Cs(I),z=(yield tl()).transaction(mi,"readwrite");return yield z.objectStore(mi).put(w,A),yield z.complete,w})).apply(this,arguments)}function pu(I){return Es.apply(this,arguments)}function Es(){return(Es=(0,P.Z)(function*(I){const w=Cs(I),F=(yield tl()).transaction(mi,"readwrite");yield F.objectStore(mi).delete(w),yield F.complete})).apply(this,arguments)}function Cs({appConfig:I}){return I.appId}const dn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ko(I,w){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,P.Z)(function*(I,w){const A=yield ji(I),F=Xe(w),z={method:"POST",headers:A,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(cr(I.appConfig),z)).json()}catch(be){throw dn.create("token-subscribe-failed",{errorInfo:be})}if(X.error)throw dn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Wn(I,w){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,P.Z)(function*(I,w){const A=yield ji(I),F=Xe(w.subscriptionOptions),z={method:"PATCH",headers:A,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${cr(I.appConfig)}/${w.token}`,z)).json()}catch(be){throw dn.create("token-update-failed",{errorInfo:be})}if(X.error)throw dn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-update-no-token");return X.token})).apply(this,arguments)}function _i(I,w){return ua.apply(this,arguments)}function ua(){return(ua=(0,P.Z)(function*(I,w){const F={method:"DELETE",headers:yield ji(I)};try{const X=yield(yield fetch(`${cr(I.appConfig)}/${w}`,F)).json();if(X.error)throw dn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(z){throw dn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function cr({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ji(I){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,P.Z)(function*({appConfig:I,installations:w}){const A=yield w.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Xe({p256dh:I,auth:w,endpoint:A,vapidKey:F}){const z={web:{endpoint:A,auth:w,p256dh:I}};return F!==lr&&(z.web.applicationPubKey=F),z}const ca=6048e5;function Mo(I){return da.apply(this,arguments)}function da(){return(da=(0,P.Z)(function*(I){const w=yield gu(I.swRegistration,I.vapidKey),A={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:w.endpoint,auth:br(w.getKey("auth")),p256dh:br(w.getKey("p256dh"))},F=yield Zt(I.firebaseDependencies);if(F){if(Xs(F.subscriptionOptions,A))return Date.now()>=F.createTime+ca?nl(I,{token:F.token,createTime:Date.now(),subscriptionOptions:A}):F.token;try{yield _i(I.firebaseDependencies,F.token)}catch(z){console.warn(z)}return ye(I.firebaseDependencies,A)}return ye(I.firebaseDependencies,A)})).apply(this,arguments)}function ha(I){return fa.apply(this,arguments)}function fa(){return(fa=(0,P.Z)(function*(I){const w=yield Zt(I.firebaseDependencies);w&&(yield _i(I.firebaseDependencies,w.token),yield pu(I.firebaseDependencies));const A=yield I.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function nl(I,w){return rl.apply(this,arguments)}function rl(){return(rl=(0,P.Z)(function*(I,w){try{const A=yield Wn(I.firebaseDependencies,w),F=Object.assign(Object.assign({},w),{token:A,createTime:Date.now()});return yield Bi(I.firebaseDependencies,F),A}catch(A){throw yield ha(I),A}})).apply(this,arguments)}function ye(I,w){return yt.apply(this,arguments)}function yt(){return(yt=(0,P.Z)(function*(I,w){const F={token:yield ko(I,w),createTime:Date.now(),subscriptionOptions:w};return yield Bi(I,F),F.token})).apply(this,arguments)}function gu(I,w){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(I,w){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ia(w)})})).apply(this,arguments)}function Xs(I,w){return w.vapidKey===I.vapidKey&&w.endpoint===I.endpoint&&w.auth===I.auth&&w.p256dh===I.p256dh}function eo(I){const w={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function dr(I,w){if(!w.notification)return;I.notification={};const A=w.notification.title;A&&(I.notification.title=A);const F=w.notification.body;F&&(I.notification.body=F);const z=w.notification.image;z&&(I.notification.image=z)}(w,I),function il(I,w){!w.data||(I.data=w.data)}(w,I),function sl(I,w){if(!w.fcmOptions)return;I.fcmOptions={};const A=w.fcmOptions.link;A&&(I.fcmOptions.link=A);const F=w.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(w,I),w}function mu(I){return"object"==typeof I&&!!I&&vs in I}function ol(I,w){const A=[];for(let F=0;F<I.length;F++)A.push(I.charAt(F)),F<w.length&&A.push(w.charAt(F));return A.join("")}function $i(I){return dn.create("missing-app-config-values",{valueName:I})}ol("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ol("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class On{constructor(w,A,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function pa(I){if(!I||!I.options)throw $i("App Configuration Object");if(!I.name)throw $i("App Name");const w=["projectId","apiKey","appId","messagingSenderId"],{options:A}=I;for(const F of w)if(!A[F])throw $i(F);return{appName:I.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(w);this.firebaseDependencies={app:w,appConfig:z,installations:A,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Dr(I){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(el,{scope:Li}),I.swRegistration.update().catch(()=>{})}catch(w){throw dn.create("failed-service-worker-registration",{browserErrorMessage:w.message})}})).apply(this,arguments)}function Wi(I,w){return Br.apply(this,arguments)}function Br(){return(Br=(0,P.Z)(function*(I,w){if(!w&&!I.swRegistration&&(yield Dr(I)),w||!I.swRegistration){if(!(w instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");I.swRegistration=w}})).apply(this,arguments)}function al(I,w){return ma.apply(this,arguments)}function ma(){return(ma=(0,P.Z)(function*(I,w){w?I.vapidKey=w:I.vapidKey||(I.vapidKey=lr)})).apply(this,arguments)}function ll(){return(ll=(0,P.Z)(function*(I,w){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield al(I,null==w?void 0:w.vapidKey),yield Wi(I,null==w?void 0:w.serviceWorkerRegistration),Mo(I)})).apply(this,arguments)}function Po(I,w,A){return xo.apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(I,w,A){const F=ul(w);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:A[vs],message_name:A[Ao],message_time:A[hu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ul(I){switch(I){case Ui.NOTIFICATION_CLICKED:return"notification_open";case Ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _u(){return(_u=(0,P.Z)(function*(I,w){const A=w.data;if(!A.isFirebaseMessaging)return;I.onMessageHandler&&A.messageType===Ui.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(eo(A)):I.onMessageHandler.next(eo(A)));const F=A.data;mu(F)&&"1"===F[ah]&&(yield Po(I,A.messageType,F))})).apply(this,arguments)}const dl="@firebase/messaging",yu=I=>{const w=new On(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function cl(I,w){return _u.apply(this,arguments)}(w,A)),w},ws=I=>{const w=I.getProvider("messaging").getImmediate();return{getToken:F=>function _a(I,w){return ll.apply(this,arguments)}(w,F)}};function Eu(){return bs.apply(this,arguments)}function bs(){return(bs=(0,P.Z)(function*(){try{yield(0,J.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vu(){(0,se._registerComponent)(new de.wA("messaging",yu,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",ws,"PRIVATE")),(0,se.registerVersion)(dl,"0.9.11"),(0,se.registerVersion)(dl,"0.9.11","esm2017")}();const fl="analytics",qf="firebase_id",No="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ya="https://www.googletagmanager.com/gtag/js",vn=new ie.Yd("@firebase/analytics");function Cu(I){return Promise.all(I.map(w=>w.catch(A=>A)))}function lh(I,w){const A=document.createElement("script");A.src=`${ya}?l=${I}&id=${w}`,A.async=!0,document.head.appendChild(A)}function to(I,w,A,F,z,X){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(I,w,A,F,z,X){const be=F[z];try{if(be)yield w[be];else{const Ve=(yield Cu(A)).find(at=>at.measurementId===z);Ve&&(yield w[Ve.appId])}}catch(De){vn.error(De)}I("config",z,X)})).apply(this,arguments)}function gl(I,w,A,F,z){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,P.Z)(function*(I,w,A,F,z){try{let X=[];if(z&&z.send_to){let be=z.send_to;Array.isArray(be)||(be=[be]);const De=yield Cu(A);for(const Ve of be){const at=De.find(ut=>ut.measurementId===Ve),ft=at&&w[at.appId];if(!ft){X=[];break}X.push(ft)}}0===X.length&&(X=Object.values(w)),yield Promise.all(X),I("event",F,z||{})}catch(X){vn.error(X)}})).apply(this,arguments)}function uh(){const I=window.document.getElementsByTagName("script");for(const w of Object.values(I))if(w.src&&w.src.includes(ya))return w;return null}const hn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Tr=new class hr{constructor(w={},A=1e3){this.throttleMetadata=w,this.intervalMillis=A}getThrottleMetadata(w){return this.throttleMetadata[w]}setThrottleMetadata(w,A){this.throttleMetadata[w]=A}deleteThrottleMetadata(w){delete this.throttleMetadata[w]}};function no(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function bu(I){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,P.Z)(function*(I){var w;const{appId:A,apiKey:F}=I,z={method:"GET",headers:no(F)},X=No.replace("{app-id}",A),be=yield fetch(X,z);if(200!==be.status&&304!==be.status){let De="";try{const Ve=yield be.json();(null===(w=Ve.error)||void 0===w?void 0:w.message)&&(De=Ve.error.message)}catch(Ve){}throw hn.create("config-fetch-failed",{httpStatus:be.status,responseMessage:De})}return be.json()})).apply(this,arguments)}function Oc(I){return ti.apply(this,arguments)}function ti(){return(ti=(0,P.Z)(function*(I,w=Tr,A){const{appId:F,apiKey:z,measurementId:X}=I.options;if(!F)throw hn.create("no-app-id");if(!z){if(X)return{measurementId:X,appId:F};throw hn.create("no-api-key")}const be=w.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},De=new ml;return setTimeout((0,P.Z)(function*(){De.abort()}),void 0!==A?A:6e4),va({appId:F,apiKey:z,measurementId:X},be,De,w)})).apply(this,arguments)}function va(I,w,A){return fr.apply(this,arguments)}function fr(){return(fr=(0,P.Z)(function*(I,{throttleEndTimeMillis:w,backoffCount:A},F,z=Tr){const{appId:X,measurementId:be}=I;try{yield Rt(F,w)}catch(De){if(be)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${De.message}]`),{appId:X,measurementId:be};throw De}try{const De=yield bu(I);return z.deleteThrottleMetadata(X),De}catch(De){if(!Du(De)){if(z.deleteThrottleMetadata(X),be)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${be} provided in the "measurementId" field in the local Firebase config. [${De.message}]`),{appId:X,measurementId:be};throw De}const Ve=503===Number(De.customData.httpStatus)?(0,J.$s)(A,z.intervalMillis,30):(0,J.$s)(A,z.intervalMillis),at={throttleEndTimeMillis:Date.now()+Ve,backoffCount:A+1};return z.setThrottleMetadata(X,at),vn.debug(`Calling attemptFetch again in ${Ve} millis`),va(I,at,F,z)}})).apply(this,arguments)}function Rt(I,w){return new Promise((A,F)=>{const z=Math.max(w-Date.now(),0),X=setTimeout(A,z);I.addEventListener(()=>{clearTimeout(X),F(hn.create("fetch-throttle",{throttleEndTimeMillis:w}))})})}function Du(I){if(!(I instanceof J.ZR&&I.customData))return!1;const w=Number(I.customData.httpStatus);return 429===w||500===w||503===w||504===w}class ml{constructor(){this.listeners=[]}addEventListener(w){this.listeners.push(w)}abort(){this.listeners.forEach(w=>w())}}function Fc(){return ro.apply(this,arguments)}function ro(){return(ro=(0,P.Z)(function*(){if(!(0,J.hl)())return vn.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(I){return vn.warn(hn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Ei(){return(Ei=(0,P.Z)(function*(I,w,A,F,z,X,be){var De;const Ve=Oc(I);Ve.then(an=>{A[an.measurementId]=an.appId,I.options.measurementId&&an.measurementId!==I.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${an.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(an=>vn.error(an)),w.push(Ve);const at=Fc().then(an=>{if(an)return F.getId()}),[ft,ut]=yield Promise.all([Ve,at]);uh()||lh(X,ft.measurementId),z("js",new Date);const En=null!==(De=null==be?void 0:be.config)&&void 0!==De?De:{};return En.origin="firebase",En.update=!0,null!=ut&&(En[qf]=ut),z("config",ft.measurementId,En),ft.measurementId})).apply(this,arguments)}class io{constructor(w){this.app=w}_delete(){return delete Sr[this.app.options.appId],Promise.resolve()}}let Sr={},Zi=[];const Oo={};let qi,ri,ni="dataLayer",yl=!1;function Vr(I,w,A){!function so(){const I=[];if((0,J.ru)()&&I.push("This is a browser extension environment."),(0,J.zI)()||I.push("Cookies are not available."),I.length>0){const w=I.map((F,z)=>`(${z+1}) ${F}`).join(" "),A=hn.create("invalid-analytics-context",{errorInfo:w});vn.warn(A.message)}}();const F=I.options.appId;if(!F)throw hn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw hn.create("no-api-key");vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sr[F])throw hn.create("already-exists",{id:F});if(!yl){!function vi(I){let w=[];Array.isArray(window[I])?w=window[I]:window[I]=w}(ni);const{wrappedGtag:X,gtagCore:be}=function Nc(I,w,A,F,z){let X=function(...be){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(X=window[z]),window[z]=function wu(I,w,A,F){function X(){return(X=(0,P.Z)(function*(be,De,Ve){try{"event"===be?yield gl(I,w,A,De,Ve):"config"===be?yield to(I,w,A,F,De,Ve):I("set",De)}catch(at){vn.error(at)}})).apply(this,arguments)}return function z(be,De,Ve){return X.apply(this,arguments)}}(X,I,w,A),{gtagCore:X,wrappedGtag:window[z]}}(Sr,Zi,Oo,ni,"gtag");ri=X,qi=be,yl=!0}return Sr[F]=function fn(I,w,A,F,z,X,be){return Ei.apply(this,arguments)}(I,Zi,Oo,w,qi,ni,A),new io(I)}function Fo(){return(Fo=(0,P.Z)(function*(I,w,A,F,z){if(z&&z.global)I("event",A,F);else{const X=yield w;I("event",A,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function sn(){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}const Qi="@firebase/analytics";!function fh(){(0,se._registerComponent)(new de.wA(fl,(w,{options:A})=>Vr(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function I(w){try{const A=w.getProvider(fl).getImmediate();return{logEvent:(F,z,X)=>function hh(I,w,A,F){I=(0,J.m9)(I),function oo(I,w,A,F,z){return Fo.apply(this,arguments)}(ri,Sr[I.app.options.appId],w,A,F).catch(z=>vn.error(z))}(A,F,z,X)}}catch(A){throw hn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,se.registerVersion)(Qi,"0.7.7"),(0,se.registerVersion)(Qi,"0.7.7","esm2017")}();var Ji=M(4408),Ea=M(7565);const vl=new class Xt extends Ea.v{}(class Ci extends Ji.o{constructor(w,A){super(w,A),this.scheduler=w,this.work=A}schedule(w,A=0){return A>0?super.schedule(w,A):(this.delay=A,this.state=w,this.scheduler.flush(this),this)}execute(w,A){return A>0||this.closed?super.execute(w,A):this._execute(w,A)}requestAsyncId(w,A,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(w,A,F):w.flush(this)}});var ph=M(4986),El=M(8505),qn=M(9468),Ar=M(5363);const Cl=new p.GfV("7.3.0"),Ii="__angularfire_symbol__analyticsIsSupportedValue",Hr="__angularfire_symbol__analyticsIsSupported",si="__angularfire_symbol__remoteConfigIsSupportedValue",Lo="__angularfire_symbol__remoteConfigIsSupported",Il="__angularfire_symbol__messagingIsSupportedValue",wl="__angularfire_symbol__messagingIsSupported";function Xi(I,w,A){if(w){if(1===w.length)return w[0];const X=w.filter(be=>be.app===A);if(1===X.length)return X[0]}return A.container.getProvider(I).getImmediate({optional:!0})}globalThis[Hr]||(globalThis[Hr]=sn().then(I=>globalThis[Ii]=I).catch(()=>globalThis[Ii]=!1)),globalThis[wl]||(globalThis[wl]=Eu().then(I=>globalThis[Il]=I).catch(()=>globalThis[Il]=!1)),globalThis[Lo]||(globalThis[Lo]=ys().then(I=>globalThis[si]=I).catch(()=>globalThis[si]=!1));const Au=(I,w)=>{const A=w?[w]:(0,q.C6)(),F=[];return A.forEach(z=>{z.container.getProvider(I).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function Ss(){}class Ca{constructor(w,A=vl){this.zone=w,this.delegate=A}now(){return this.delegate.now()}schedule(w,A,F){const z=this.zone;return this.delegate.schedule(function(be){z.runGuarded(()=>{w.apply(this,[be])})},A,F)}}class oi{constructor(w){this.zone=w,this.task=null}call(w,A){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss)),A.pipe((0,El.b)({next:F,complete:F,error:F})).subscribe(w).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ia=(()=>{class I{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Ca(Zone.current)),this.insideAngular=A.run(()=>new Ca(Zone.current,ph.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(A){return new(A||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ai(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Tl(I){return ai(),function As(I){return function(A){return(A=A.lift(new oi(I.ngZone))).pipe((0,qn.R)(I.outsideAngular),(0,Ar.Q)(I.insideAngular))}}(ai())(I)}},2090:(ze,ve,M)=>{M.d(ve,{BH:()=>we,LL:()=>lt,ZR:()=>oe,gQ:()=>Jr,zI:()=>he,hu:()=>P,g5:()=>se,US:()=>ie,tV:()=>j,h$:()=>ue,L:()=>ae,$s:()=>gs,r3:()=>xt,Sg:()=>Se,ne:()=>Ye,p$:()=>H,vZ:()=>ki,ZB:()=>Y,Lj:()=>Ct,gK:()=>zt,pd:()=>ci,m9:()=>Qe,z$:()=>ke,GJ:()=>Yr,jU:()=>$e,ru:()=>Ue,xb:()=>Mn,w1:()=>me,hl:()=>G,uI:()=>ce,UG:()=>_e,Yr:()=>Ne,b$:()=>Ee,w9:()=>Nt,cI:()=>Ze,UI:()=>sr,X3:()=>Je,xO:()=>Qr,zd:()=>er,DV:()=>wt,ug:()=>Ge,dS:()=>bt,Pz:()=>et,Dv:()=>Mi,Wj:()=>di,lb:()=>Zs,eu:()=>te});var p=M(5861);const P=function(B,L){if(!B)throw se(L)},se=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},J=function(B){const L=[];let $=0;for(let le=0;le<B.length;le++){let K=B.charCodeAt(le);K<128?L[$++]=K:K<2048?(L[$++]=K>>6|192,L[$++]=63&K|128):55296==(64512&K)&&le+1<B.length&&56320==(64512&B.charCodeAt(le+1))?(K=65536+((1023&K)<<10)+(1023&B.charCodeAt(++le)),L[$++]=K>>18|240,L[$++]=K>>12&63|128,L[$++]=K>>6&63|128,L[$++]=63&K|128):(L[$++]=K>>12|224,L[$++]=K>>6&63|128,L[$++]=63&K|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let K=0;K<B.length;K+=3){const Pe=B[K],tt=K+1<B.length,At=tt?B[K+1]:0,Vn=K+2<B.length,St=Vn?B[K+2]:0;let $t=(15&At)<<2|St>>6,Rn=63&St;Vn||(Rn=64,tt||($t=64)),le.push($[Pe>>2],$[(3&Pe)<<4|At>>4],$[$t],$[Rn])}return le.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(J(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let $=0,le=0;for(;$<B.length;){const K=B[$++];if(K<128)L[le++]=String.fromCharCode(K);else if(K>191&&K<224){const Pe=B[$++];L[le++]=String.fromCharCode((31&K)<<6|63&Pe)}else if(K>239&&K<365){const Vn=((7&K)<<18|(63&B[$++])<<12|(63&B[$++])<<6|63&B[$++])-65536;L[le++]=String.fromCharCode(55296+(Vn>>10)),L[le++]=String.fromCharCode(56320+(1023&Vn))}else{const Pe=B[$++],tt=B[$++];L[le++]=String.fromCharCode((15&K)<<12|(63&Pe)<<6|63&tt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let K=0;K<B.length;){const Pe=$[B.charAt(K++)],At=K<B.length?$[B.charAt(K)]:0;++K;const St=K<B.length?$[B.charAt(K)]:64;++K;const ht=K<B.length?$[B.charAt(K)]:64;if(++K,null==Pe||null==At||null==St||null==ht)throw Error();le.push(Pe<<2|At>>4),64!==St&&(le.push(At<<4&240|St>>2),64!==ht&&le.push(St<<6&192|ht))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ue=function(B){const L=J(B);return ie.encodeByteArray(L,!0)},ae=function(B){return ue(B).replace(/\./g,"")},j=function(B){try{return ie.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function H(B){return Y(void 0,B)}function Y(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Le($)||(B[$]=Y(B[$],L[$]));return B}function Le(B){return"__proto__"!==B}class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function Se(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",K=B.iat||0,Pe=B.sub||B.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const tt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:K,exp:K+3600,auth_time:K,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(tt)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function $e(){return"object"==typeof self&&self.self===self}function Ue(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const B=ke();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ne(){return!1}function G(){return"object"==typeof indexedDB}function te(){return new Promise((B,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(le);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(le),B(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var Pe;L((null===(Pe=K.error)||void 0===Pe?void 0:Pe.message)||"")}}catch($){L($)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},K=`${this.service}/${L}`,Pe=this.errors[L],tt=Pe?function Pt(B,L){return B.replace(un,($,le)=>{const K=L[le];return null!=K?String(K):`<${le}?>`})}(Pe,le):"Error";return new oe(K,`${this.serviceName}: ${tt} (${K}).`,le)}}const un=/\{\$([^}]+)}/g;function Ze(B){return JSON.parse(B)}function et(B){return JSON.stringify(B)}const Vt=function(B){let L={},$={},le={},K="";try{const Pe=B.split(".");L=Ze(j(Pe[0])||""),$=Ze(j(Pe[1])||""),K=Pe[2],le=$.d||{},delete $.d}catch(Pe){}return{header:L,claims:$,data:le,signature:K}},Nt=function(B){const $=Vt(B).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},Yr=function(B){const L=Vt(B).claims;return"object"==typeof L&&!0===L.admin};function xt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function wt(B,L){if(Object.prototype.hasOwnProperty.call(B,L))return B[L]}function Mn(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function sr(B,L,$){const le={};for(const K in B)Object.prototype.hasOwnProperty.call(B,K)&&(le[K]=L.call($,B[K],K,B));return le}function ki(B,L){if(B===L)return!0;const $=Object.keys(B),le=Object.keys(L);for(const K of $){if(!le.includes(K))return!1;const Pe=B[K],tt=L[K];if(Xn(Pe)&&Xn(tt)){if(!ki(Pe,tt))return!1}else if(Pe!==tt)return!1}for(const K of le)if(!$.includes(K))return!1;return!0}function Xn(B){return null!==B&&"object"==typeof B}function Qr(B){const L=[];for(const[$,le]of Object.entries(B))Array.isArray(le)?le.forEach(K=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function er(B){const L={};return B.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[K,Pe]=le.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Pe)}}),L}function ci(B){const L=B.indexOf("?");if(!L)return"";const $=B.indexOf("#",L);return B.substring(L,$>0?$:void 0)}class Jr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let L=1;L<this.blockSize;++L)this.pad_[L]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(L,$){$||($=0);const le=this.W_;if("string"==typeof L)for(let ht=0;ht<16;ht++)le[ht]=L.charCodeAt($)<<24|L.charCodeAt($+1)<<16|L.charCodeAt($+2)<<8|L.charCodeAt($+3),$+=4;else for(let ht=0;ht<16;ht++)le[ht]=L[$]<<24|L[$+1]<<16|L[$+2]<<8|L[$+3],$+=4;for(let ht=16;ht<80;ht++){const $t=le[ht-3]^le[ht-8]^le[ht-14]^le[ht-16];le[ht]=4294967295&($t<<1|$t>>>31)}let St,tn,K=this.chain_[0],Pe=this.chain_[1],tt=this.chain_[2],At=this.chain_[3],Vn=this.chain_[4];for(let ht=0;ht<80;ht++){ht<40?ht<20?(St=At^Pe&(tt^At),tn=1518500249):(St=Pe^tt^At,tn=1859775393):ht<60?(St=Pe&tt|At&(Pe|tt),tn=2400959708):(St=Pe^tt^At,tn=3395469782);const $t=(K<<5|K>>>27)+St+Vn+tn+le[ht]&4294967295;Vn=At,At=tt,tt=4294967295&(Pe<<30|Pe>>>2),Pe=K,K=$t}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+tt&4294967295,this.chain_[3]=this.chain_[3]+At&4294967295,this.chain_[4]=this.chain_[4]+Vn&4294967295}update(L,$){if(null==L)return;void 0===$&&($=L.length);const le=$-this.blockSize;let K=0;const Pe=this.buf_;let tt=this.inbuf_;for(;K<$;){if(0===tt)for(;K<=le;)this.compress_(L,K),K+=this.blockSize;if("string"==typeof L){for(;K<$;)if(Pe[tt]=L.charCodeAt(K),++tt,++K,tt===this.blockSize){this.compress_(Pe),tt=0;break}}else for(;K<$;)if(Pe[tt]=L[K],++tt,++K,tt===this.blockSize){this.compress_(Pe),tt=0;break}}this.inbuf_=tt,this.total_+=$}digest(){const L=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&$,$/=256;this.compress_(this.buf_);let le=0;for(let K=0;K<5;K++)for(let Pe=24;Pe>=0;Pe-=8)L[le]=this.chain_[K]>>Pe&255,++le;return L}}function Ye(B,L){const $=new or(B,L);return $.subscribe.bind($)}class or{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let K;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");K=function In(B,L){if("object"!=typeof B||null===B)return!1;for(const $ of L)if($ in B&&"function"==typeof B[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===K.next&&(K.next=Cr),void 0===K.error&&(K.error=Cr),void 0===K.complete&&(K.complete=Cr);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(tt){}}),this.observers.push(K),Pe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cr(){}const Mi=function(B,L,$,le){let K;if(le<L?K="at least "+L:le>$&&(K=0===$?"none":"no more than "+$),K)throw new Error(B+" failed: Was called with "+le+(1===le?" argument.":" arguments.")+" Expects "+K+".")};function zt(B,L){return`${B} failed: ${L} argument `}function di(B,L,$,le){if((!le||$)&&"function"!=typeof $)throw new Error(zt(B,L)+"must be a valid function.")}function Zs(B,L,$,le){if((!le||$)&&("object"!=typeof $||null===$))throw new Error(zt(B,L)+"must be a valid context object.")}const bt=function(B){const L=[];let $=0;for(let le=0;le<B.length;le++){let K=B.charCodeAt(le);if(K>=55296&&K<=56319){const Pe=K-55296;le++,P(le<B.length,"Surrogate pair missing trail surrogate."),K=65536+(Pe<<10)+(B.charCodeAt(le)-56320)}K<128?L[$++]=K:K<2048?(L[$++]=K>>6|192,L[$++]=63&K|128):K<65536?(L[$++]=K>>12|224,L[$++]=K>>6&63|128,L[$++]=63&K|128):(L[$++]=K>>18|240,L[$++]=K>>12&63|128,L[$++]=K>>6&63|128,L[$++]=63&K|128)}return L},Ge=function(B){let L=0;for(let $=0;$<B.length;$++){const le=B.charCodeAt($);le<128?L++:le<2048?L+=2:le>=55296&&le<=56319?(L+=4,$++):L+=3}return L};function gs(B,L=1e3,$=2){const le=L*Math.pow($,B),K=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+K)}function Qe(B){return B&&B._delegate?B._delegate:B}function Bn(B,L){return new Promise(($,le)=>{B.onsuccess=K=>{$(K.target.result)},B.onerror=K=>{var Pe;le(`${L}: ${null===(Pe=K.target.error)||void 0===Pe?void 0:Pe.message}`)}})}class vt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new Be(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new Ce(this._db.createObjectStore(L,$))}close(){this._db.close()}}class Be{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new je(this._store.index(L))}createIndex(L,$,le){return new je(this._store.createIndex(L,$,le))}get(L){return Bn(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return Bn(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return Bn(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return Bn(this._store.clear(),"Error clearing IndexedDB object store")}}class je{constructor(L){this._index=L}get(L){return Bn(this._index.get(L),"Error reading from IndexedDB")}}function Je(B,L,$){return new Promise((le,K)=>{try{const Pe=indexedDB.open(B,L);Pe.onsuccess=tt=>{le(new vt(tt.target.result))},Pe.onerror=tt=>{var At;K(`Error opening indexedDB: ${null===(At=tt.target.error)||void 0===At?void 0:At.message}`)},Pe.onupgradeneeded=tt=>{$(new vt(Pe.result),tt.oldVersion,tt.newVersion,new Be(Pe.transaction))}}catch(Pe){K(`Error opening indexedDB: ${Pe.message}`)}})}function Ct(B){return _t.apply(this,arguments)}function _t(){return(_t=(0,p.Z)(function*(B){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(B);le.onsuccess=()=>{L()},le.onerror=K=>{var Pe;$(`Error deleting indexedDB database "${B}": ${null===(Pe=K.target.error)||void 0===Pe?void 0:Pe.message}`)}}catch(le){$(`Error deleting indexedDB database "${B}": ${le.message}`)}})})).apply(this,arguments)}},8936:(ze,ve,M)=>{var p=M(5e3);let q=null;function P(){return q}const ie=new p.OlP("DocumentToken");let ue=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=p.Yz7({token:i,factory:function(){return function ae(){return(0,p.LFG)(H)}()},providedIn:"platform"}),i})();const j=new p.OlP("Location Initialized");let H=(()=>{class i extends ue{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(e){const o=P().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=P().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,l){Y()?this._history.pushState(e,o,l):this.location.hash=l}replaceState(e,o,l){Y()?this._history.replaceState(e,o,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ie))},i.\u0275prov=p.Yz7({token:i,factory:function(){return function Le(){return new H((0,p.LFG)(ie))}()},providedIn:"platform"}),i})();function Y(){return!!window.history.pushState}function we(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function Se(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function ke(i){return i&&"?"!==i[0]?"?"+i:i}let ce=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=p.Yz7({token:i,factory:function(){return function _e(i){const t=(0,p.LFG)(ie).location;return new Ue((0,p.LFG)(ue),t&&t.origin||"")}()},providedIn:"root"}),i})();const $e=new p.OlP("appBaseHref");let Ue=(()=>{class i extends ce{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return we(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+ke(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${o}${l}`:o}pushState(e,o,l,d){const g=this.prepareExternalUrl(l+ke(d));this._platformLocation.pushState(e,o,g)}replaceState(e,o,l,d){const g=this.prepareExternalUrl(l+ke(d));this._platformLocation.replaceState(e,o,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformLocation).historyGo)||void 0===l||l.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ue),p.LFG($e,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),Ee=(()=>{class i extends ce{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=we(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,l,d){let g=this.prepareExternalUrl(l+ke(d));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(e,o,g)}replaceState(e,o,l,d){let g=this.prepareExternalUrl(l+ke(d));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformLocation).historyGo)||void 0===l||l.call(o,e)}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ue),p.LFG($e,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),pe=(()=>{class i{constructor(e,o){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const l=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=Se(Ne(l)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+ke(o))}normalize(e){return i.stripTrailingSlash(function Oe(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,Ne(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",l=null){this._platformStrategy.pushState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ke(o)),l)}replaceState(e,o="",l=null){this._platformStrategy.replaceState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ke(o)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,l;null===(l=(o=this._platformStrategy).historyGo)||void 0===l||l.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(l=>l(e,o))}subscribe(e,o,l){return this._subject.subscribe({next:e,error:o,complete:l})}}return i.normalizeQueryParams=ke,i.joinWithSlash=we,i.stripTrailingSlash=Se,i.\u0275fac=function(e){return new(e||i)(p.LFG(ce),p.LFG(ue))},i.\u0275prov=p.Yz7({token:i,factory:function(){return function me(){return new pe((0,p.LFG)(ce),(0,p.LFG)(ue))}()},providedIn:"root"}),i})();function Ne(i){return i.replace(/\/index.html$/,"")}let Qs=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})();let aa=(()=>{class i{}return i.\u0275prov=(0,p.Yz7)({token:i,providedIn:"root",factory:()=>new la((0,p.LFG)(ie),window)}),i})();class la{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ro(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const o=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=o.currentNode;for(;l;){const d=l.shadowRoot;if(d){const g=d.getElementById(t)||d.querySelector(`[name="${t}"]`);if(g)return g}l=o.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),o=e.left+this.window.pageXOffset,l=e.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(o-d[0],l-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=mi(this.window.history)||mi(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function mi(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Bi extends class Js extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(i){q||(q=i)}(new Bi)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function pu(){return Ut=Ut||document.querySelector("base"),Ut?Ut.getAttribute("href"):null}();return null==e?null:function Cs(i){Es=Es||document.createElement("a"),Es.setAttribute("href",i);const t=Es.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function qs(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const o=e.indexOf("="),[l,d]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(l.trim()===t)return decodeURIComponent(d)}return null}(document.cookie,t)}}let Es,Ut=null;const $n=new p.OlP("TRANSITION_ID"),ko=[{provide:p.ip1,useFactory:function dn(i,t,e){return()=>{e.get(p.CZH).donePromise.then(()=>{const o=P(),l=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let d=0;d<l.length;d++)o.remove(l[d])})}},deps:[$n,ie,p.zs3],multi:!0}];class Ur{static init(){(0,p.VLi)(new Ur)}addToWindow(t){p.dqk.getAngularTestability=(o,l=!0)=>{const d=t.findTestabilityInTree(o,l);if(null==d)throw new Error("Could not find testability for element.");return d},p.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(o=>{const l=p.dqk.getAllAngularTestabilities();let d=l.length,g=!1;const E=function(b){g=g||b,d--,0==d&&o(g)};l.forEach(function(b){b.whenStable(E)})})}findTestabilityInTree(t,e,o){if(null==e)return null;const l=t.getTestability(e);return null!=l?l:o?P().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Wn=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const Vi=new p.OlP("EventManagerPlugins");let _i=(()=>{class i{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,l){return this._findPluginFor(o).addEventListener(e,o,l)}addGlobalEventListener(e,o,l){return this._findPluginFor(o).addGlobalEventListener(e,o,l)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const l=this._plugins;for(let d=0;d<l.length;d++){const g=l[d];if(g.supports(e))return this._eventNameToPlugin.set(e,g),g}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(Vi),p.LFG(p.R0b))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();class ua{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const l=P().getGlobalEventTarget(this._doc,t);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,o)}}let cr=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),o.add(l))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),ji=(()=>{class i extends cr{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,l){e.forEach(d=>{const g=this._doc.createElement("style");g.textContent=d,l.push(o.appendChild(g))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(Hi),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,l)=>{this._addStylesToHost(e,l,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Hi))}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ie))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();function Hi(i){P().remove(i)}const Xe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ca=/%COMP%/g;function ye(i,t,e){for(let o=0;o<t.length;o++){let l=t[o];Array.isArray(l)?ye(i,l,e):(l=l.replace(ca,i),e.push(l))}return e}function yt(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Qt=(()=>{class i{constructor(e,o,l){this.eventManager=e,this.sharedStylesHost=o,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new Xs(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case p.ifc.Emulated:{let l=this.rendererByCompId.get(o.id);return l||(l=new il(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,l)),l.applyToHost(e),l}case 1:case p.ifc.ShadowDom:return new sl(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const l=ye(o.id,o.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(_i),p.LFG(ji),p.LFG(p.AFp))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();class Xs{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Xe[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,o){t&&t.insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,l){if(l){e=l+":"+e;const d=Xe[l];d?t.setAttributeNS(d,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const l=Xe[o];l?t.removeAttributeNS(l,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,l){l&(p.JOm.DashCase|p.JOm.Important)?t.style.setProperty(e,o,l&p.JOm.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&p.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,yt(o)):this.eventManager.addEventListener(t,e,yt(o))}}class il extends Xs{constructor(t,e,o,l){super(t),this.component=o;const d=ye(l+"-"+o.id,o.styles,[]);e.addStyles(d),this.contentAttr=function nl(i){return"_ngcontent-%COMP%".replace(ca,i)}(l+"-"+o.id),this.hostAttr=function rl(i){return"_nghost-%COMP%".replace(ca,i)}(l+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class sl extends Xs{constructor(t,e,o,l){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=ye(l.id,l.styles,[]);for(let g=0;g<d.length;g++){const E=document.createElement("style");E.textContent=d[g],this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let mu=(()=>{class i extends ua{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,l){return e.addEventListener(o,l,!1),()=>this.removeEventListener(e,o,l)}removeEventListener(e,o,l){return e.removeEventListener(o,l)}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ie))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const ol=["alt","control","meta","shift"],$i={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},On={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Dr={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let ga=(()=>{class i extends ua{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,o,l){const d=i.parseEventName(o),g=i.eventCallback(d.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(e,d.domEventName,g))}static parseEventName(e){const o=e.toLowerCase().split("."),l=o.shift();if(0===o.length||"keydown"!==l&&"keyup"!==l)return null;const d=i._normalizeKey(o.pop());let g="";if(ol.forEach(b=>{const R=o.indexOf(b);R>-1&&(o.splice(R,1),g+=b+".")}),g+=d,0!=o.length||0===d.length)return null;const E={};return E.domEventName=l,E.fullKey=g,E}static getEventFullKey(e){let o="",l=function Wi(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&On.hasOwnProperty(t)&&(t=On[t]))}return $i[t]||t}(e);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),ol.forEach(d=>{d!=l&&Dr[d](e)&&(o+=d+".")}),o+=l,o}static eventCallback(e,o,l){return d=>{i.getEventFullKey(d)===e&&l.runGuarded(()=>o(d))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(ie))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const ll=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Br(){Bi.makeCurrent(),Ur.init()},multi:!0},{provide:ie,useFactory:function ma(){return(0,p.RDi)(document),document},deps:[]}]),Po=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function al(){return new p.qLn},deps:[]},{provide:Vi,useClass:mu,multi:!0,deps:[ie,p.R0b,p.Lbi]},{provide:Vi,useClass:ga,multi:!0,deps:[ie]},{provide:Qt,useClass:Qt,deps:[_i,ji,p.AFp]},{provide:p.FYo,useExisting:Qt},{provide:cr,useExisting:ji},{provide:ji,useClass:ji,deps:[ie]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:_i,useClass:_i,deps:[Vi,p.R0b]},{provide:class Zt{},useClass:Wn,deps:[]}];let xo=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:p.AFp,useValue:e.appId},{provide:$n,useExisting:p.AFp},ko]}}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(i,12))},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:Po,imports:[Qs,p.hGG]}),i})();"undefined"!=typeof window&&window;var zn=M(8996),hn=M(7669);function it(...i){const t=(0,hn.yG)(i);return(0,zn.D)(i,t)}var Fn=M(7579);class hr extends Fn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:o}=this;if(t)throw e;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}var Tr=M(8306);const{isArray:no}=Array,{getPrototypeOf:bu,prototype:Gt,keys:Oc}=Object;var fr=M(4671),Rt=M(4004);const{isArray:Du}=Array;var fn=M(5403),Ei=M(9672);function io(...i){const t=(0,hn.yG)(i),e=(0,hn.jO)(i),{args:o,keys:l}=function ti(i){if(1===i.length){const t=i[0];if(no(t))return{args:t,keys:null};if(function va(i){return i&&"object"==typeof i&&bu(i)===Gt}(t)){const e=Oc(t);return{args:e.map(o=>t[o]),keys:e}}}return{args:i,keys:null}}(i);if(0===o.length)return(0,zn.D)([],t);const d=new Tr.y(function Sr(i,t,e=fr.y){return o=>{Zi(t,()=>{const{length:l}=i,d=new Array(l);let g=l,E=l;for(let b=0;b<l;b++)Zi(t,()=>{const R=(0,zn.D)(i[b],t);let U=!1;R.subscribe((0,fn.x)(o,O=>{d[b]=O,U||(U=!0,E--),E||o.next(e(d.slice()))},()=>{--g||o.complete()}))},o)},o)}}(o,t,l?g=>function ro(i,t){return i.reduce((e,o,l)=>(e[o]=t[l],e),{})}(l,g):fr.y));return e?d.pipe(function Fc(i){return(0,Rt.U)(t=>function ml(i,t){return Du(t)?i(...t):i(t)}(i,t))}(e)):d}function Zi(i,t,e){i?(0,Ei.f)(e,i,t):t()}var Oo=M(576);function ni(i,t){const e=(0,Oo.m)(i)?i:()=>i,o=l=>l.error(e());return new Tr.y(t?l=>t.schedule(o,0,l):o)}const qi=(0,M(3888).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var ri=M(8189);function Tu(...i){return function yl(){return(0,ri.J)(1)}()((0,zn.D)(i,(0,hn.yG)(i)))}var so=M(8421);function Vr(i){return new Tr.y(t=>{(0,so.Xf)(i()).subscribe(t)})}var oo=M(515),Fo=M(727),Zn=M(4482);function jr(){return(0,Zn.e)((i,t)=>{let e=null;i._refCount++;const o=(0,fn.x)(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const l=i._connection,d=e;e=null,l&&(!d||l===d)&&l.unsubscribe(),t.unsubscribe()});i.subscribe(o),o.closed||(e=i.connect())})}class Lc extends Tr.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Zn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Fo.w0;const e=this.getSubject();t.add(this.source.subscribe((0,fn.x)(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Fo.w0.EMPTY)}return t}refCount(){return jr()(this)}}function rn(i,t){return(0,Zn.e)((e,o)=>{let l=null,d=0,g=!1;const E=()=>g&&!l&&o.complete();e.subscribe((0,fn.x)(o,b=>{null==l||l.unsubscribe();let R=0;const U=d++;(0,so.Xf)(i(b,U)).subscribe(l=(0,fn.x)(o,O=>o.next(t?t(b,O,U,R++):O),()=>{l=null,E()}))},()=>{g=!0,E()}))})}var ao=M(5698);function lo(i,t,e,o,l){return(d,g)=>{let E=e,b=t,R=0;d.subscribe((0,fn.x)(g,U=>{const O=R++;b=E?i(b,U,O):(E=!0,U),o&&g.next(b)},l&&(()=>{E&&g.next(b),g.complete()})))}}function tr(i,t){return(0,Zn.e)(lo(i,t,arguments.length>=2,!0))}function Ts(i,t){return(0,Zn.e)((e,o)=>{let l=0;e.subscribe((0,fn.x)(o,d=>i.call(t,d,l++)&&o.next(d)))})}function ii(i){return(0,Zn.e)((t,e)=>{let d,o=null,l=!1;o=t.subscribe((0,fn.x)(e,void 0,void 0,g=>{d=(0,so.Xf)(i(g,ii(i)(t))),o?(o.unsubscribe(),o=null,d.subscribe(e)):l=!0})),l&&(o.unsubscribe(),o=null,d.subscribe(e))})}var sn=M(5577);function Yi(i,t){return(0,Oo.m)(t)?(0,sn.z)(i,t,1):(0,sn.z)(i,1)}function Su(i){return i<=0?()=>oo.E:(0,Zn.e)((t,e)=>{let o=[];t.subscribe((0,fn.x)(e,l=>{o.push(l),i<o.length&&o.shift()},()=>{for(const l of o)e.next(l);e.complete()},void 0,()=>{o=null}))})}function on(i=ch){return(0,Zn.e)((t,e)=>{let o=!1;t.subscribe((0,fn.x)(e,l=>{o=!0,e.next(l)},()=>o?e.complete():e.error(i())))})}function ch(){return new qi}function dh(i){return(0,Zn.e)((t,e)=>{let o=!1;t.subscribe((0,fn.x)(e,l=>{o=!0,e.next(l)},()=>{o||e.next(i),e.complete()}))})}function Qi(i,t){const e=arguments.length>=2;return o=>o.pipe(i?Ts((l,d)=>i(l,d,o)):fr.y,(0,ao.q)(1),e?dh(t):on(()=>new qi))}var pr=M(8505);class Ji{constructor(t,e){this.id=t,this.url=e}}class Ci extends Ji{constructor(t,e,o="imperative",l=null){super(t,e),this.navigationTrigger=o,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ea extends Ji{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xt extends Ji{constructor(t,e,o){super(t,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vl extends Ji{constructor(t,e,o){super(t,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uo extends Ji{constructor(t,e,o,l){super(t,e),this.urlAfterRedirects=o,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ph extends Ji{constructor(t,e,o,l){super(t,e),this.urlAfterRedirects=o,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class El extends Ji{constructor(t,e,o,l,d){super(t,e),this.urlAfterRedirects=o,this.state=l,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qn extends Ji{constructor(t,e,o,l){super(t,e),this.urlAfterRedirects=o,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends Ji{constructor(t,e,o,l){super(t,e),this.urlAfterRedirects=o,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cl{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ii{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class si{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wl{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const gt="primary";class bl{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function bn(i){return new bl(i)}const Dl="ngNavigationCancelingError";function Xi(i){const t=Error("NavigationCancelingError: "+i);return t[Dl]=!0,t}function Ss(i,t,e){const o=e.path.split("/");if(o.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||o.length<i.length))return null;const l={};for(let d=0;d<o.length;d++){const g=o[d],E=i[d];if(g.startsWith(":"))l[g.substring(1)]=E;else if(g!==E.path)return null}return{consumed:i.slice(0,o.length),posParams:l}}function oi(i,t){const e=i?Object.keys(i):void 0,o=t?Object.keys(t):void 0;if(!e||!o||e.length!=o.length)return!1;let l;for(let d=0;d<e.length;d++)if(l=e[d],!Ia(i[l],t[l]))return!1;return!0}function Ia(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),o=[...t].sort();return e.every((l,d)=>o[d]===l)}return i===t}function ai(i){return Array.prototype.concat.apply([],i)}function Ru(i){return i.length>0?i[i.length-1]:null}function Dn(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Rr(i){return(0,p.CqO)(i)?i:(0,p.QGY)(i)?(0,zn.D)(Promise.resolve(i)):it(i)}const As={exact:function w(i,t,e){if(!ft(i.segments,t.segments)||!X(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const o in t.children)if(!i.children[o]||!w(i.children[o],t.children[o],e))return!1;return!0},subset:F},co={exact:function I(i,t){return oi(i,t)},subset:function A(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Ia(i[e],t[e]))},ignored:()=>!0};function wa(i,t,e){return As[e.paths](i.root,t.root,e.matrixParams)&&co[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function F(i,t,e){return z(i,t,t.segments,e)}function z(i,t,e,o){if(i.segments.length>e.length){const l=i.segments.slice(0,e.length);return!(!ft(l,e)||t.hasChildren()||!X(l,e,o))}if(i.segments.length===e.length){if(!ft(i.segments,e)||!X(i.segments,e,o))return!1;for(const l in t.children)if(!i.children[l]||!F(i.children[l],t.children[l],o))return!1;return!0}{const l=e.slice(0,i.segments.length),d=e.slice(i.segments.length);return!!(ft(i.segments,l)&&X(i.segments,l,o)&&i.children[gt])&&z(i.children[gt],t,d,o)}}function X(i,t,e){return t.every((o,l)=>co[e](i[l].parameters,o.parameters))}class be{constructor(t,e,o){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return ho.serialize(this)}}class De{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Dn(e,(o,l)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rs(this)}}class Ve{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap}toString(){return Uo(this)}}function ft(i,t){return i.length===t.length&&i.every((e,o)=>e.path===t[o].path)}class En{}class an{parse(t){const e=new Mu(t);return new be(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${nr(t.root,!0)}`,o=function Kf(i){const t=Object.keys(i).map(e=>{const o=i[e];return Array.isArray(o)?o.map(l=>`${$r(e)}=${$r(l)}`).join("&"):`${$r(e)}=${$r(o)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${o}${"string"==typeof t.fragment?`#${function ks(i){return encodeURI(i)}(t.fragment)}`:""}`}}const ho=new an;function Rs(i){return i.segments.map(t=>Uo(t)).join("/")}function nr(i,t){if(!i.hasChildren())return Rs(i);if(t){const e=i.children[gt]?nr(i.children[gt],!1):"",o=[];return Dn(i.children,(l,d)=>{d!==gt&&o.push(`${d}:${nr(l,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function ut(i,t){let e=[];return Dn(i.children,(o,l)=>{l===gt&&(e=e.concat(t(o,l)))}),Dn(i.children,(o,l)=>{l!==gt&&(e=e.concat(t(o,l)))}),e}(i,(o,l)=>l===gt?[nr(i.children[gt],!1)]:[`${l}:${nr(o,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[gt]?`${Rs(i)}/${e[0]}`:`${Rs(i)}/(${e.join("//")})`}}function kr(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $r(i){return kr(i).replace(/%3B/gi,";")}function ku(i){return kr(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sl(i){return decodeURIComponent(i)}function Al(i){return Sl(i.replace(/\+/g,"%20"))}function Uo(i){return`${ku(i.path)}${function gh(i){return Object.keys(i).map(t=>`;${ku(t)}=${ku(i[t])}`).join("")}(i.parameters)}`}const Yf=/^[^\/()?;=#]+/;function wi(i){const t=i.match(Yf);return t?t[0]:""}const Rl=/^[^=?&#]+/,Jf=/^[^&#]+/;class Mu{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[gt]=new De(t,e)),o}parseSegment(){const t=wi(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ve(Sl(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=wi(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const l=wi(this.remaining);l&&(o=l,this.capture(o))}t[Sl(e)]=Sl(o)}parseQueryParam(t){const e=function Qf(i){const t=i.match(Rl);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const g=function mh(i){const t=i.match(Jf);return t?t[0]:""}(this.remaining);g&&(o=g,this.capture(o))}const l=Al(e),d=Al(o);if(t.hasOwnProperty(l)){let g=t[l];Array.isArray(g)||(g=[g],t[l]=g),g.push(d)}else t[l]=d}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=wi(this.remaining),l=this.remaining[o.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let d;o.indexOf(":")>-1?(d=o.substr(0,o.indexOf(":")),this.capture(d),this.capture(":")):t&&(d=gt);const g=this.parseChildren();e[d]=1===Object.keys(g).length?g[gt]:new De([],g),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Xf{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Uc(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){const e=Uc(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Bc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(l=>l.value).filter(l=>l!==t)}pathFromRoot(t){return Bc(t,this._root).map(e=>e.value)}}function Uc(i,t){if(i===t.value)return t;for(const e of t.children){const o=Uc(i,e);if(o)return o}return null}function Bc(i,t){if(i===t.value)return[t];for(const e of t.children){const o=Bc(i,e);if(o.length)return o.unshift(t),o}return[]}class Ms{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ps(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class Pu extends Xf{constructor(t,e){super(t),this.snapshot=e,Nu(this,t)}toString(){return this.snapshot.toString()}}function Bo(i,t){const e=function ep(i,t){const g=new ba([],{},{},"",{},gt,t,null,i.root,-1,{});return new Vc("",new Ms(g,[]))}(i,t),o=new hr([new Ve("",{})]),l=new hr({}),d=new hr({}),g=new hr({}),E=new hr(""),b=new fo(o,l,g,E,d,gt,t,e.root);return b.snapshot=e.root,new Pu(new Ms(b,[]),e)}class fo{constructor(t,e,o,l,d,g,E,b){this.url=t,this.params=e,this.queryParams=o,this.fragment=l,this.data=d,this.outlet=g,this.component=E,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(t=>bn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(t=>bn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tp(i,t="emptyOnly"){const e=i.pathFromRoot;let o=0;if("always"!==t)for(o=e.length-1;o>=1;){const l=e[o],d=e[o-1];if(l.routeConfig&&""===l.routeConfig.path)o--;else{if(d.component)break;o--}}return function xu(i){return i.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class ba{constructor(t,e,o,l,d,g,E,b,R,U,O){this.url=t,this.params=e,this.queryParams=o,this.fragment=l,this.data=d,this.outlet=g,this.component=E,this.routeConfig=b,this._urlSegment=R,this._lastPathIndex=U,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vc extends Xf{constructor(t,e){super(e),this.url=t,Nu(this,e)}toString(){return Ou(this._root)}}function Nu(i,t){t.value._routerState=i,t.children.forEach(e=>Nu(i,e))}function Ou(i){const t=i.children.length>0?` { ${i.children.map(Ou).join(", ")} } `:"";return`${i.value}${t}`}function Fu(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,oi(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),oi(t.params,e.params)||i.params.next(e.params),function Ca(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!oi(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),oi(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function jc(i,t){const e=oi(i.params,t.params)&&function at(i,t){return ft(i,t)&&i.every((e,o)=>oi(e.parameters,t[o].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||jc(i.parent,t.parent))}function kl(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=t.value;const l=function Hc(i,t,e){return t.children.map(o=>{for(const l of e.children)if(i.shouldReuseRoute(o.value,l.value.snapshot))return kl(i,o,l);return kl(i,o)})}(i,t,e);return new Ms(o,l)}{if(i.shouldAttach(t.value)){const d=i.retrieve(t.value);if(null!==d){const g=d.route;return g.value._futureSnapshot=t.value,g.children=t.children.map(E=>kl(i,E)),g}}const o=function rp(i){return new fo(new hr(i.url),new hr(i.params),new hr(i.queryParams),new hr(i.fragment),new hr(i.data),i.outlet,i.component,i)}(t.value),l=t.children.map(d=>kl(i,d));return new Ms(o,l)}}function po(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Da(i){return"object"==typeof i&&null!=i&&i.outlets}function _h(i,t,e,o,l){let d={};if(o&&Dn(o,(E,b)=>{d[b]=Array.isArray(E)?E.map(R=>`${R}`):`${E}`}),i===t)return new be(e,d,l);const g=$c(i,t,e);return new be(g,d,l)}function $c(i,t,e){const o={};return Dn(i.children,(l,d)=>{o[d]=l===t?e:$c(l,t,e)}),new De(i.segments,o)}class ip{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&po(o[0]))throw new Error("Root segment cannot have matrix parameters");const l=o.find(Da);if(l&&l!==Ru(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wc{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}}function lp(i,t,e){if(i||(i=new De([],{})),0===i.segments.length&&i.hasChildren())return ts(i,t,e);const o=function qm(i,t,e){let o=0,l=t;const d={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(o>=e.length)return d;const g=i.segments[l],E=e[o];if(Da(E))break;const b=`${E}`,R=o<e.length-1?e[o+1]:null;if(l>0&&void 0===b)break;if(b&&R&&"object"==typeof R&&void 0===R.outlets){if(!Wr(b,R,g))return d;o+=2}else{if(!Wr(b,{},g))return d;o++}l++}return{match:!0,pathIndex:l,commandIndex:o}}(i,t,e),l=e.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){const d=new De(i.segments.slice(0,o.pathIndex),{});return d.children[gt]=new De(i.segments.slice(o.pathIndex),i.children),ts(d,0,l)}return o.match&&0===l.length?new De(i.segments,{}):o.match&&!i.hasChildren()?Gc(i,t,e):o.match?ts(i,0,l):Gc(i,t,e)}function ts(i,t,e){if(0===e.length)return new De(i.segments,{});{const o=function ap(i){return Da(i[0])?i[0].outlets:{[gt]:i}}(e),l={};return Dn(o,(d,g)=>{"string"==typeof d&&(d=[d]),null!==d&&(l[g]=lp(i.children[g],t,d))}),Dn(i.children,(d,g)=>{void 0===o[g]&&(l[g]=d)}),new De(i.segments,l)}}function Gc(i,t,e){const o=i.segments.slice(0,t);let l=0;for(;l<e.length;){const d=e[l];if(Da(d)){const b=Ta(d.outlets);return new De(o,b)}if(0===l&&po(e[0])){o.push(new Ve(i.segments[t].path,zc(e[0]))),l++;continue}const g=Da(d)?d.outlets[gt]:`${d}`,E=l<e.length-1?e[l+1]:null;g&&E&&po(E)?(o.push(new Ve(g,zc(E))),l+=2):(o.push(new Ve(g,{})),l++)}return new De(o,{})}function Ta(i){const t={};return Dn(i,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[o]=Gc(new De([],{}),0,e))}),t}function zc(i){const t={};return Dn(i,(e,o)=>t[o]=`${e}`),t}function Wr(i,t,e){return i==e.path&&oi(t,e.parameters)}class vh{constructor(t,e,o,l){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=l}activate(t){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),Fu(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){const l=Ps(e);t.children.forEach(d=>{const g=d.value.outlet;this.deactivateRoutes(d,l[g],o),delete l[g]}),Dn(l,(d,g)=>{this.deactivateRouteAndItsChildren(d,o)})}deactivateRoutes(t,e,o){const l=t.value,d=e?e.value:null;if(l===d)if(l.component){const g=o.getContext(l.outlet);g&&this.deactivateChildRoutes(t,e,g.children)}else this.deactivateChildRoutes(t,e,o);else d&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const o=e.getContext(t.value.outlet),l=o&&t.value.component?o.children:e,d=Ps(t);for(const g of Object.keys(d))this.deactivateRouteAndItsChildren(d[g],l);if(o&&o.outlet){const g=o.outlet.detach(),E=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:g,route:t,contexts:E})}}deactivateRouteAndOutlet(t,e){const o=e.getContext(t.value.outlet),l=o&&t.value.component?o.children:e,d=Ps(t);for(const g of Object.keys(d))this.deactivateRouteAndItsChildren(d[g],l);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(t,e,o){const l=Ps(e);t.children.forEach(d=>{this.activateRoutes(d,l[d.value.outlet],o),this.forwardEvent(new Il(d.value.snapshot))}),t.children.length&&this.forwardEvent(new si(t.value.snapshot))}activateRoutes(t,e,o){const l=t.value,d=e?e.value:null;if(Fu(l),l===d)if(l.component){const g=o.getOrCreateContext(l.outlet);this.activateChildRoutes(t,e,g.children)}else this.activateChildRoutes(t,e,o);else if(l.component){const g=o.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const E=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),g.children.onOutletReAttached(E.contexts),g.attachRef=E.componentRef,g.route=E.route.value,g.outlet&&g.outlet.attach(E.componentRef,E.route.value),Fu(E.route.value),this.activateChildRoutes(t,null,g.children)}else{const E=function Lu(i){for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(l.snapshot),b=E?E.module.componentFactoryResolver:null;g.attachRef=null,g.route=l,g.resolver=b,g.outlet&&g.outlet.activateWith(l,b),this.activateChildRoutes(t,null,g.children)}}else this.activateChildRoutes(t,null,o)}}class Uu{constructor(t,e){this.routes=t,this.module=e}}function Vo(i){return"function"==typeof i}function Sa(i){return i instanceof be}const Pl=Symbol("INITIAL_VALUE");function go(){return rn(i=>io(i.map(t=>t.pipe((0,ao.q)(1),function Ki(...i){const t=(0,hn.yG)(i);return(0,Zn.e)((e,o)=>{(t?Tu(i,e,t):Tu(i,e)).subscribe(o)})}(Pl)))).pipe(tr((t,e)=>{let o=!1;return e.reduce((l,d,g)=>l!==Pl?l:(d===Pl&&(o=!0),o||!1!==d&&g!==e.length-1&&!Sa(d)?l:d),t)},Pl),Ts(t=>t!==Pl),(0,Rt.U)(t=>Sa(t)?t:!0===t),(0,ao.q)(1)))}class up{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xl,this.attachRef=null}}class xl{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const o=this.getOrCreateContext(t);o.outlet=e,this.contexts.set(t,o)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new up,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let Bu=(()=>{class i{constructor(e,o,l,d,g){this.parentContexts=e,this.location=o,this.resolver=l,this.changeDetector=g,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=d||gt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const g=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),E=this.parentContexts.getOrCreateContext(this.name).children,b=new Yc(e,E,this.location.injector);this.activated=this.location.createComponent(g,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(p.Y36(xl),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},i.\u0275dir=p.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class Yc{constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===fo?this.route:t===xl?this.childContexts:this.parent.get(t,e)}}let Qc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=p.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&p._UZ(0,"router-outlet")},directives:[Bu],encapsulation:2}),i})();function Nl(i,t=""){for(let e=0;e<i.length;e++){const o=i[e];Vu(o,Jc(t,o))}}function Vu(i,t){i.children&&Nl(i.children,t)}function Jc(i,t){return t?i||t.path?i&&!t.path?`${i}/`:!i&&t.path?t.path:`${i}/${t.path}`:"":i}function Xc(i){const t=i.children&&i.children.map(Xc),e=t?Object.assign(Object.assign({},i),{children:t}):Object.assign({},i);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==gt&&(e.component=Qc),e}function Ot(i){return i.outlet||gt}function ed(i,t){const e=i.filter(o=>Ot(o)===t);return e.push(...i.filter(o=>Ot(o)!==t)),e}const Ch={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Aa(i,t,e){var o;if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?Object.assign({},Ch):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const d=(t.matcher||Ss)(e,i,t);if(!d)return Object.assign({},Ch);const g={};Dn(d.posParams,(b,R)=>{g[R]=b.path});const E=d.consumed.length>0?Object.assign(Object.assign({},g),d.consumed[d.consumed.length-1].parameters):g;return{matched:!0,consumedSegments:d.consumed,remainingSegments:e.slice(d.consumed.length),parameters:E,positionalParamSegments:null!==(o=d.posParams)&&void 0!==o?o:{}}}function Ol(i,t,e,o,l="corrected"){if(e.length>0&&function dp(i,t,e){return e.some(o=>Hu(i,t,o)&&Ot(o)!==gt)}(i,e,o)){const g=new De(t,function ju(i,t,e,o){const l={};l[gt]=o,o._sourceSegment=i,o._segmentIndexShift=t.length;for(const d of e)if(""===d.path&&Ot(d)!==gt){const g=new De([],{});g._sourceSegment=i,g._segmentIndexShift=t.length,l[Ot(d)]=g}return l}(i,t,o,new De(e,i.children)));return g._sourceSegment=i,g._segmentIndexShift=t.length,{segmentGroup:g,slicedSegments:[]}}if(0===e.length&&function Ih(i,t,e){return e.some(o=>Hu(i,t,o))}(i,e,o)){const g=new De(i.segments,function cp(i,t,e,o,l,d){const g={};for(const E of o)if(Hu(i,e,E)&&!l[Ot(E)]){const b=new De([],{});b._sourceSegment=i,b._segmentIndexShift="legacy"===d?i.segments.length:t.length,g[Ot(E)]=b}return Object.assign(Object.assign({},l),g)}(i,t,e,o,i.children,l));return g._sourceSegment=i,g._segmentIndexShift=t.length,{segmentGroup:g,slicedSegments:e}}const d=new De(i.segments,i.children);return d._sourceSegment=i,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}function Hu(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function hp(i,t,e,o){return!!(Ot(i)===o||o!==gt&&Hu(t,e,i))&&("**"===i.path||Aa(t,i,e).matched)}function fp(i,t,e){return 0===t.length&&!i.children[e]}class mo{constructor(t){this.segmentGroup=t||null}}class Kn{constructor(t){this.urlTree=t}}function xs(i){return ni(new mo(i))}function Fl(i){return ni(new Kn(i))}class nd{constructor(t,e,o,l,d){this.configLoader=e,this.urlSerializer=o,this.urlTree=l,this.config=d,this.allowRedirects=!0,this.ngModule=t.get(p.h0i)}apply(){const t=Ol(this.urlTree.root,[],[],this.config).segmentGroup,e=new De(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,gt).pipe((0,Rt.U)(d=>this.createUrlTree(Ho(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ii(d=>{if(d instanceof Kn)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof mo?this.noMatchError(d):d}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,gt).pipe((0,Rt.U)(l=>this.createUrlTree(Ho(l),t.queryParams,t.fragment))).pipe(ii(l=>{throw l instanceof mo?this.noMatchError(l):l}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,o){const l=t.segments.length>0?new De([],{[gt]:t}):t;return new be(l,e,o)}expandSegmentGroup(t,e,o,l){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,e,o).pipe((0,Rt.U)(d=>new De([],d))):this.expandSegment(t,o,e,o.segments,l,!0)}expandChildren(t,e,o){const l=[];for(const d of Object.keys(o.children))"primary"===d?l.unshift(d):l.push(d);return(0,zn.D)(l).pipe(Yi(d=>{const g=o.children[d],E=ed(e,d);return this.expandSegmentGroup(t,E,g,d).pipe((0,Rt.U)(b=>({segment:b,outlet:d})))}),tr((d,g)=>(d[g.outlet]=g.segment,d),{}),function hh(i,t){const e=arguments.length>=2;return o=>o.pipe(i?Ts((l,d)=>i(l,d,o)):fr.y,Su(1),e?dh(t):on(()=>new qi))}())}expandSegment(t,e,o,l,d,g){return(0,zn.D)(o).pipe(Yi(E=>this.expandSegmentAgainstRoute(t,e,o,E,l,d,g).pipe(ii(R=>{if(R instanceof mo)return it(null);throw R}))),Qi(E=>!!E),ii((E,b)=>{if(E instanceof qi||"EmptyError"===E.name)return fp(e,l,d)?it(new De([],{})):xs(e);throw E}))}expandSegmentAgainstRoute(t,e,o,l,d,g,E){return hp(l,e,d,g)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(t,e,l,d,g):E&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,o,l,d,g):xs(e):xs(e)}expandSegmentAgainstRouteUsingRedirect(t,e,o,l,d,g){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,l,g):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,l,d,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,o,l){const d=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Fl(d):this.lineralizeSegments(o,d).pipe((0,sn.z)(g=>{const E=new De(g,{});return this.expandSegment(t,E,e,g,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,l,d,g){const{matched:E,consumedSegments:b,remainingSegments:R,positionalParamSegments:U}=Aa(e,l,d);if(!E)return xs(e);const O=this.applyRedirectCommands(b,l.redirectTo,U);return l.redirectTo.startsWith("/")?Fl(O):this.lineralizeSegments(l,O).pipe((0,sn.z)(Q=>this.expandSegment(t,e,o,Q.concat(R),g,!1)))}matchSegmentAgainstRoute(t,e,o,l,d){if("**"===o.path)return o.loadChildren?(o._loadedConfig?it(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe((0,Rt.U)(O=>(o._loadedConfig=O,new De(l,{})))):it(new De(l,{}));const{matched:g,consumedSegments:E,remainingSegments:b}=Aa(e,o,l);return g?this.getChildConfig(t,o,l).pipe((0,sn.z)(U=>{const O=U.module,Q=U.routes,{segmentGroup:ge,slicedSegments:Me}=Ol(e,E,b,Q),Ke=new De(ge.segments,ge.children);if(0===Me.length&&Ke.hasChildren())return this.expandChildren(O,Q,Ke).pipe((0,Rt.U)(Nr=>new De(E,Nr)));if(0===Q.length&&0===Me.length)return it(new De(E,{}));const kt=Ot(o)===d;return this.expandSegment(O,Ke,Q,Me,kt?gt:d,!0).pipe((0,Rt.U)(en=>new De(E.concat(en.segments),en.children)))})):xs(e)}getChildConfig(t,e,o){return e.children?it(new Uu(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?it(e._loadedConfig):this.runCanLoadGuards(t.injector,e,o).pipe((0,sn.z)(l=>l?this.configLoader.load(t.injector,e).pipe((0,Rt.U)(d=>(e._loadedConfig=d,d))):function rr(i){return ni(Xi(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`))}(e))):it(new Uu([],t))}runCanLoadGuards(t,e,o){const l=e.canLoad;return l&&0!==l.length?it(l.map(g=>{const E=t.get(g);let b;if(function Zc(i){return i&&Vo(i.canLoad)}(E))b=E.canLoad(e,o);else{if(!Vo(E))throw new Error("Invalid CanLoad guard");b=E(e,o)}return Rr(b)})).pipe(go(),(0,pr.b)(g=>{if(!Sa(g))return;const E=Xi(`Redirecting to "${this.urlSerializer.serialize(g)}"`);throw E.url=g,E}),(0,Rt.U)(g=>!0===g)):it(!0)}lineralizeSegments(t,e){let o=[],l=e.root;for(;;){if(o=o.concat(l.segments),0===l.numberOfChildren)return it(o);if(l.numberOfChildren>1||!l.children[gt])return ni(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));l=l.children[gt]}}applyRedirectCommands(t,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,o)}applyRedirectCreatreUrlTree(t,e,o,l){const d=this.createSegmentGroup(t,e.root,o,l);return new be(d,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const o={};return Dn(t,(l,d)=>{if("string"==typeof l&&l.startsWith(":")){const E=l.substring(1);o[d]=e[E]}else o[d]=l}),o}createSegmentGroup(t,e,o,l){const d=this.createSegments(t,e.segments,o,l);let g={};return Dn(e.children,(E,b)=>{g[b]=this.createSegmentGroup(t,E,o,l)}),new De(d,g)}createSegments(t,e,o,l){return e.map(d=>d.path.startsWith(":")?this.findPosParam(t,d,l):this.findOrReturn(d,o))}findPosParam(t,e,o){const l=o[e.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return l}findOrReturn(t,e){let o=0;for(const l of e){if(l.path===t.path)return e.splice(o),l;o++}return t}}function Ho(i){const t={};for(const o of Object.keys(i.children)){const d=Ho(i.children[o]);(d.segments.length>0||d.hasChildren())&&(t[o]=d)}return function Gr(i){if(1===i.numberOfChildren&&i.children[gt]){const t=i.children[gt];return new De(i.segments.concat(t.segments),t.children)}return i}(new De(i.segments,t))}class wh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class $o{constructor(t,e){this.component=t,this.route=e}}function id(i,t,e){const o=i._root;return Mr(o,t?t._root:null,e,[o.value])}function Ll(i,t,e){const o=function pp(i){if(!i)return null;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(o?o.module.injector:e).get(i)}function Mr(i,t,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=Ps(t);return i.children.forEach(g=>{(function Dh(i,t,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const d=i.value,g=t?t.value:null,E=e?e.getContext(i.value.outlet):null;if(g&&d.routeConfig===g.routeConfig){const b=function gp(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!ft(i.url,t.url);case"pathParamsOrQueryParamsChange":return!ft(i.url,t.url)||!oi(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jc(i,t)||!oi(i.queryParams,t.queryParams);default:return!jc(i,t)}}(g,d,d.routeConfig.runGuardsAndResolvers);b?l.canActivateChecks.push(new wh(o)):(d.data=g.data,d._resolvedData=g._resolvedData),Mr(i,t,d.component?E?E.children:null:e,o,l),b&&E&&E.outlet&&E.outlet.isActivated&&l.canDeactivateChecks.push(new $o(E.outlet.component,g))}else g&&Wo(t,E,l),l.canActivateChecks.push(new wh(o)),Mr(i,null,d.component?E?E.children:null:e,o,l)})(g,d[g.value.outlet],e,o.concat([g.value]),l),delete d[g.value.outlet]}),Dn(d,(g,E)=>Wo(g,e.getContext(E),l)),l}function Wo(i,t,e){const o=Ps(i),l=i.value;Dn(o,(d,g)=>{Wo(d,l.component?t?t.children.getContext(g):null:t,e)}),e.canDeactivateChecks.push(new $o(l.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,l))}class ad{}function ld(i){return new Tr.y(t=>t.error(i))}class ud{constructor(t,e,o,l,d,g){this.rootComponentType=t,this.config=e,this.urlTree=o,this.url=l,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g}recognize(){const t=Ol(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,gt);if(null===e)return null;const o=new ba([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new Ms(o,e),d=new Vc(this.url,l);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(t){const e=t.value,o=tp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),t.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(t,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,o)}processChildren(t,e){const o=[];for(const d of Object.keys(e.children)){const g=e.children[d],E=ed(t,d),b=this.processSegmentGroup(E,g,d);if(null===b)return null;o.push(...b)}const l=Sh(o);return function vp(i){i.sort((t,e)=>t.value.outlet===gt?-1:e.value.outlet===gt?1:t.value.outlet.localeCompare(e.value.outlet))}(l),l}processSegment(t,e,o,l){for(const d of t){const g=this.processSegmentAgainstRoute(d,e,o,l);if(null!==g)return g}return fp(e,o,l)?[]:null}processSegmentAgainstRoute(t,e,o,l){if(t.redirectTo||!hp(t,e,o,l))return null;let d,g=[],E=[];if("**"===t.path){const ge=o.length>0?Ru(o).parameters:{};d=new ba(o,ge,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(t),Ot(t),t.component,t,c(e),f(e)+o.length,D(t))}else{const ge=Aa(e,t,o);if(!ge.matched)return null;g=ge.consumedSegments,E=ge.remainingSegments,d=new ba(g,ge.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(t),Ot(t),t.component,t,c(e),f(e)+g.length,D(t))}const b=function Ep(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(t),{segmentGroup:R,slicedSegments:U}=Ol(e,g,E,b.filter(ge=>void 0===ge.redirectTo),this.relativeLinkResolution);if(0===U.length&&R.hasChildren()){const ge=this.processChildren(b,R);return null===ge?null:[new Ms(d,ge)]}if(0===b.length&&0===U.length)return[new Ms(d,[])];const O=Ot(t)===l,Q=this.processSegment(b,R,U,O?gt:l);return null===Q?null:[new Ms(d,Q)]}}function Cp(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Sh(i){const t=[],e=new Set;for(const o of i){if(!Cp(o)){t.push(o);continue}const l=t.find(d=>o.value.routeConfig===d.value.routeConfig);void 0!==l?(l.children.push(...o.children),e.add(l)):t.push(o)}for(const o of e){const l=Sh(o.children);t.push(new Ms(o.value,l))}return t.filter(o=>!e.has(o))}function c(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function f(i){let t=i,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function y(i){return i.data||{}}function D(i){return i.resolve||{}}function He(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function qe(i){return rn(t=>{const e=i(t);return e?(0,zn.D)(e).pipe((0,Rt.U)(()=>t)):it(t)})}class Bl extends class ui{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ra=new p.OlP("ROUTES");class ka{constructor(t,e,o,l){this.injector=t,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=l}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const l=this.loadModuleFactory(e.loadChildren).pipe((0,Rt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(e);const g=d.create(t);return new Uu(ai(g.injector.get(Ra,void 0,p.XFs.Self|p.XFs.Optional)).map(Xc),g)}),ii(d=>{throw e._loader$=void 0,d}));return e._loader$=new Lc(l,()=>new Fn.x).pipe(jr()),e._loader$}loadModuleFactory(t){return Rr(t()).pipe((0,sn.z)(e=>e instanceof p.YKP?it(e):(0,zn.D)(this.compiler.compileModuleAsync(e))))}}class Ip{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function _o(i){throw i}function $u(i,t,e){return t.parse("/")}function Wu(i,t){return it(null)}const dd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zr=(()=>{class i{constructor(e,o,l,d,g,E,b){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=l,this.location=d,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fn.x,this.errorHandler=_o,this.malformedUriErrorHandler=$u,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wu,afterPreactivation:Wu},this.urlHandlingStrategy=new Ip,this.routeReuseStrategy=new Bl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=g.get(p.h0i),this.console=g.get(p.c2e);const O=g.get(p.R0b);this.isNgZoneEnabled=O instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=function Tl(){return new be(new De([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ka(g,E,Q=>this.triggerEvent(new Cl(Q)),Q=>this.triggerEvent(new Ii(Q))),this.routerState=Bo(this.currentUrlTree,this.rootComponentType),this.transitions=new hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(Ts(l=>0!==l.id),(0,Rt.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),rn(l=>{let d=!1,g=!1;return it(l).pipe((0,pr.b)(E=>{this.currentNavigation={id:E.id,initialUrl:E.currentRawUrl,extractedUrl:E.extractedUrl,trigger:E.source,extras:E.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),rn(E=>{const b=this.browserUrlTree.toString(),R=!this.navigated||E.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||R)&&this.urlHandlingStrategy.shouldProcessUrl(E.rawUrl))return Ah(E.source)&&(this.browserUrlTree=E.extractedUrl),it(E).pipe(rn(O=>{const Q=this.transitions.getValue();return o.next(new Ci(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),Q!==this.transitions.getValue()?oo.E:Promise.resolve(O)}),function rd(i,t,e,o){return rn(l=>function jo(i,t,e,o,l){return new nd(i,t,e,o,l).apply()}(i,t,e,l.extractedUrl,o).pipe((0,Rt.U)(d=>Object.assign(Object.assign({},l),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,pr.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function k(i,t,e,o,l){return(0,sn.z)(d=>function yp(i,t,e,o,l="emptyOnly",d="legacy"){try{const g=new ud(i,t,e,o,l,d).recognize();return null===g?ld(new ad):it(g)}catch(g){return ld(g)}}(i,t,d.urlAfterRedirects,e(d.urlAfterRedirects),o,l).pipe((0,Rt.U)(g=>Object.assign(Object.assign({},d),{targetSnapshot:g}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,pr.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const ge=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(ge,O)}this.browserUrlTree=O.urlAfterRedirects}const Q=new uo(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);o.next(Q)}));if(R&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Q,extractedUrl:ge,source:Me,restoredState:Ke,extras:kt}=E,Jn=new Ci(Q,this.serializeUrl(ge),Me,Ke);o.next(Jn);const en=Bo(ge,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},E),{targetSnapshot:en,urlAfterRedirects:ge,extras:Object.assign(Object.assign({},kt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=E.rawUrl,E.resolve(null),oo.E}),qe(E=>{const{targetSnapshot:b,id:R,extractedUrl:U,rawUrl:O,extras:{skipLocationChange:Q,replaceUrl:ge}}=E;return this.hooks.beforePreactivation(b,{navigationId:R,appliedUrlTree:U,rawUrlTree:O,skipLocationChange:!!Q,replaceUrl:!!ge})}),(0,pr.b)(E=>{const b=new ph(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(b)}),(0,Rt.U)(E=>Object.assign(Object.assign({},E),{guards:id(E.targetSnapshot,E.currentSnapshot,this.rootContexts)})),function mp(i,t){return(0,sn.z)(e=>{const{targetSnapshot:o,currentSnapshot:l,guards:{canActivateChecks:d,canDeactivateChecks:g}}=e;return 0===g.length&&0===d.length?it(Object.assign(Object.assign({},e),{guardsResult:!0})):function Th(i,t,e,o){return(0,zn.D)(i).pipe((0,sn.z)(l=>function Ul(i,t,e,o,l){const d=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return d&&0!==d.length?it(d.map(E=>{const b=Ll(E,t,l);let R;if(function Km(i){return i&&Vo(i.canDeactivate)}(b))R=Rr(b.canDeactivate(i,t,e,o));else{if(!Vo(b))throw new Error("Invalid CanDeactivate guard");R=Rr(b(i,t,e,o))}return R.pipe(Qi())})).pipe(go()):it(!0)}(l.component,l.route,e,t,o)),Qi(l=>!0!==l,!0))}(g,o,l,i).pipe((0,sn.z)(E=>E&&function Eh(i){return"boolean"==typeof i}(E)?function Yn(i,t,e,o){return(0,zn.D)(t).pipe(Yi(l=>Tu(function od(i,t){return null!==i&&t&&t(new Hr(i)),it(!0)}(l.route.parent,o),function sd(i,t){return null!==i&&t&&t(new Lo(i)),it(!0)}(l.route,o),function Ns(i,t,e){const o=t[t.length-1],d=t.slice(0,t.length-1).reverse().map(g=>function bh(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(g)).filter(g=>null!==g).map(g=>Vr(()=>it(g.guards.map(b=>{const R=Ll(b,g.node,e);let U;if(function Kc(i){return i&&Vo(i.canActivateChild)}(R))U=Rr(R.canActivateChild(o,i));else{if(!Vo(R))throw new Error("Invalid CanActivateChild guard");U=Rr(R(o,i))}return U.pipe(Qi())})).pipe(go())));return it(d).pipe(go())}(i,l.path,e),function _p(i,t,e){const o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||0===o.length)return it(!0);const l=o.map(d=>Vr(()=>{const g=Ll(d,t,e);let E;if(function qc(i){return i&&Vo(i.canActivate)}(g))E=Rr(g.canActivate(t,i));else{if(!Vo(g))throw new Error("Invalid CanActivate guard");E=Rr(g(t,i))}return E.pipe(Qi())}));return it(l).pipe(go())}(i,l.route,e))),Qi(l=>!0!==l,!0))}(o,d,i,t):it(E)),(0,Rt.U)(E=>Object.assign(Object.assign({},e),{guardsResult:E})))})}(this.ngModule.injector,E=>this.triggerEvent(E)),(0,pr.b)(E=>{if(Sa(E.guardsResult)){const R=Xi(`Redirecting to "${this.serializeUrl(E.guardsResult)}"`);throw R.url=E.guardsResult,R}const b=new El(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot,!!E.guardsResult);this.triggerEvent(b)}),Ts(E=>!!E.guardsResult||(this.restoreHistory(E),this.cancelNavigationTransition(E,""),!1)),qe(E=>{if(E.guards.canActivateChecks.length)return it(E).pipe((0,pr.b)(b=>{const R=new qn(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(R)}),rn(b=>{let R=!1;return it(b).pipe(function W(i,t){return(0,sn.z)(e=>{const{targetSnapshot:o,guards:{canActivateChecks:l}}=e;if(!l.length)return it(e);let d=0;return(0,zn.D)(l).pipe(Yi(g=>function re(i,t,e,o){return function xe(i,t,e,o){const l=He(i);if(0===l.length)return it({});const d={};return(0,zn.D)(l).pipe((0,sn.z)(g=>function nt(i,t,e,o){const l=Ll(i,t,o);return Rr(l.resolve?l.resolve(t,e):l(t,e))}(i[g],t,e,o).pipe((0,pr.b)(E=>{d[g]=E}))),Su(1),(0,sn.z)(()=>He(d).length===l.length?it(d):oo.E))}(i._resolve,i,t,o).pipe((0,Rt.U)(d=>(i._resolvedData=d,i.data=Object.assign(Object.assign({},i.data),tp(i,e).resolve),null)))}(g.route,o,i,t)),(0,pr.b)(()=>d++),Su(1),(0,sn.z)(g=>d===l.length?it(e):oo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,pr.b)({next:()=>R=!0,complete:()=>{R||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,pr.b)(b=>{const R=new Ar(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(R)}))}),qe(E=>{const{targetSnapshot:b,id:R,extractedUrl:U,rawUrl:O,extras:{skipLocationChange:Q,replaceUrl:ge}}=E;return this.hooks.afterPreactivation(b,{navigationId:R,appliedUrlTree:U,rawUrlTree:O,skipLocationChange:!!Q,replaceUrl:!!ge})}),(0,Rt.U)(E=>{const b=function np(i,t,e){const o=kl(i,t._root,e?e._root:void 0);return new Pu(o,t)}(this.routeReuseStrategy,E.targetSnapshot,E.currentRouterState);return Object.assign(Object.assign({},E),{targetRouterState:b})}),(0,pr.b)(E=>{this.currentUrlTree=E.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl),this.routerState=E.targetRouterState,"deferred"===this.urlUpdateStrategy&&(E.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,E),this.browserUrlTree=E.urlAfterRedirects)}),((i,t,e)=>(0,Rt.U)(o=>(new vh(t,o.targetRouterState,o.currentRouterState,e).activate(i),o)))(this.rootContexts,this.routeReuseStrategy,E=>this.triggerEvent(E)),(0,pr.b)({next(){d=!0},complete(){d=!0}}),function fh(i){return(0,Zn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}(()=>{var E;d||g||this.cancelNavigationTransition(l,`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`),(null===(E=this.currentNavigation)||void 0===E?void 0:E.id)===l.id&&(this.currentNavigation=null)}),ii(E=>{if(g=!0,function Au(i){return i&&i[Dl]}(E)){const b=Sa(E.url);b||(this.navigated=!0,this.restoreHistory(l,!0));const R=new Xt(l.id,this.serializeUrl(l.extractedUrl),E.message);o.next(R),b?setTimeout(()=>{const U=this.urlHandlingStrategy.merge(E.url,this.rawUrlTree),O={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ah(l.source)};this.scheduleNavigation(U,"imperative",null,O,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const b=new vl(l.id,this.serializeUrl(l.extractedUrl),E);o.next(b);try{l.resolve(this.errorHandler(E))}catch(R){l.reject(R)}}return oo.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{var l;const d={replaceUrl:!0},g=(null===(l=e.state)||void 0===l?void 0:l.navigationId)?e.state:null;if(g){const b=Object.assign({},g);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(d.state=b)}const E=this.parseUrl(e.url);this.scheduleNavigation(E,o,g,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Nl(e),this.config=e.map(Xc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:l,queryParams:d,fragment:g,queryParamsHandling:E,preserveFragment:b}=o,R=l||this.routerState.root,U=b?this.currentUrlTree.fragment:g;let O=null;switch(E){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=d||null}return null!==O&&(O=this.removeEmptyProps(O)),function es(i,t,e,o,l){if(0===e.length)return _h(t.root,t.root,t.root,o,l);const d=function sp(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new ip(!0,0,i);let t=0,e=!1;const o=i.reduce((l,d,g)=>{if("object"==typeof d&&null!=d){if(d.outlets){const E={};return Dn(d.outlets,(b,R)=>{E[R]="string"==typeof b?b.split("/"):b}),[...l,{outlets:E}]}if(d.segmentPath)return[...l,d.segmentPath]}return"string"!=typeof d?[...l,d]:0===g?(d.split("/").forEach((E,b)=>{0==b&&"."===E||(0==b&&""===E?e=!0:".."===E?t++:""!=E&&l.push(E))}),l):[...l,d]},[]);return new ip(e,t,o)}(e);if(d.toRoot())return _h(t.root,t.root,new De([],{}),o,l);const g=function yh(i,t,e){if(i.isAbsolute)return new Wc(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const d=e.snapshot._urlSegment;return new Wc(d,d===t.root,0)}const o=po(i.commands[0])?0:1;return function op(i,t,e){let o=i,l=t,d=e;for(;d>l;){if(d-=l,o=o.parent,!o)throw new Error("Invalid number of '../'");l=o.segments.length}return new Wc(o,!1,l-d)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(d,t,i),E=g.processChildren?ts(g.segmentGroup,g.index,d.commands):lp(g.segmentGroup,g.index,d.commands);return _h(t.root,g.segmentGroup,E,o,l)}(R,this.currentUrlTree,e,O,null!=U?U:null)}navigateByUrl(e,o={skipLocationChange:!1}){const l=Sa(e)?e:this.parseUrl(e),d=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function hd(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(l){o=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return o}isActive(e,o){let l;if(l=!0===o?Object.assign({},dd):!1===o?Object.assign({},Gu):o,Sa(e))return wa(this.currentUrlTree,e,l);const d=this.parseUrl(e);return wa(this.currentUrlTree,d,l)}removeEmptyProps(e){return Object.keys(e).reduce((o,l)=>{const d=e[l];return null!=d&&(o[l]=d),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ea(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,l,d,g){var E,b;if(this.disposed)return Promise.resolve(!1);let R,U,O;g?(R=g.resolve,U=g.reject,O=g.promise):O=new Promise((Me,Ke)=>{R=Me,U=Ke});const Q=++this.navigationId;let ge;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),ge=l&&l.\u0275routerPageId?l.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(E=this.browserPageId)&&void 0!==E?E:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):ge=0,this.setTransition({id:Q,targetPageId:ge,source:o,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:d,resolve:R,reject:U,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(Me=>Promise.reject(Me))}setBrowserUrl(e,o){const l=this.urlSerializer.serialize(e),d=Object.assign(Object.assign({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(l)||o.extras.replaceUrl?this.location.replaceState(l,"",d):this.location.go(l,"",d)}restoreHistory(e,o=!1){var l,d;if("computed"===this.canceledNavigationResolution){const g=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===g?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===g&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(g)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const l=new Xt(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(l),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return i.\u0275fac=function(e){p.$Z()},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();function Ah(i){return"imperative"!==i}class Tp{}class Qm{preload(t,e){return it(null)}}let Jm=(()=>{class i{constructor(e,o,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new ka(l,o,b=>e.triggerEvent(new Cl(b)),b=>e.triggerEvent(new Ii(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ts(e=>e instanceof Ea),Yi(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(p.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const l=[];for(const d of o)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const g=d._loadedConfig;l.push(this.processRoutes(g.module,g.routes))}else d.loadChildren&&!d.canLoad?l.push(this.preloadConfig(e,d)):d.children&&l.push(this.processRoutes(e,d.children));return(0,zn.D)(l).pipe((0,ri.J)(),(0,Rt.U)(d=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?it(o._loadedConfig):this.loader.load(e.injector,o)).pipe((0,sn.z)(d=>(o._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(zr),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Tp))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})(),Rh=(()=>{class i{constructor(e,o,l={}){this.router=e,this.viewportScroller=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ea&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof wl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new wl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){p.$Z()},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();const bi=new p.OlP("ROUTER_CONFIGURATION"),Ap=new p.OlP("ROUTER_FORROOT_GUARD"),Xm=[pe,{provide:En,useClass:an},{provide:zr,useFactory:function kp(i,t,e,o,l,d,g={},E,b){const R=new zr(null,i,t,e,o,l,ai(d));return E&&(R.urlHandlingStrategy=E),b&&(R.routeReuseStrategy=b),function n_(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(g,R),g.enableTracing&&R.events.subscribe(U=>{var O,Q;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${U.constructor.name}`),console.log(U.toString()),console.log(U),null===(Q=console.groupEnd)||void 0===Q||Q.call(console)}),R},deps:[En,xl,pe,p.zs3,p.Sil,Ra,bi,[class cd{},new p.FiY],[class ln{},new p.FiY]]},xl,{provide:fo,useFactory:function kh(i){return i.routerState.root},deps:[zr]},Jm,Qm,class Sp{preload(t,e){return e().pipe(ii(()=>it(null)))}},{provide:bi,useValue:{enableTracing:!1}}];function Qv(){return new p.PXZ("Router",zr)}let fd=(()=>{class i{constructor(e,o){}static forRoot(e,o){return{ngModule:i,providers:[Xm,Rp(e),{provide:Ap,useFactory:t_,deps:[[zr,new p.FiY,new p.tp0]]},{provide:bi,useValue:o||{}},{provide:ce,useFactory:e_,deps:[ue,[new p.tBr($e),new p.FiY],bi]},{provide:Rh,useFactory:Jv,deps:[zr,aa,bi]},{provide:Tp,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:Qm},{provide:p.PXZ,multi:!0,useFactory:Qv},[Zu,{provide:p.ip1,multi:!0,useFactory:r_,deps:[Zu]},{provide:Pp,useFactory:Mp,deps:[Zu]},{provide:p.tb,multi:!0,useExisting:Pp}]]}}static forChild(e){return{ngModule:i,providers:[Rp(e)]}}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(Ap,8),p.LFG(zr,8))},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({}),i})();function Jv(i,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Rh(i,t,e)}function e_(i,t,e={}){return e.useHash?new Ee(i,t):new Ue(i,t)}function t_(i){return"guarded"}function Rp(i){return[{provide:p.deG,multi:!0,useValue:i},{provide:Ra,multi:!0,useValue:i}]}let Zu=(()=>{class i{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fn.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const l=new Promise(E=>o=E),d=this.injector.get(zr),g=this.injector.get(bi);return"disabled"===g.initialNavigation?(d.setUpLocationChangeListener(),o(!0)):"enabled"===g.initialNavigation||"enabledBlocking"===g.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),d.initialNavigation()):o(!0),l})}bootstrapListener(e){const o=this.injector.get(bi),l=this.injector.get(Jm),d=this.injector.get(Rh),g=this.injector.get(zr),E=this.injector.get(p.z2F);e===E.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&g.initialNavigation(),l.setUpPreloading(),d.init(),g.resetRootComponentType(E.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(p.zs3))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac}),i})();function r_(i){return i.appInitializer.bind(i)}function Mp(i){return i.bootstrapListener.bind(i)}const Pp=new p.OlP("Router Initializer"),Xv=[];let i_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({imports:[[fd.forRoot(Xv)],fd]}),i})();class eE{removeChessObj(t){const e=document.getElementById(t);e.removeChild(e.firstChild)}removeDiv(){const t=document.getElementsByClassName("suggest");for(;t.length>0;)t[0].parentNode.removeChild(t[0])}divInside(t){var e=document.createElement("div");e.className="suggest",e.style.cssText="height: 25px; width: 25px; background-color: #BACA2B; border-radius: 50%; margin-top:35%; position:absolute;",document.getElementById(t).appendChild(e)}getByKey(t,e){for(let[o,l]of t.entries())if(o===e)return l;return"a7a"}getByValue(t,e){for(let[o,l]of t.entries())if(l===e)return o;return"a7a"}}class tE{constructor(t,e,o,l,d,g){this.cssTextImg="width: 90%;height: 90%;margin-top: 4%;",this.chessBoard=t,this.gameStatus=e,this.gamestatusWithImgSrc=o,this.gameStatusArr=l,this.gameStatusArrWhite=d,this.gameStatusArrBlack=g}inializeAllBox(){this.chessBoard.set("18","black"),this.chessBoard.set("28","white"),this.chessBoard.set("38","black"),this.chessBoard.set("48","white"),this.chessBoard.set("58","black"),this.chessBoard.set("68","white"),this.chessBoard.set("78","black"),this.chessBoard.set("88","white"),this.chessBoard.set("17","white"),this.chessBoard.set("27","black"),this.chessBoard.set("37","white"),this.chessBoard.set("47","black"),this.chessBoard.set("57","white"),this.chessBoard.set("67","black"),this.chessBoard.set("77","white"),this.chessBoard.set("87","black"),this.chessBoard.set("16","black"),this.chessBoard.set("26","white"),this.chessBoard.set("36","black"),this.chessBoard.set("46","white"),this.chessBoard.set("56","black"),this.chessBoard.set("66","white"),this.chessBoard.set("76","black"),this.chessBoard.set("86","white"),this.chessBoard.set("15","white"),this.chessBoard.set("25","black"),this.chessBoard.set("35","white"),this.chessBoard.set("45","black"),this.chessBoard.set("55","white"),this.chessBoard.set("65","black"),this.chessBoard.set("75","white"),this.chessBoard.set("85","black"),this.chessBoard.set("14","black"),this.chessBoard.set("24","white"),this.chessBoard.set("34","black"),this.chessBoard.set("44","white"),this.chessBoard.set("54","black"),this.chessBoard.set("64","white"),this.chessBoard.set("74","black"),this.chessBoard.set("84","white"),this.chessBoard.set("13","white"),this.chessBoard.set("23","black"),this.chessBoard.set("33","white"),this.chessBoard.set("43","black"),this.chessBoard.set("53","white"),this.chessBoard.set("63","black"),this.chessBoard.set("73","white"),this.chessBoard.set("83","black"),this.chessBoard.set("12","black"),this.chessBoard.set("22","white"),this.chessBoard.set("32","black"),this.chessBoard.set("42","white"),this.chessBoard.set("52","black"),this.chessBoard.set("62","white"),this.chessBoard.set("72","black"),this.chessBoard.set("82","white"),this.chessBoard.set("11","white"),this.chessBoard.set("21","black"),this.chessBoard.set("31","white"),this.chessBoard.set("41","black"),this.chessBoard.set("51","white"),this.chessBoard.set("61","black"),this.chessBoard.set("71","white"),this.chessBoard.set("81","black"),this.gameStatusArr.push("11","21","31","41","51","61","71","81","12","22","32","42","52","62","72","82","17","27","37","47","57","67","77","87","18","28","38","48","58","68","78","88"),this.gameStatus.set("whit-rook1","11"),this.gameStatus.set("white-knight1","21"),this.gameStatus.set("white-bishop1","31"),this.gameStatus.set("white-queen","41"),this.gameStatus.set("white-king","51"),this.gameStatus.set("white-bishop2","61"),this.gameStatus.set("white-knight2","71"),this.gameStatus.set("white-rook2","81"),this.gameStatus.set("white-pawn1","12"),this.gameStatus.set("white-pawn2","22"),this.gameStatus.set("white-pawn3","32"),this.gameStatus.set("white-pawn4","42"),this.gameStatus.set("white-pawn5","52"),this.gameStatus.set("white-pawn6","62"),this.gameStatus.set("white-pawn7","72"),this.gameStatus.set("white-pawn8","82"),this.gameStatus.set("black-pawn1","17"),this.gameStatus.set("black-pawn2","27"),this.gameStatus.set("black-pawn3","37"),this.gameStatus.set("black-pawn4","47"),this.gameStatus.set("black-pawn5","57"),this.gameStatus.set("black-pawn6","67"),this.gameStatus.set("black-pawn7","77"),this.gameStatus.set("black-pawn8","87"),this.gameStatus.set("black-rook1","18"),this.gameStatus.set("black-knight1","28"),this.gameStatus.set("black-bishop1","38"),this.gameStatus.set("black-queen","48"),this.gameStatus.set("black-king","58"),this.gameStatus.set("black-bishop2","68"),this.gameStatus.set("black-knight2","78"),this.gameStatus.set("black-rook2","88"),this.gameStatusArrWhite.push("11"),this.gameStatusArrWhite.push("21"),this.gameStatusArrWhite.push("31"),this.gameStatusArrWhite.push("41"),this.gameStatusArrWhite.push("51"),this.gameStatusArrWhite.push("61"),this.gameStatusArrWhite.push("71"),this.gameStatusArrWhite.push("81"),this.gameStatusArrWhite.push("12"),this.gameStatusArrWhite.push("22"),this.gameStatusArrWhite.push("32"),this.gameStatusArrWhite.push("42"),this.gameStatusArrWhite.push("52"),this.gameStatusArrWhite.push("62"),this.gameStatusArrWhite.push("72"),this.gameStatusArrWhite.push("82"),this.gameStatusArrBlack.push("17"),this.gameStatusArrBlack.push("27"),this.gameStatusArrBlack.push("37"),this.gameStatusArrBlack.push("47"),this.gameStatusArrBlack.push("57"),this.gameStatusArrBlack.push("67"),this.gameStatusArrBlack.push("77"),this.gameStatusArrBlack.push("87"),this.gameStatusArrBlack.push("18"),this.gameStatusArrBlack.push("28"),this.gameStatusArrBlack.push("38"),this.gameStatusArrBlack.push("48"),this.gameStatusArrBlack.push("58"),this.gameStatusArrBlack.push("68"),this.gameStatusArrBlack.push("78"),this.gameStatusArrBlack.push("88"),this.gamestatusWithImgSrc.set("11","./assets/chess-rook2.png"),this.gamestatusWithImgSrc.set("21","./assets/chess-knight2.png"),this.gamestatusWithImgSrc.set("31","./assets/chess-bishop2.png"),this.gamestatusWithImgSrc.set("41","./assets/chess-queen2.png"),this.gamestatusWithImgSrc.set("51","./assets/chess-king2.png"),this.gamestatusWithImgSrc.set("61","./assets/chess-bishop2.png"),this.gamestatusWithImgSrc.set("71","./assets/chess-knight2.png"),this.gamestatusWithImgSrc.set("81","./assets/chess-rook2.png"),this.gamestatusWithImgSrc.set("12","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("22","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("32","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("42","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("52","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("62","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("72","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("82","./assets/chess-pawn2.png"),this.gamestatusWithImgSrc.set("17","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("27","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("37","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("47","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("57","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("67","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("77","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("87","./assets/chess-pawn.png"),this.gamestatusWithImgSrc.set("18","./assets/chess-rook.png"),this.gamestatusWithImgSrc.set("28","./assets/chess-knight.png"),this.gamestatusWithImgSrc.set("38","./assets/chess-bishop.png"),this.gamestatusWithImgSrc.set("48","./assets/chess-queen.png"),this.gamestatusWithImgSrc.set("58","./assets/chess-king.png"),this.gamestatusWithImgSrc.set("68","./assets/chess-bishop.png"),this.gamestatusWithImgSrc.set("78","./assets/chess-knight.png"),this.gamestatusWithImgSrc.set("88","./assets/chess-rook.png");for(let[t,e]of this.gamestatusWithImgSrc.entries())this.boxInitialization(e,t)}boxInitialization(t,e){var o=document.createElement("img");o.src=t,o.style.cssText=this.cssTextImg,document.getElementById(e).appendChild(o)}}class s_{constructor(t,e,o,l,d){this._suggestedMoves=[],this._name=t,this._location=e,this._gameStatus=o,this._gameStatusWhite=l,this._gameStatusBlack=d}getSuggestedMoves(){return this._suggestedMoves}suggestedMoves(){this._name=this._name.slice(0,this._name.length-1),"black-pawn"==this._name&&this.blackPawnMoves(),"white-pawn"==this._name&&this.WhitePawnMoves(),"white-knight"==this._name&&(console.log("fergany"),this.whiteKnightMoves()),"black-knight"==this._name&&this.blackKnightMoves()}WhitePawnMoves(){this._gameStatus.includes((this._location+1).toString())||this.checkConstrains(this._location+1)&&this._suggestedMoves.push((this._location+1).toString()),!this._gameStatus.includes((this._location+2).toString())&&!this._gameStatus.includes((this._location+1).toString())&&parseInt(this._location.toString()[1])<3&&this.checkConstrains(this._location+2)&&this._suggestedMoves.push((this._location+2).toString()),this._gameStatusBlack.includes((this._location-9).toString())&&this.checkConstrains(this._location-9)&&this._suggestedMoves.push((this._location-9).toString()),this._gameStatusBlack.includes((this._location+11).toString())&&this.checkConstrains(this._location+11)&&this._suggestedMoves.push((this._location+11).toString())}blackPawnMoves(){this._gameStatus.includes((this._location-1).toString())||this.checkConstrains(this._location-1)&&this._suggestedMoves.push((this._location-1).toString()),!this._gameStatus.includes((this._location-2).toString())&&!this._gameStatus.includes((this._location-1).toString())&&parseInt(this._location.toString()[1])>6&&this.checkConstrains(this._location-2)&&this._suggestedMoves.push((this._location-2).toString()),this._gameStatusWhite.includes((this._location+9).toString())&&this.checkConstrains(this._location+9)&&this._suggestedMoves.push((this._location+9).toString()),this._gameStatusWhite.includes((this._location-11).toString())&&this.checkConstrains(this._location-11)&&this._suggestedMoves.push((this._location-11).toString())}whiteKnightMoves(){this._gameStatusWhite.includes((this._location+21).toString())||this.checkConstrains(this._location+21)&&this._suggestedMoves.push((this._location+21).toString()),this._gameStatusWhite.includes((this._location+19).toString())||this.checkConstrains(this._location+19)&&this._suggestedMoves.push((this._location+19).toString()),this._gameStatusWhite.includes((this._location-21).toString())||this.checkConstrains(this._location-21)&&this._suggestedMoves.push((this._location-21).toString()),this._gameStatusWhite.includes((this._location-19).toString())||this.checkConstrains(this._location-19)&&this._suggestedMoves.push((this._location-19).toString()),this._gameStatusWhite.includes((this._location+12).toString())||this.checkConstrains(this._location+12)&&this._suggestedMoves.push((this._location+12).toString()),this._gameStatusWhite.includes((this._location-8).toString())||this.checkConstrains(this._location-8)&&this._suggestedMoves.push((this._location-8).toString()),this._gameStatusWhite.includes((this._location-12).toString())||this.checkConstrains(this._location-12)&&this._suggestedMoves.push((this._location-12).toString()),this._gameStatusWhite.includes((this._location+8).toString())||this.checkConstrains(this._location+8)&&this._suggestedMoves.push((this._location+8).toString())}blackKnightMoves(){this._gameStatusBlack.includes((this._location+21).toString())||this.checkConstrains(this._location+21)&&this._suggestedMoves.push((this._location+21).toString()),this._gameStatusBlack.includes((this._location+19).toString())||this.checkConstrains(this._location+19)&&this._suggestedMoves.push((this._location+19).toString()),this._gameStatusBlack.includes((this._location-21).toString())||this.checkConstrains(this._location-21)&&this._suggestedMoves.push((this._location-21).toString()),this._gameStatusBlack.includes((this._location-19).toString())||this.checkConstrains(this._location-19)&&this._suggestedMoves.push((this._location-19).toString()),this._gameStatusBlack.includes((this._location+12).toString())||this.checkConstrains(this._location+12)&&this._suggestedMoves.push((this._location+12).toString()),this._gameStatusBlack.includes((this._location-8).toString())||this.checkConstrains(this._location-8)&&this._suggestedMoves.push((this._location-8).toString()),this._gameStatusBlack.includes((this._location-12).toString())||this.checkConstrains(this._location-12)&&this._suggestedMoves.push((this._location-12).toString()),this._gameStatusBlack.includes((this._location+8).toString())||this.checkConstrains(this._location+8)&&this._suggestedMoves.push((this._location+8).toString())}checkConstrains(t){return parseInt(t.toString()[1])<=8&&parseInt(t.toString()[1])>=1&&parseInt(t.toString()[0])<=8&&parseInt(t.toString()[0])>=1}}var Np=M(4986),Ph=M(6451),nE=M(3099);function rE(i,t){return i===t}var a_=M(5032),Tn=M(5813),Os=M(2011),aE=(M(4087),M(3942)),Vl=M(4859),jl=M(5861),Hl=M(9681),N=M(2090),xh=M(1877);const l_="@firebase/database";let ct="";function c_(i){ct=i}class d_{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,N.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,N.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class h_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,N.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const pd=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new d_(t)}}catch(t){}return new h_},gr=pd("localStorage"),Nh=pd("sessionStorage"),qu=new xh.Yd("@firebase/database"),Oh=function(){let i=1;return function(){return i++}}(),yo=function(i){const t=(0,N.dS)(i),e=new N.gQ;e.update(t);const o=e.digest();return N.US.encodeByteArray(o)},$l=function(...i){let t="";for(let e=0;e<i.length;e++){const o=i[e];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?t+=$l.apply(null,o):t+="object"==typeof o?(0,N.Pz)(o):o,t+=" "}return t};let Ma=null,Fh=!0;const lE=function(i,t){(0,N.hu)(!t||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(qu.logLevel=xh.in.VERBOSE,Ma=qu.log.bind(qu),t&&Nh.set("logging_enabled",!0)):"function"==typeof i?Ma=i:(Ma=null,Nh.remove("logging_enabled"))},Qn=function(...i){if(!0===Fh&&(Fh=!1,null===Ma&&!0===Nh.get("logging_enabled")&&lE(!0)),Ma){const t=$l.apply(null,i);Ma(t)}},Lh=function(i){return function(...t){Qn(i,...t)}},Ku=function(...i){const t="FIREBASE INTERNAL ERROR: "+$l(...i);qu.error(t)},Di=function(...i){const t=`FIREBASE FATAL ERROR: ${$l(...i)}`;throw qu.error(t),new Error(t)},mr=function(...i){const t="FIREBASE WARNING: "+$l(...i);qu.warn(t)},Yu=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Go="[MIN_NAME]",vo="[MAX_NAME]",Wl=function(i,t){if(i===t)return 0;if(i===Go||t===vo)return-1;if(t===Go||i===vo)return 1;{const e=Up(i),o=Up(t);return null!==e?null!==o?e-o==0?i.length-t.length:e-o:-1:null!==o?1:i<t?-1:1}},uE=function(i,t){return i===t?0:i<t?-1:1},Qu=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+(0,N.Pz)(t))},f_=function(i){if("object"!=typeof i||null===i)return(0,N.Pz)(i);const t=[];for(const o in i)t.push(o);t.sort();let e="{";for(let o=0;o<t.length;o++)0!==o&&(e+=","),e+=(0,N.Pz)(t[o]),e+=":",e+=f_(i[t[o]]);return e+="}",e},p_=function(i,t){const e=i.length;if(e<=t)return[i];const o=[];for(let l=0;l<e;l+=t)o.push(i.substring(l,l+t>e?e:l+t));return o};function _r(i,t){for(const e in i)i.hasOwnProperty(e)&&t(e,i[e])}const Fp=function(i){(0,N.hu)(!Yu(i),"Invalid JSON number");const o=1023;let l,d,g,E,b;0===i?(d=0,g=0,l=1/i==-1/0?1:0):(l=i<0,(i=Math.abs(i))>=Math.pow(2,1-o)?(E=Math.min(Math.floor(Math.log(i)/Math.LN2),o),d=E+o,g=Math.round(i*Math.pow(2,52-E)-Math.pow(2,52))):(d=0,g=Math.round(i/Math.pow(2,-1074))));const R=[];for(b=52;b;b-=1)R.push(g%2?1:0),g=Math.floor(g/2);for(b=11;b;b-=1)R.push(d%2?1:0),d=Math.floor(d/2);R.push(l?1:0),R.reverse();const U=R.join("");let O="";for(b=0;b<64;b+=8){let Q=parseInt(U.substr(b,8),2).toString(16);1===Q.length&&(Q="0"+Q),O+=Q}return O.toLowerCase()},JC=new RegExp("^-?(0*)\\d{1,10}$"),dE=-2147483648,m_=2147483647,Up=function(i){if(JC.test(i)){const t=Number(i);if(t>=dE&&t<=m_)return t}return null},gd=function(i){try{i()}catch(t){setTimeout(()=>{throw mr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Uh=function(i,t){const e=setTimeout(i,t);return"object"==typeof e&&e.unref&&e.unref(),e};class eI{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(o=>this.appCheck=o)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,o):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){mr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tI{constructor(t,e,o){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Qn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,o):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mr(t)}}let Bh=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const Vp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jp="websocket",y_="long_polling";class md{constructor(t,e,o,l,d=!1,g="",E=!1){this.secure=e,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=d,this.persistenceKey=g,this.includeNamespaceInQueryParams=E,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gr.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Hp(i,t,e){let o;if((0,N.hu)("string"==typeof t,"typeof type must == string"),(0,N.hu)("object"==typeof e,"typeof params must == object"),t===jp)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(t!==y_)throw new Error("Unknown connection type: "+t);o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function fE(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(e.ns=i.namespace);const l=[];return _r(e,(d,g)=>{l.push(d+"="+g)}),o+l.join("&")}class pE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,N.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,N.p$)(this.counters_)}}const $p={},Gl={};function Pa(i){const t=i.toString();return $p[t]||($p[t]=new pE),$p[t]}class Ju{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&gd(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class tc{constructor(t,e,o,l,d,g,E){this.connId=t,this.repoInfo=e,this.applicationId=o,this.appCheckToken=l,this.authToken=d,this.transportSessionId=g,this.lastSessionId=E,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lh(t),this.stats_=Pa(e),this.urlFn=b=>(this.appCheckToken&&(b.ac=this.appCheckToken),Hp(e,y_,b))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ju(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,N.Yr)()||"complete"===document.readyState)i();else{let t=!1;const e=function(){document.body?t||(t=!0,i()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zr((...d)=>{const[g,E,b,R,U]=d;if(this.incrementIncomingBytes_(d),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===g)this.id=E,this.password=b;else{if("close"!==g)throw new Error("Unrecognized command received: "+g);E?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(E,()=>{this.onClosed_()})):this.onClosed_()}},(...d)=>{const[g,E]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(g,E)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Vp.test(location.hostname)&&(o.r="f");const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){tc.forceAllow_=!0}static forceDisallow(){tc.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!tc.forceAllow_&&(tc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,N.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const o=(0,N.h$)(e),l=p_(o,1840);for(let d=0;d<l.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[d]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=t,o.pw=e,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,N.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Zr{constructor(t,e,o,l){if(this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Oh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Zr.createIFrame_();let d="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(d='<script>document.domain="'+document.domain+'";<\/script>');const g="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(E){Qn("frame writing exception"),E.stack&&Qn(E.stack),Qn(E)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Qn("No IE domain setting required")}catch(e){const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const g=this.pendingSegs.shift();o=o+"&seg"+l+"="+g.seg+"&ts"+l+"="+g.ts+"&d"+l+"="+g.d,l++}return e+=o,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,o){this.pendingSegs.push({seg:t,ts:e,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const o=()=>{this.outstandingRequests.delete(e),this.newRequest_()},l=setTimeout(o,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(l),o()})}addTag(t,e){(0,N.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||"loaded"===l||"complete"===l)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),e())},o.onerror=()=>{Qn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch(o){}},Math.floor(1))}}let zh=null;"undefined"!=typeof MozWebSocket?zh=MozWebSocket:"undefined"!=typeof WebSocket&&(zh=WebSocket);let Zh=(()=>{class i{constructor(e,o,l,d,g,E,b){this.connId=e,this.applicationId=l,this.appCheckToken=d,this.authToken=g,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lh(this.connId),this.stats_=Pa(o),this.connURL=i.connectionURL_(o,E,b,d),this.nodeAdmin=o.nodeAdmin}static connectionURL_(e,o,l,d){const g={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&Vp.test(location.hostname)&&(g.r="f"),o&&(g.s=o),l&&(g.ls=l),d&&(g.ac=d),Hp(e,jp,g)}open(e,o){this.onDisconnect=o,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gr.set("previous_websocket_failure",!0);try{if((0,N.Yr)()){const d={headers:{"User-Agent":`Firebase/5/${ct}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(d.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(d.headers["X-Firebase-AppCheck"]=this.appCheckToken);const g=process.env,E=0===this.connURL.indexOf("wss://")?g.HTTPS_PROXY||g.https_proxy:g.HTTP_PROXY||g.http_proxy;E&&(d.proxy={origin:E}),this.mySock=new zh(this.connURL,[],d)}else this.mySock=new zh(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(l){this.log_("Error instantiating WebSocket.");const d=l.message||l.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const d=l.message||l.data;d&&this.log_(d),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const l=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);l&&l.length>1&&parseFloat(l[1])<4.4&&(e=!0)}return!e&&null!==zh&&!i.forceDisallow_}static previouslyFailed(){return gr.isInMemoryStorage||!0===gr.get("previous_websocket_failure")}markConnectionHealthy(){gr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const l=(0,N.cI)(o);this.onMessage(l)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const o=Number(e);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const o=e.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const l=this.extractFrameCount_(o);null!==l&&this.appendFrame_(l)}}send(e){this.resetKeepAlive();const o=(0,N.Pz)(e);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const l=p_(o,16384);l.length>1&&this.sendString_(String(l.length));for(let d=0;d<l.length;d++)this.sendString_(l[d])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class qh{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[tc,Zh]}initTransports_(t){const e=Zh&&Zh.isAvailable();let o=e&&!Zh.previouslyFailed();if(t.webSocketOnly&&(e||mr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Zh];else{const l=this.transports_=[];for(const d of qh.ALL_TRANSPORTS)d&&d.isAvailable()&&l.push(d)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class A_{constructor(t,e,o,l,d,g,E,b,R,U){this.id=t,this.repoInfo_=e,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=d,this.onMessage_=g,this.onReady_=E,this.onDisconnect_=b,this.onKill_=R,this.lastSessionId=U,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lh("c:"+this.id+":"),this.transportManager_=new qh(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,o)},Math.floor(0));const l=t.healthyTimeout||0;l>0&&(this.healthyTimeout_=Uh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Qu("t",t),o=Qu("d",t);if("c"===e)this.onSecondaryControl_(o);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Qu("t",t),o=Qu("d",t);"c"===e?this.onControl_(o):"d"===e&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Qu("t",t);if("d"in t){const o=t.d;if("h"===e)this.onHandshake_(o);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(o):"r"===e?this.onReset_(o):"e"===e?Ku("Server Error: "+o):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ku("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,o=t.v,l=t.h;this.sessionId=t.s,this.repoInfo_.host=l,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==o&&mr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,o),Uh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ls{put(t,e,o,l){}merge(t,e,o,l){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,o){}onDisconnectMerge(t,e,o){}onDisconnectCancel(t,e){}reportStats(t){}}class Kh{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,N.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,e)}}on(t,e,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:o});const l=this.getInitialEvent(t);l&&e.apply(o,l)}off(t,e,o){this.validateEventType_(t);const l=this.listeners_[t]||[];for(let d=0;d<l.length;d++)if(l[d].callback===e&&(!o||o===l[d].context))return void l.splice(d,1)}validateEventType_(t){(0,N.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Yh extends Kh{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yh}getInitialEvent(t){return(0,N.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ht{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Bt(){return new Ht("")}function Tt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function xa(i){return i.pieces_.length-i.pieceNum_}function qt(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Ht(i.pieces_,t)}function Xp(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Na(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function Qh(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Ht(t,0)}function pn(i,t){const e=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)e.push(i.pieces_[o]);if(t instanceof Ht)for(let o=t.pieceNum_;o<t.pieces_.length;o++)e.push(t.pieces_[o]);else{const o=t.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&e.push(o[l])}return new Ht(e,0)}function Et(i){return i.pieceNum_>=i.pieces_.length}function yr(i,t){const e=Tt(i),o=Tt(t);if(null===e)return t;if(e===o)return yr(qt(i),qt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function k_(i,t){const e=Na(i,0),o=Na(t,0);for(let l=0;l<e.length&&l<o.length;l++){const d=Wl(e[l],o[l]);if(0!==d)return d}return e.length===o.length?0:e.length<o.length?-1:1}function eg(i,t){if(xa(i)!==xa(t))return!1;for(let e=i.pieceNum_,o=t.pieceNum_;e<=i.pieces_.length;e++,o++)if(i.pieces_[e]!==t.pieces_[o])return!1;return!0}function ns(i,t){let e=i.pieceNum_,o=t.pieceNum_;if(xa(i)>xa(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[o])return!1;++e,++o}return!0}class tg{constructor(t,e){this.errorPrefix_=e,this.parts_=Na(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,N.ug)(this.parts_[o]);ng(this)}}function ng(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Oa(i))}function Oa(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Jh extends Kh{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new Jh}getInitialEvent(t){return(0,N.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const nc=1e3;let ef,Fa=(()=>{class i extends Ls{constructor(e,o,l,d,g,E,b,R){if(super(),this.repoInfo_=e,this.applicationId_=o,this.onDataUpdate_=l,this.onConnectStatus_=d,this.onServerInfoUpdate_=g,this.authTokenProvider_=E,this.appCheckTokenProvider_=b,this.authOverride_=R,this.id=i.nextPersistentConnectionId_++,this.log_=Lh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,R&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jh.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Yh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,o,l){const d=++this.requestNumber_,g={r:d,a:e,b:o};this.log_((0,N.Pz)(g)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(g),l&&(this.requestCBHash_[d]=l)}get(e){this.initConnection_();const o=new N.BH,l={p:e._path.toString(),q:e._queryObject},d={action:"g",request:l,onComplete:E=>{const b=E.d;"ok"===E.s?(this.onDataUpdate_(l.p,b,!1,null),o.resolve(b)):o.reject(b)}};this.outstandingGets_.push(d),this.outstandingGetCount_++;const g=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const E=this.outstandingGets_[g];void 0===E||d!==E||(delete this.outstandingGets_[g],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+g+" timed out on connection"),o.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(g),o.promise}listen(e,o,l,d){this.initConnection_();const g=e._queryIdentifier,E=e._path.toString();this.log_("Listen called for "+E+" "+g),this.listens.has(E)||this.listens.set(E,new Map),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(E).has(g),"listen() called twice for same path/queryId.");const b={onComplete:d,hashFn:o,query:e,tag:l};this.listens.get(E).set(g,b),this.connected_&&this.sendListen_(b)}sendGet_(e){const o=this.outstandingGets_[e];this.sendRequest("g",o.request,l=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(l)})}sendListen_(e){const o=e.query,l=o._path.toString(),d=o._queryIdentifier;this.log_("Listen on "+l+" for "+d);const g={p:l};e.tag&&(g.q=o._queryObject,g.t=e.tag),g.h=e.hashFn(),this.sendRequest("q",g,b=>{const R=b.d,U=b.s;i.warnOnListenWarnings_(R,o),(this.listens.get(l)&&this.listens.get(l).get(d))===e&&(this.log_("listen response",b),"ok"!==U&&this.removeListen_(l,d),e.onComplete&&e.onComplete(U,R))})}static warnOnListenWarnings_(e,o){if(e&&"object"==typeof e&&(0,N.r3)(e,"w")){const l=(0,N.DV)(e,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const d='".indexOn": "'+o._queryParams.getIndex().toString()+'"',g=o._path.toString();mr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${d} at ${g} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,N.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,o=(0,N.w9)(e)?"auth":"gauth",l={cred:e};null===this.authOverride_?l.noauth=!0:"object"==typeof this.authOverride_&&(l.authvar=this.authOverride_),this.sendRequest(o,l,d=>{const g=d.s,E=d.d||"error";this.authToken_===e&&("ok"===g?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(g,E))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const o=e.s,l=e.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,l)})}unlisten(e,o){const l=e._path.toString(),d=e._queryIdentifier;this.log_("Unlisten called for "+l+" "+d),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,d)&&this.connected_&&this.sendUnlisten_(l,d,e._queryObject,o)}sendUnlisten_(e,o,l,d){this.log_("Unlisten on "+e+" for "+o);const g={p:e};d&&(g.q=l,g.t=d),this.sendRequest("n",g)}onDisconnectPut(e,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,o,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:o,onComplete:l})}onDisconnectMerge(e,o,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,o,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:o,onComplete:l})}onDisconnectCancel(e,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(e,o,l,d){const g={p:o,d:l};this.log_("onDisconnect "+e,g),this.sendRequest(e,g,E=>{d&&setTimeout(()=>{d(E.s,E.d)},Math.floor(0))})}put(e,o,l,d){this.putInternal("p",e,o,l,d)}merge(e,o,l,d){this.putInternal("m",e,o,l,d)}putInternal(e,o,l,d,g){this.initConnection_();const E={p:o,d:l};void 0!==g&&(E.h=g),this.outstandingPuts_.push({action:e,request:E,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(e){const o=this.outstandingPuts_[e].action,l=this.outstandingPuts_[e].request,d=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(o,l,g=>{this.log_(o+" response",g),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),d&&d(g.s,g.d)})}reportStats(e){if(this.connected_){const o={c:e};this.log_("reportStats",o),this.sendRequest("s",o,l=>{"ok"!==l.s&&this.log_("reportStats","Error sending stats: "+l.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,N.Pz)(e));const o=e.r,l=this.requestCBHash_[o];l&&(delete this.requestCBHash_[o],l(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,o){this.log_("handleServerMessage",e,o),"d"===e?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===e?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===e?this.onListenRevoked_(o.p,o.q):"ac"===e?this.onAuthRevoked_(o.s,o.d):"apc"===e?this.onAppCheckRevoked_(o.s,o.d):"sd"===e?this.onSecurityDebugPacket_(o):Ku("Unrecognized action received from server: "+(0,N.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-e);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,jl.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const o=e.onDataMessage_.bind(e),l=e.onReady_.bind(e),d=e.onRealtimeDisconnect_.bind(e),g=e.id+":"+i.nextConnectionId_++,E=e.lastSessionId;let b=!1,R=null;const U=function(){R?R.close():(b=!0,d())};e.realtime_={close:U,sendRequest:function(ge){(0,N.hu)(R,"sendRequest call when we're not connected not allowed."),R.sendRequest(ge)}};const Q=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[ge,Me]=yield Promise.all([e.authTokenProvider_.getToken(Q),e.appCheckTokenProvider_.getToken(Q)]);b?Qn("getToken() completed but was canceled"):(Qn("getToken() completed. Creating connection."),e.authToken_=ge&&ge.accessToken,e.appCheckToken_=Me&&Me.token,R=new A_(g,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,o,l,d,Ke=>{mr(Ke+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},E))}catch(ge){e.log_("Failed to get token: "+ge),b||(e.repoInfo_.nodeAdmin&&mr(ge),U())}}})()}interrupt(e){Qn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Qn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const o=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const o=this.outstandingPuts_[e];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,o){let l;l=o?o.map(g=>f_(g)).join("$"):"default";const d=this.removeListen_(e,l);d&&d.onComplete&&d.onComplete("permission_denied")}removeListen_(e,o){const l=new Ht(e).toString();let d;if(this.listens.has(l)){const g=this.listens.get(l);d=g.get(o),g.delete(o),0===g.size&&this.listens.delete(l)}else d=void 0;return d}onAuthRevoked_(e,o){Qn("Auth token revoked: "+e+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,o){Qn("App check token revoked: "+e+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const o of e.values())this.sendListen_(o);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let o="js";(0,N.Yr)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+o+"."+ct.replace(/\./g,"-")]=1,(0,N.uI)()?e["framework.cordova"]=1:(0,N.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Yh.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&e}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class It{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new It(t,e)}}class La{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const o=new It(Go,t),l=new It(Go,e);return 0!==this.compare(o,l)}minPost(){return It.MIN}}class tf extends La{static get __EMPTY_NODE(){return ef}static set __EMPTY_NODE(t){ef=t}compare(t,e){return Wl(t.name,e.name)}isDefinedOn(t){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return It.MIN}maxPost(){return new It(vo,ef)}makePost(t,e){return(0,N.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new It(t,ef)}toString(){return".key"}}const Us=new tf;class yd{constructor(t,e,o,l,d=null){this.isReverse_=l,this.resultGenerator_=d,this.nodeStack_=[];let g=1;for(;!t.isEmpty();)if(t=t,g=e?o(t.key,e):1,l&&(g*=-1),g<0)t=this.isReverse_?t.left:t.right;else{if(0===g){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let nf,rs=(()=>{class i{constructor(e,o,l,d,g){this.key=e,this.value=o,this.color=null!=l?l:i.RED,this.left=null!=d?d:Pr.EMPTY_NODE,this.right=null!=g?g:Pr.EMPTY_NODE}copy(e,o,l,d,g){return new i(null!=e?e:this.key,null!=o?o:this.value,null!=l?l:this.color,null!=d?d:this.left,null!=g?g:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,o,l){let d=this;const g=l(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,o,l),null):0===g?d.copy(null,o,null,null,null):d.copy(null,null,null,null,d.right.insert(e,o,l)),d.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,o){let l,d;if(l=this,o(e,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(e,o),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),0===o(e,l.key)){if(l.right.isEmpty())return Pr.EMPTY_NODE;d=l.right.min_(),l=l.copy(d.key,d.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(e,o))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,o)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Pr{constructor(t,e=Pr.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Pr(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,rs.BLACK,null,null))}remove(t){return new Pr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,rs.BLACK,null,null))}get(t){let e,o=this.root_;for(;!o.isEmpty();){if(e=this.comparator_(t,o.key),0===e)return o.value;e<0?o=o.left:e>0&&(o=o.right)}return null}getPredecessorKey(t){let e,o=this.root_,l=null;for(;!o.isEmpty();){if(e=this.comparator_(t,o.key),0===e){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}e<0?o=o.left:e>0&&(l=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new yd(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new yd(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new yd(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new yd(this.root_,null,this.comparator_,!0,t)}}function kE(i,t){return Wl(i.name,t.name)}function rg(i,t){return Wl(i,t)}Pr.EMPTY_NODE=new class RE{copy(t,e,o,l,d){return this}insert(t,e,o){return new rs(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ig=function(i){return"number"==typeof i?"number:"+Fp(i):"string:"+i},P_=function(i){if(i.isLeafNode()){const t=i.val();(0,N.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,N.r3)(t,".sv"),"Priority must be a string or number.")}else(0,N.hu)(i===nf||i.isEmpty(),"priority of unexpected type.");(0,N.hu)(i===nf||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let x_,N_,O_,Bs=(()=>{class i{constructor(e,o=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=o,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),P_(this.priorityNode_)}static set __childrenNodeConstructor(e){x_=e}static get __childrenNodeConstructor(){return x_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Et(e)?this:".priority"===Tt(e)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,o){return null}updateImmediateChild(e,o){return".priority"===e?this.updatePriority(o):o.isEmpty()&&".priority"!==e?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,o).updatePriority(this.priorityNode_)}updateChild(e,o){const l=Tt(e);return null===l?o:o.isEmpty()&&".priority"!==l?this:((0,N.hu)(".priority"!==l||1===xa(e),".priority must be the last token in a path"),this.updateImmediateChild(l,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(qt(e),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,o){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ig(this.priorityNode_.val())+":");const o=typeof this.value_;e+=o+":",e+="number"===o?Fp(this.value_):this.value_,this.lazyHash_=yo(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:((0,N.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const o=typeof e.value_,l=typeof this.value_,d=i.VALUE_TYPE_ORDER.indexOf(o),g=i.VALUE_TYPE_ORDER.indexOf(l);return(0,N.hu)(d>=0,"Unknown leaf type: "+o),(0,N.hu)(g>=0,"Unknown leaf type: "+l),d===g?"object"===l?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:g-d}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const o=e;return this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Kt=new class Vs extends La{compare(t,e){const o=t.node.getPriority(),l=e.node.getPriority(),d=o.compareTo(l);return 0===d?Wl(t.name,e.name):d}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return It.MIN}maxPost(){return new It(vo,new Bs("[PRIORITY-POST]",O_))}makePost(t,e){const o=N_(t);return new It(e,new Bs("[PRIORITY-POST]",o))}toString(){return".priority"}},F_=Math.log(2);class L_{constructor(t){this.count=parseInt(Math.log(t+1)/F_,10),this.current_=this.count-1;const l=(d=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&l}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const vd=function(i,t,e,o){i.sort(t);const l=function(b,R){const U=R-b;let O,Q;if(0===U)return null;if(1===U)return O=i[b],Q=e?e(O):O,new rs(Q,O.node,rs.BLACK,null,null);{const ge=parseInt(U/2,10)+b,Me=l(b,ge),Ke=l(ge+1,R);return O=i[ge],Q=e?e(O):O,new rs(Q,O.node,rs.BLACK,Me,Ke)}},E=function(b){let R=null,U=null,O=i.length;const Q=function(Me,Ke){const kt=O-Me,Jn=O;O-=Me;const en=l(kt+1,Jn),Nr=i[kt],mn=e?e(Nr):Nr;ge(new rs(mn,Nr.node,Ke,null,en))},ge=function(Me){R?(R.left=Me,R=Me):(U=Me,R=Me)};for(let Me=0;Me<b.count;++Me){const Ke=b.nextBitIsOne(),kt=Math.pow(2,b.count-(Me+1));Ke?Q(kt,rs.BLACK):(Q(kt,rs.BLACK),Q(kt,rs.RED))}return U}(new L_(i.length));return new Pr(o||t,E)};let rf;const ic={};class Zo{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,N.hu)(ic&&Kt,"ChildrenNode.ts has not been loaded"),rf=rf||new Zo({".priority":ic},{".priority":Kt}),rf}get(t){const e=(0,N.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pr?e:null}hasIndex(t){return(0,N.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,N.hu)(t!==Us,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const d=e.getIterator(It.Wrap);let E,g=d.getNext();for(;g;)l=l||t.isDefinedOn(g.node),o.push(g),g=d.getNext();E=l?vd(o,t.getCompare()):ic;const b=t.toString(),R=Object.assign({},this.indexSet_);R[b]=t;const U=Object.assign({},this.indexes_);return U[b]=E,new Zo(U,R)}addToIndexes(t,e){const o=(0,N.UI)(this.indexes_,(l,d)=>{const g=(0,N.DV)(this.indexSet_,d);if((0,N.hu)(g,"Missing index implementation for "+d),l===ic){if(g.isDefinedOn(t.node)){const E=[],b=e.getIterator(It.Wrap);let R=b.getNext();for(;R;)R.name!==t.name&&E.push(R),R=b.getNext();return E.push(t),vd(E,g.getCompare())}return ic}{const E=e.get(t.name);let b=l;return E&&(b=b.remove(new It(t.name,E))),b.insert(t,t.node)}});return new Zo(o,this.indexSet_)}removeFromIndexes(t,e){const o=(0,N.UI)(this.indexes_,l=>{if(l===ic)return l;{const d=e.get(t.name);return d?l.remove(new It(t.name,d)):l}});return new Zo(o,this.indexSet_)}}let Ed,mt=(()=>{class i{constructor(e,o,l){this.children_=e,this.priorityNode_=o,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&P_(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ed||(Ed=new i(new Pr(rg),null,Zo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ed}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const o=this.children_.get(e);return null===o?Ed:o}}getChild(e){const o=Tt(e);return null===o?this:this.getImmediateChild(o).getChild(qt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,o){if((0,N.hu)(o,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(o);{const l=new It(e,o);let d,g;o.isEmpty()?(d=this.children_.remove(e),g=this.indexMap_.removeFromIndexes(l,this.children_)):(d=this.children_.insert(e,o),g=this.indexMap_.addToIndexes(l,this.children_));const E=d.isEmpty()?Ed:this.priorityNode_;return new i(d,E,g)}}updateChild(e,o){const l=Tt(e);if(null===l)return o;{(0,N.hu)(".priority"!==Tt(e)||1===xa(e),".priority must be the last token in a path");const d=this.getImmediateChild(l).updateChild(qt(e),o);return this.updateImmediateChild(l,d)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const o={};let l=0,d=0,g=!0;if(this.forEachChild(Kt,(E,b)=>{o[E]=b.val(e),l++,g&&i.INTEGER_REGEXP_.test(E)?d=Math.max(d,Number(E)):g=!1}),!e&&g&&d<2*l){const E=[];for(const b in o)E[b]=o[b];return E}return e&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+ig(this.getPriority().val())+":"),this.forEachChild(Kt,(o,l)=>{const d=l.hash();""!==d&&(e+=":"+o+":"+d)}),this.lazyHash_=""===e?"":yo(e)}return this.lazyHash_}getPredecessorChildName(e,o,l){const d=this.resolveIndex_(l);if(d){const g=d.getPredecessorKey(new It(e,o));return g?g.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const o=this.resolveIndex_(e);if(o){const l=o.minKey();return l&&l.name}return this.children_.minKey()}getFirstChild(e){const o=this.getFirstChildName(e);return o?new It(o,this.children_.get(o)):null}getLastChildName(e){const o=this.resolveIndex_(e);if(o){const l=o.maxKey();return l&&l.name}return this.children_.maxKey()}getLastChild(e){const o=this.getLastChildName(e);return o?new It(o,this.children_.get(o)):null}forEachChild(e,o){const l=this.resolveIndex_(e);return l?l.inorderTraversal(d=>o(d.name,d.node)):this.children_.inorderTraversal(o)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,o){const l=this.resolveIndex_(o);if(l)return l.getIteratorFrom(e,d=>d);{const d=this.children_.getIteratorFrom(e.name,It.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,e)<0;)d.getNext(),g=d.peek();return d}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,o){const l=this.resolveIndex_(o);if(l)return l.getReverseIteratorFrom(e,d=>d);{const d=this.children_.getReverseIteratorFrom(e.name,It.Wrap);let g=d.peek();for(;null!=g&&o.compare(g,e)>0;)d.getNext(),g=d.peek();return d}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sf?-1:0}withIndex(e){if(e===Us||this.indexMap_.hasIndex(e))return this;{const o=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,o)}}isIndexed(e){return e===Us||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const o=e;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const l=this.getIterator(Kt),d=o.getIterator(Kt);let g=l.getNext(),E=d.getNext();for(;g&&E;){if(g.name!==E.name||!g.node.equals(E.node))return!1;g=l.getNext(),E=d.getNext()}return null===g&&null===E}return!1}return!1}}resolveIndex_(e){return e===Us?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const sf=new class U_ extends mt{constructor(){super(new Pr(rg),mt.EMPTY_NODE,Zo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return mt.EMPTY_NODE}isEmpty(){return!1}};function Cn(i,t=null){if(null===i)return mt.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(t=i[".priority"]),(0,N.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new Bs(i,Cn(t));if(i instanceof Array){let e=mt.EMPTY_NODE;return _r(i,(o,l)=>{if((0,N.r3)(i,o)&&"."!==o.substring(0,1)){const d=Cn(l);(d.isLeafNode()||!d.isEmpty())&&(e=e.updateImmediateChild(o,d))}}),e.updatePriority(Cn(t))}{const e=[];let o=!1;if(_r(i,(g,E)=>{if("."!==g.substring(0,1)){const b=Cn(E);b.isEmpty()||(o=o||!b.getPriority().isEmpty(),e.push(new It(g,b)))}}),0===e.length)return mt.EMPTY_NODE;const d=vd(e,kE,g=>g.name,rg);if(o){const g=vd(e,Kt.getCompare());return new mt(d,Cn(t),new Zo({".priority":g},{".priority":Kt}))}return new mt(d,Cn(t),Zo.Default)}}Object.defineProperties(It,{MIN:{value:new It(Go,mt.EMPTY_NODE)},MAX:{value:new It(vo,sf)}}),tf.__EMPTY_NODE=mt.EMPTY_NODE,Bs.__childrenNodeConstructor=mt,function rc(i){nf=i}(sf),function PE(i){O_=i}(sf),function ME(i){N_=i}(Cn);class sg extends La{constructor(t){super(),this.indexPath_=t,(0,N.hu)(!Et(t)&&".priority"!==Tt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const o=this.extractChild(t.node),l=this.extractChild(e.node),d=o.compareTo(l);return 0===d?Wl(t.name,e.name):d}makePost(t,e){const o=Cn(t),l=mt.EMPTY_NODE.updateChild(this.indexPath_,o);return new It(e,l)}maxPost(){const t=mt.EMPTY_NODE.updateChild(this.indexPath_,sf);return new It(vo,t)}toString(){return Na(this.indexPath_,0).join("/")}}const V_=new class oI extends La{compare(t,e){const o=t.node.compareTo(e.node);return 0===o?Wl(t.name,e.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return It.MIN}maxPost(){return It.MAX}makePost(t,e){const o=Cn(t);return new It(e,o)}toString(){return".value"}},Ua="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aI=function(){let i=0;const t=[];return function(e){const o=e===i;let l;i=e;const d=new Array(8);for(l=7;l>=0;l--)d[l]=Ua.charAt(e%64),e=Math.floor(e/64);(0,N.hu)(0===e,"Cannot push at time == 0");let g=d.join("");if(o){for(l=11;l>=0&&63===t[l];l--)t[l]=0;t[l]++}else for(l=0;l<12;l++)t[l]=Math.floor(64*Math.random());for(l=0;l<12;l++)g+=Ua.charAt(t[l]);return(0,N.hu)(20===g.length,"nextPushId: Length should be 20."),g}}(),is=function(i){if(i===""+m_)return"-";const t=Up(i);if(null!=t)return""+(t+1);const e=new Array(i.length);for(let g=0;g<e.length;g++)e[g]=i.charAt(g);if(e.length<786)return e.push("-"),e.join("");let o=e.length-1;for(;o>=0&&"z"===e[o];)o--;if(-1===o)return vo;const d=Ua.charAt(Ua.indexOf(e[o])+1);return e[o]=d,e.slice(0,o+1).join("")},xE=function(i){if(i===""+dE)return Go;const t=Up(i);if(null!=t)return""+(t-1);const e=new Array(i.length);for(let o=0;o<e.length;o++)e[o]=i.charAt(o);return"-"===e[e.length-1]?1===e.length?""+m_:(delete e[e.length-1],e.join("")):(e[e.length-1]=Ua.charAt(Ua.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function NE(i){return{type:"value",snapshotNode:i}}function zl(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function sc(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function oc(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}class j_{constructor(t){this.index_=t}updateChild(t,e,o,l,d,g){(0,N.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const E=t.getImmediateChild(e);return E.getChild(l).equals(o.getChild(l))&&E.isEmpty()===o.isEmpty()||(null!=g&&(o.isEmpty()?t.hasChild(e)?g.trackChildChange(sc(e,E)):(0,N.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):E.isEmpty()?g.trackChildChange(zl(e,o)):g.trackChildChange(oc(e,o,E))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(e,o).withIndex(this.index_)}updateFullNode(t,e,o){return null!=o&&(t.isLeafNode()||t.forEachChild(Kt,(l,d)=>{e.hasChild(l)||o.trackChildChange(sc(l,d))}),e.isLeafNode()||e.forEachChild(Kt,(l,d)=>{if(t.hasChild(l)){const g=t.getImmediateChild(l);g.equals(d)||o.trackChildChange(oc(l,d,g))}else o.trackChildChange(zl(l,d))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?mt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ac{constructor(t){this.indexedFilter_=new j_(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ac.getStartPost_(t),this.endPost_=ac.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,o,l,d,g){return this.matches(new It(e,o))||(o=mt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,o,l,d,g)}updateFullNode(t,e,o){e.isLeafNode()&&(e=mt.EMPTY_NODE);let l=e.withIndex(this.index_);l=l.updatePriority(mt.EMPTY_NODE);const d=this;return e.forEachChild(Kt,(g,E)=>{d.matches(new It(g,E))||(l=l.updateImmediateChild(g,mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,l,o)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class H_{constructor(t){this.rangedFilter_=new ac(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,o,l,d,g){return this.rangedFilter_.matches(new It(e,o))||(o=mt.EMPTY_NODE),t.getImmediateChild(e).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,o,l,d,g):this.fullLimitUpdateChild_(t,e,o,d,g)}updateFullNode(t,e,o){let l;if(e.isLeafNode()||e.isEmpty())l=mt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let d;l=mt.EMPTY_NODE.withIndex(this.index_),d=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let g=0;for(;d.hasNext()&&g<this.limit_;){const E=d.getNext();let b;if(b=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),E)<=0:this.index_.compare(E,this.rangedFilter_.getEndPost())<=0,!b)break;l=l.updateImmediateChild(E.name,E.node),g++}}else{let d,g,E,b;if(l=e.withIndex(this.index_),l=l.updatePriority(mt.EMPTY_NODE),this.reverse_){b=l.getReverseIterator(this.index_),d=this.rangedFilter_.getEndPost(),g=this.rangedFilter_.getStartPost();const O=this.index_.getCompare();E=(Q,ge)=>O(ge,Q)}else b=l.getIterator(this.index_),d=this.rangedFilter_.getStartPost(),g=this.rangedFilter_.getEndPost(),E=this.index_.getCompare();let R=0,U=!1;for(;b.hasNext();){const O=b.getNext();!U&&E(d,O)<=0&&(U=!0),U&&R<this.limit_&&E(O,g)<=0?R++:l=l.updateImmediateChild(O.name,mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,l,o)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,o,l,d){let g;if(this.reverse_){const O=this.index_.getCompare();g=(Q,ge)=>O(ge,Q)}else g=this.index_.getCompare();const E=t;(0,N.hu)(E.numChildren()===this.limit_,"");const b=new It(e,o),R=this.reverse_?E.getFirstChild(this.index_):E.getLastChild(this.index_),U=this.rangedFilter_.matches(b);if(E.hasChild(e)){const O=E.getImmediateChild(e);let Q=l.getChildAfterChild(this.index_,R,this.reverse_);for(;null!=Q&&(Q.name===e||E.hasChild(Q.name));)Q=l.getChildAfterChild(this.index_,Q,this.reverse_);const ge=null==Q?1:g(Q,b);if(U&&!o.isEmpty()&&ge>=0)return null!=d&&d.trackChildChange(oc(e,o,O)),E.updateImmediateChild(e,o);{null!=d&&d.trackChildChange(sc(e,O));const Ke=E.updateImmediateChild(e,mt.EMPTY_NODE);return null!=Q&&this.rangedFilter_.matches(Q)?(null!=d&&d.trackChildChange(zl(Q.name,Q.node)),Ke.updateImmediateChild(Q.name,Q.node)):Ke}}return o.isEmpty()?t:U&&g(R,b)>=0?(null!=d&&(d.trackChildChange(sc(R.name,R.node)),d.trackChildChange(zl(e,o))),E.updateImmediateChild(e,o).updateImmediateChild(R.name,mt.EMPTY_NODE)):t}}class of{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Go}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kt}copy(){const t=new of;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function cg(i,t,e){const o=i.copy();return o.startSet_=!0,void 0===t&&(t=null),o.indexStartValue_=t,null!=e?(o.startNameSet_=!0,o.indexStartName_=e):(o.startNameSet_=!1,o.indexStartName_=""),o}function dg(i,t,e){const o=i.copy();return o.endSet_=!0,void 0===t&&(t=null),o.indexEndValue_=t,void 0!==e?(o.endNameSet_=!0,o.indexEndName_=e):(o.endNameSet_=!1,o.indexEndName_=""),o}function Zl(i,t){const e=i.copy();return e.index_=t,e}function ql(i){const t={};if(i.isDefault())return t;let e;return i.index_===Kt?e="$priority":i.index_===V_?e="$value":i.index_===Us?e="$key":((0,N.hu)(i.index_ instanceof sg,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=(0,N.Pz)(e),i.startSet_&&(t.startAt=(0,N.Pz)(i.indexStartValue_),i.startNameSet_&&(t.startAt+=","+(0,N.Pz)(i.indexStartName_))),i.endSet_&&(t.endAt=(0,N.Pz)(i.indexEndValue_),i.endNameSet_&&(t.endAt+=","+(0,N.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function $_(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_)),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_)),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;""===e&&(e=i.isViewFromLeft()?"l":"r"),t.vf=e}return i.index_!==Kt&&(t.i=i.index_.toString()),t}class Ba extends Ls{constructor(t,e,o,l){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Lh("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,N.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,o,l){const d=t._path.toString();this.log_("Listen called for "+d+" "+t._queryIdentifier);const g=Ba.getListenId_(t,o),E={};this.listens_[g]=E;const b=ql(t._queryParams);this.restRequest_(d+".json",b,(R,U)=>{let O=U;if(404===R&&(O=null,R=null),null===R&&this.onDataUpdate_(d,O,!1,o),(0,N.DV)(this.listens_,g)===E){let Q;Q=R?401===R?"permission_denied":"rest_error:"+R:"ok",l(Q,null)}})}unlisten(t,e){const o=Ba.getListenId_(t,e);delete this.listens_[o]}get(t){const e=ql(t._queryParams),o=t._path.toString(),l=new N.BH;return this.restRequest_(o+".json",e,(d,g)=>{let E=g;404===d&&(E=null,d=null),null===d?(this.onDataUpdate_(o,E,!1,null),l.resolve(E)):l.reject(new Error(E))}),l.promise}refreshAuthToken(t){}restRequest_(t,e={},o){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,d])=>{l&&l.accessToken&&(e.auth=l.accessToken),d&&d.token&&(e.ac=d.token);const g=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,N.xO)(e);this.log_("Sending REST request for "+g);const E=new XMLHttpRequest;E.onreadystatechange=()=>{if(o&&4===E.readyState){this.log_("REST Response for "+g+" received. status:",E.status,"response:",E.responseText);let b=null;if(E.status>=200&&E.status<300){try{b=(0,N.cI)(E.responseText)}catch(R){mr("Failed to parse JSON response for "+g+": "+E.responseText)}o(null,b)}else 401!==E.status&&404!==E.status&&mr("Got unsuccessful REST response for "+g+" Status: "+E.status),o(E.status);o=null}},E.open("GET",g,!0),E.send()})}}class VE{constructor(){this.rootNode_=mt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function af(){return{value:null,children:new Map}}function Va(i,t,e){if(Et(t))i.value=e,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(t,e);else{const o=Tt(t);i.children.has(o)||i.children.set(o,af()),Va(i.children.get(o),t=qt(t),e)}}function ss(i,t){if(Et(t))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const e=i.value;return i.value=null,e.forEachChild(Kt,(o,l)=>{Va(i,new Ht(o),l)}),ss(i,t)}}if(i.children.size>0){const e=Tt(t);return t=qt(t),i.children.has(e)&&ss(i.children.get(e),t)&&i.children.delete(e),0===i.children.size}return!0}function Kl(i,t,e){null!==i.value?e(t,i.value):function xr(i,t){i.children.forEach((e,o)=>{t(o,e)})}(i,(o,l)=>{Kl(l,new Ht(t.toString()+"/"+o),e)})}class Yl{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&_r(this.last_,(o,l)=>{e[o]=e[o]-l}),this.last_=t,e}}class lc{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Yl(t);const o=1e4+2e4*Math.random();Uh(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),e={};let o=!1;_r(t,(l,d)=>{d>0&&(0,N.r3)(this.statsToReport_,l)&&(e[l]=d,o=!0)}),o&&this.server_.reportStats(e),Uh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vr=(()=>{return(i=vr||(vr={}))[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",vr;var i})();function $a(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class qo{constructor(t,e,o){this.path=t,this.affectedTree=e,this.revert=o,this.type=vr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Et(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ht(t));return new qo(Bt(),e,this.revert)}}return(0,N.hu)(Tt(this.path)===t,"operationForChild called for unrelated child."),new qo(qt(this.path),this.affectedTree,this.revert)}}class Co{constructor(t,e){this.source=t,this.path=e,this.type=vr.LISTEN_COMPLETE}operationForChild(t){return Et(this.path)?new Co(this.source,Bt()):new Co(this.source,qt(this.path))}}class as{constructor(t,e,o){this.source=t,this.path=e,this.snap=o,this.type=vr.OVERWRITE}operationForChild(t){return Et(this.path)?new as(this.source,Bt(),this.snap.getImmediateChild(t)):new as(this.source,qt(this.path),this.snap)}}class js{constructor(t,e,o){this.source=t,this.path=e,this.children=o,this.type=vr.MERGE}operationForChild(t){if(Et(this.path)){const e=this.children.subtree(new Ht(t));return e.isEmpty()?null:e.value?new as(this.source,Bt(),e.value):new js(this.source,Bt(),e)}return(0,N.hu)(Tt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new js(this.source,qt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ko{constructor(t,e,o){this.node_=t,this.fullyInitialized_=e,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Et(t))return this.isFullyInitialized()&&!this.filtered_;const e=Tt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class W_{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function uc(i,t,e,o,l,d){const g=o.filter(E=>E.type===e);g.sort((E,b)=>function Z_(i,t,e){if(null==t.childName||null==e.childName)throw(0,N.g5)("Should only compare child_ events.");const o=new It(t.childName,t.snapshotNode),l=new It(e.childName,e.snapshotNode);return i.index_.compare(o,l)}(i,E,b)),g.forEach(E=>{const b=function z_(i,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}(i,E,d);l.forEach(R=>{R.respondsTo(E.type)&&t.push(R.createEvent(b,i.query_))})})}function Id(i,t){return{eventCache:i,serverCache:t}}function cc(i,t,e,o){return Id(new Ko(t,e,o),i.serverCache)}function fg(i,t,e,o){return Id(i.eventCache,new Ko(t,e,o))}function lf(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Ql(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let pg;class Jt{constructor(t,e=(()=>(pg||(pg=new Pr(uE)),pg))()){this.value=t,this.children=e}static fromObject(t){let e=new Jt(null);return _r(t,(o,l)=>{e=e.set(new Ht(o),l)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Bt(),value:this.value};if(Et(t))return null;{const o=Tt(t),l=this.children.get(o);if(null!==l){const d=l.findRootMostMatchingPathAndValue(qt(t),e);return null!=d?{path:pn(new Ht(o),d.path),value:d.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Et(t))return this;{const e=Tt(t),o=this.children.get(e);return null!==o?o.subtree(qt(t)):new Jt(null)}}set(t,e){if(Et(t))return new Jt(e,this.children);{const o=Tt(t),d=(this.children.get(o)||new Jt(null)).set(qt(t),e),g=this.children.insert(o,d);return new Jt(this.value,g)}}remove(t){if(Et(t))return this.children.isEmpty()?new Jt(null):new Jt(null,this.children);{const e=Tt(t),o=this.children.get(e);if(o){const l=o.remove(qt(t));let d;return d=l.isEmpty()?this.children.remove(e):this.children.insert(e,l),null===this.value&&d.isEmpty()?new Jt(null):new Jt(this.value,d)}return this}}get(t){if(Et(t))return this.value;{const e=Tt(t),o=this.children.get(e);return o?o.get(qt(t)):null}}setTree(t,e){if(Et(t))return e;{const o=Tt(t),d=(this.children.get(o)||new Jt(null)).setTree(qt(t),e);let g;return g=d.isEmpty()?this.children.remove(o):this.children.insert(o,d),new Jt(this.value,g)}}fold(t){return this.fold_(Bt(),t)}fold_(t,e){const o={};return this.children.inorderTraversal((l,d)=>{o[l]=d.fold_(pn(t,l),e)}),e(t,this.value,o)}findOnPath(t,e){return this.findOnPath_(t,Bt(),e)}findOnPath_(t,e,o){const l=!!this.value&&o(e,this.value);if(l)return l;if(Et(t))return null;{const d=Tt(t),g=this.children.get(d);return g?g.findOnPath_(qt(t),pn(e,d),o):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Bt(),e)}foreachOnPath_(t,e,o){if(Et(t))return this;{this.value&&o(e,this.value);const l=Tt(t),d=this.children.get(l);return d?d.foreachOnPath_(qt(t),pn(e,l),o):new Jt(null)}}foreach(t){this.foreach_(Bt(),t)}foreach_(t,e){this.children.inorderTraversal((o,l)=>{l.foreach_(pn(t,o),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,o)=>{o.value&&t(e,o.value)})}}class Hs{constructor(t){this.writeTree_=t}static empty(){return new Hs(new Jt(null))}}function wd(i,t,e){if(Et(t))return new Hs(new Jt(e));{const o=i.writeTree_.findRootMostValueAndPath(t);if(null!=o){const l=o.path;let d=o.value;const g=yr(l,t);return d=d.updateChild(g,e),new Hs(i.writeTree_.set(l,d))}{const l=new Jt(e),d=i.writeTree_.setTree(t,l);return new Hs(d)}}}function uf(i,t,e){let o=i;return _r(e,(l,d)=>{o=wd(o,pn(t,l),d)}),o}function q_(i,t){if(Et(t))return Hs.empty();{const e=i.writeTree_.setTree(t,new Jt(null));return new Hs(e)}}function cf(i,t){return null!=Jl(i,t)}function Jl(i,t){const e=i.writeTree_.findRootMostValueAndPath(t);return null!=e?i.writeTree_.get(e.path).getChild(yr(e.path,t)):null}function K_(i){const t=[],e=i.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Kt,(o,l)=>{t.push(new It(o,l))}):i.writeTree_.children.inorderTraversal((o,l)=>{null!=l.value&&t.push(new It(o,l.value))}),t}function Xl(i,t){if(Et(t))return i;{const e=Jl(i,t);return new Hs(null!=e?new Jt(e):i.writeTree_.subtree(t))}}function gg(i){return i.writeTree_.isEmpty()}function Wa(i,t){return df(Bt(),i.writeTree_,t)}function df(i,t,e){if(null!=t.value)return e.updateChild(i,t.value);{let o=null;return t.children.inorderTraversal((l,d)=>{".priority"===l?((0,N.hu)(null!==d.value,"Priority writes must always be leaf nodes"),o=d.value):e=df(pn(i,l),d,e)}),!e.getChild(i).isEmpty()&&null!==o&&(e=e.updateChild(pn(i,".priority"),o)),e}}function hf(i,t){return _g(t,i)}function Y_(i,t){if(i.snap)return ns(i.path,t);for(const e in i.children)if(i.children.hasOwnProperty(e)&&ns(pn(i.path,e),t))return!0;return!1}function $E(i){return i.visible}function eu(i,t,e){let o=Hs.empty();for(let l=0;l<i.length;++l){const d=i[l];if(t(d)){const g=d.path;let E;if(d.snap)ns(e,g)?(E=yr(e,g),o=wd(o,E,d.snap)):ns(g,e)&&(E=yr(g,e),o=wd(o,Bt(),d.snap.getChild(E)));else{if(!d.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(ns(e,g))E=yr(e,g),o=uf(o,E,d.children);else if(ns(g,e))if(E=yr(g,e),Et(E))o=uf(o,Bt(),d.children);else{const b=(0,N.DV)(d.children,Tt(E));if(b){const R=b.getChild(qt(E));o=wd(o,Bt(),R)}}}}}return o}function Q_(i,t,e,o,l){if(o||l){const d=Xl(i.visibleWrites,t);return!l&&gg(d)?e:l||null!=e||cf(d,Bt())?Wa(eu(i.allWrites,function(R){return(R.visible||l)&&(!o||!~o.indexOf(R.writeId))&&(ns(R.path,t)||ns(t,R.path))},t),e||mt.EMPTY_NODE):null}{const d=Jl(i.visibleWrites,t);if(null!=d)return d;{const g=Xl(i.visibleWrites,t);return gg(g)?e:null!=e||cf(g,Bt())?Wa(g,e||mt.EMPTY_NODE):null}}}function pf(i,t,e,o){return Q_(i.writeTree,i.treePath,t,e,o)}function mg(i,t){return function J_(i,t,e){let o=mt.EMPTY_NODE;const l=Jl(i.visibleWrites,t);if(l)return l.isLeafNode()||l.forEachChild(Kt,(d,g)=>{o=o.updateImmediateChild(d,g)}),o;if(e){const d=Xl(i.visibleWrites,t);return e.forEachChild(Kt,(g,E)=>{const b=Wa(Xl(d,new Ht(g)),E);o=o.updateImmediateChild(g,b)}),K_(d).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}return K_(Xl(i.visibleWrites,t)).forEach(g=>{o=o.updateImmediateChild(g.name,g.node)}),o}(i.writeTree,i.treePath,t)}function ty(i,t,e,o){return function WE(i,t,e,o,l){(0,N.hu)(o||l,"Either existingEventSnap or existingServerSnap must exist");const d=pn(t,e);if(cf(i.visibleWrites,d))return null;{const g=Xl(i.visibleWrites,d);return gg(g)?l.getChild(e):Wa(g,l.getChild(e))}}(i.writeTree,i.treePath,t,e,o)}function gf(i,t){return function ff(i,t){return Jl(i.visibleWrites,t)}(i.writeTree,pn(i.treePath,t))}function mf(i,t,e){return function X_(i,t,e,o){const l=pn(t,e),d=Jl(i.visibleWrites,l);return null!=d?d:o.isCompleteForChild(e)?Wa(Xl(i.visibleWrites,l),o.getNode().getImmediateChild(e)):null}(i.writeTree,i.treePath,t,e)}function ny(i,t){return _g(pn(i.treePath,t),i.writeTree)}function _g(i,t){return{treePath:i,writeTree:t}}class ry{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,o=t.childName;(0,N.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==o,"Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const d=l.type;if("child_added"===e&&"child_removed"===d)this.changeMap.set(o,oc(o,t.snapshotNode,l.snapshotNode));else if("child_removed"===e&&"child_added"===d)this.changeMap.delete(o);else if("child_removed"===e&&"child_changed"===d)this.changeMap.set(o,sc(o,l.oldSnap));else if("child_changed"===e&&"child_added"===d)this.changeMap.set(o,zl(o,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==d)throw(0,N.g5)("Illegal combination of changes: "+t+" occurred after "+l);this.changeMap.set(o,oc(o,t.snapshotNode,l.oldSnap))}}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}const ZE=new class yg{getCompleteChild(t){return null}getChildAfterChild(t,e,o){return null}};class bd{constructor(t,e,o=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=o}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const o=null!=this.optCompleteServerCache_?new Ko(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mf(this.writes_,t,o)}}getChildAfterChild(t,e,o){const l=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ql(this.viewCache_),d=function zE(i,t,e,o,l,d){return function GE(i,t,e,o,l,d,g){let E;const b=Xl(i.visibleWrites,t),R=Jl(b,Bt());if(null!=R)E=R;else{if(null==e)return[];E=Wa(b,e)}if(E=E.withIndex(g),E.isEmpty()||E.isLeafNode())return[];{const U=[],O=g.getCompare(),Q=d?E.getReverseIteratorFrom(o,g):E.getIteratorFrom(o,g);let ge=Q.getNext();for(;ge&&U.length<l;)0!==O(ge,o)&&U.push(ge),ge=Q.getNext();return U}}(i.writeTree,i.treePath,t,e,o,l,d)}(this.writes_,l,e,1,o,t);return 0===d.length?null:d[0]}}function vg(i,t,e,o,l,d){const g=t.eventCache;if(null!=gf(o,e))return t;{let E,b;if(Et(e))if((0,N.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const R=Ql(t),O=mg(o,R instanceof mt?R:mt.EMPTY_NODE);E=i.filter.updateFullNode(t.eventCache.getNode(),O,d)}else{const R=pf(o,Ql(t));E=i.filter.updateFullNode(t.eventCache.getNode(),R,d)}else{const R=Tt(e);if(".priority"===R){(0,N.hu)(1===xa(e),"Can't have a priority with additional path components");const U=g.getNode();b=t.serverCache.getNode();const O=ty(o,e,U,b);E=null!=O?i.filter.updatePriority(U,O):g.getNode()}else{const U=qt(e);let O;if(g.isCompleteForChild(R)){b=t.serverCache.getNode();const Q=ty(o,e,g.getNode(),b);O=null!=Q?g.getNode().getImmediateChild(R).updateChild(U,Q):g.getNode().getImmediateChild(R)}else O=mf(o,R,t.serverCache);E=null!=O?i.filter.updateChild(g.getNode(),R,O,U,l,d):g.getNode()}}return cc(t,E,g.isFullyInitialized()||Et(e),i.filter.filtersNodes())}}function dc(i,t,e,o,l,d,g,E){const b=t.serverCache;let R;const U=g?i.filter:i.filter.getIndexedFilter();if(Et(e))R=U.updateFullNode(b.getNode(),o,null);else if(U.filtersNodes()&&!b.isFiltered()){const ge=b.getNode().updateChild(e,o);R=U.updateFullNode(b.getNode(),ge,null)}else{const ge=Tt(e);if(!b.isCompleteForPath(e)&&xa(e)>1)return t;const Me=qt(e),kt=b.getNode().getImmediateChild(ge).updateChild(Me,o);R=".priority"===ge?U.updatePriority(b.getNode(),kt):U.updateChild(b.getNode(),ge,kt,Me,ZE,null)}const O=fg(t,R,b.isFullyInitialized()||Et(e),U.filtersNodes());return vg(i,O,e,l,new bd(l,O,d),E)}function Eg(i,t,e,o,l,d,g){const E=t.eventCache;let b,R;const U=new bd(l,t,d);if(Et(e))R=i.filter.updateFullNode(t.eventCache.getNode(),o,g),b=cc(t,R,!0,i.filter.filtersNodes());else{const O=Tt(e);if(".priority"===O)R=i.filter.updatePriority(t.eventCache.getNode(),o),b=cc(t,R,E.isFullyInitialized(),E.isFiltered());else{const Q=qt(e),ge=E.getNode().getImmediateChild(O);let Me;if(Et(Q))Me=o;else{const Ke=U.getCompleteChild(O);Me=null!=Ke?".priority"===Xp(Q)&&Ke.getChild(Qh(Q)).isEmpty()?Ke:Ke.updateChild(Q,o):mt.EMPTY_NODE}b=ge.equals(Me)?t:cc(t,i.filter.updateChild(E.getNode(),O,Me,Q,U,g),E.isFullyInitialized(),i.filter.filtersNodes())}}return b}function Td(i,t){return i.eventCache.isCompleteForChild(t)}function yf(i,t,e){return e.foreach((o,l)=>{t=t.updateChild(o,l)}),t}function sy(i,t,e,o,l,d,g,E){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let R,b=t;R=Et(e)?o:new Jt(null).setTree(e,o);const U=t.serverCache.getNode();return R.children.inorderTraversal((O,Q)=>{if(U.hasChild(O)){const Me=yf(0,t.serverCache.getNode().getImmediateChild(O),Q);b=dc(i,b,new Ht(O),Me,l,d,g,E)}}),R.children.inorderTraversal((O,Q)=>{const ge=!t.serverCache.isCompleteForChild(O)&&void 0===Q.value;if(!U.hasChild(O)&&!ge){const Ke=yf(0,t.serverCache.getNode().getImmediateChild(O),Q);b=dc(i,b,new Ht(O),Ke,l,d,g,E)}}),b}class oy{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new j_(o.getIndex()),d=function ug(i){return i.loadsAllData()?new j_(i.getIndex()):i.hasLimit()?new H_(i):new ac(i)}(o);this.processor_=function qE(i){return{filter:i}}(d);const g=e.serverCache,E=e.eventCache,b=l.updateFullNode(mt.EMPTY_NODE,g.getNode(),null),R=d.updateFullNode(mt.EMPTY_NODE,E.getNode(),null),U=new Ko(b,g.isFullyInitialized(),l.filtersNodes()),O=new Ko(R,E.isFullyInitialized(),d.filtersNodes());this.viewCache_=Id(O,U),this.eventGenerator_=new W_(this.query_)}get query(){return this.query_}}function ay(i,t){const e=Ql(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!Et(t)&&!e.getImmediateChild(Tt(t)).isEmpty())?e.getChild(t):null}function bg(i){return 0===i.eventRegistrations_.length}function Tg(i,t,e){const o=[];if(e){(0,N.hu)(null==t,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(d=>{const g=d.createCancelEvent(e,l);g&&o.push(g)})}if(t){let l=[];for(let d=0;d<i.eventRegistrations_.length;++d){const g=i.eventRegistrations_[d];if(g.matches(t)){if(t.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(d+1));break}}else l.push(g)}i.eventRegistrations_=l}else i.eventRegistrations_=[];return o}function ly(i,t,e,o){t.type===vr.MERGE&&null!==t.source.queryId&&((0,N.hu)(Ql(i.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(lf(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,d=function Dd(i,t,e,o,l){const d=new ry;let g,E;if(e.type===vr.OVERWRITE){const R=e;R.source.fromUser?g=Eg(i,t,R.path,R.snap,o,l,d):((0,N.hu)(R.source.fromServer,"Unknown source."),E=R.source.tagged||t.serverCache.isFiltered()&&!Et(R.path),g=dc(i,t,R.path,R.snap,o,l,E,d))}else if(e.type===vr.MERGE){const R=e;R.source.fromUser?g=function _f(i,t,e,o,l,d,g){let E=t;return o.foreach((b,R)=>{const U=pn(e,b);Td(t,Tt(U))&&(E=Eg(i,E,U,R,l,d,g))}),o.foreach((b,R)=>{const U=pn(e,b);Td(t,Tt(U))||(E=Eg(i,E,U,R,l,d,g))}),E}(i,t,R.path,R.children,o,l,d):((0,N.hu)(R.source.fromServer,"Unknown source."),E=R.source.tagged||t.serverCache.isFiltered(),g=sy(i,t,R.path,R.children,o,l,E,d))}else if(e.type===vr.ACK_USER_WRITE){const R=e;g=R.revert?function Ig(i,t,e,o,l,d){let g;if(null!=gf(o,e))return t;{const E=new bd(o,t,l),b=t.eventCache.getNode();let R;if(Et(e)||".priority"===Tt(e)){let U;if(t.serverCache.isFullyInitialized())U=pf(o,Ql(t));else{const O=t.serverCache.getNode();(0,N.hu)(O instanceof mt,"serverChildren would be complete if leaf node"),U=mg(o,O)}U=U,R=i.filter.updateFullNode(b,U,d)}else{const U=Tt(e);let O=mf(o,U,t.serverCache);null==O&&t.serverCache.isCompleteForChild(U)&&(O=b.getImmediateChild(U)),R=null!=O?i.filter.updateChild(b,U,O,qt(e),E,d):t.eventCache.getNode().hasChild(U)?i.filter.updateChild(b,U,mt.EMPTY_NODE,qt(e),E,d):b,R.isEmpty()&&t.serverCache.isFullyInitialized()&&(g=pf(o,Ql(t)),g.isLeafNode()&&(R=i.filter.updateFullNode(R,g,d)))}return g=t.serverCache.isFullyInitialized()||null!=gf(o,Bt()),cc(t,R,g,i.filter.filtersNodes())}}(i,t,R.path,o,l,d):function KE(i,t,e,o,l,d,g){if(null!=gf(l,e))return t;const E=t.serverCache.isFiltered(),b=t.serverCache;if(null!=o.value){if(Et(e)&&b.isFullyInitialized()||b.isCompleteForPath(e))return dc(i,t,e,b.getNode().getChild(e),l,d,E,g);if(Et(e)){let R=new Jt(null);return b.getNode().forEachChild(Us,(U,O)=>{R=R.set(new Ht(U),O)}),sy(i,t,e,R,l,d,E,g)}return t}{let R=new Jt(null);return o.foreach((U,O)=>{const Q=pn(e,U);b.isCompleteForPath(Q)&&(R=R.set(U,b.getNode().getChild(Q)))}),sy(i,t,e,R,l,d,E,g)}}(i,t,R.path,R.affectedTree,o,l,d)}else{if(e.type!==vr.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+e.type);g=function Cg(i,t,e,o,l){const d=t.serverCache;return vg(i,fg(t,d.getNode(),d.isFullyInitialized()||Et(e),d.isFiltered()),e,o,ZE,l)}(i,t,e.path,o,d)}const b=d.getChanges();return function iy(i,t,e){const o=t.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=lf(i);(e.length>0||!i.eventCache.isFullyInitialized()||l&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&e.push(NE(lf(t)))}}(t,g,b),{viewCache:g,changes:b}}(i.processor_,l,t,e,o);return function hI(i,t){(0,N.hu)(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,d.viewCache),(0,N.hu)(d.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=d.viewCache,Sg(i,d.changes,d.viewCache.eventCache.getNode(),null)}function Sg(i,t,e,o){return function G_(i,t,e,o){const l=[],d=[];return t.forEach(g=>{"child_changed"===g.type&&i.index_.indexedValueChanged(g.oldSnap,g.snapshotNode)&&d.push(function OE(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}(g.childName,g.snapshotNode))}),uc(i,l,"child_removed",t,o,e),uc(i,l,"child_added",t,o,e),uc(i,l,"child_moved",d,o,e),uc(i,l,"child_changed",t,o,e),uc(i,l,"value",t,o,e),l}(i.eventGenerator_,t,e,o?[o]:i.eventRegistrations_)}let hc,Mg;class cy{constructor(){this.views=new Map}}function vf(i,t,e,o){const l=t.source.queryId;if(null!==l){const d=i.views.get(l);return(0,N.hu)(null!=d,"SyncTree gave us an op for an invalid query."),ly(d,t,e,o)}{let d=[];for(const g of i.views.values())d=d.concat(ly(g,t,e,o));return d}}function Ef(i,t,e,o,l){const g=i.views.get(t._queryIdentifier);if(!g){let E=pf(e,l?o:null),b=!1;E?b=!0:o instanceof mt?(E=mg(e,o),b=!1):(E=mt.EMPTY_NODE,b=!1);const R=Id(new Ko(E,b,!1),new Ko(o,l,!1));return new oy(t,R)}return g}function Ag(i){const t=[];for(const e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Yo(i,t){let e=null;for(const o of i.views.values())e=e||ay(o,t);return e}function Rg(i,t){return t._queryParams.loadsAllData()?Sd(i):i.views.get(t._queryIdentifier)}function kg(i,t){return null!=Rg(i,t)}function Qo(i){return null!=Sd(i)}function Sd(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let fy=1;class py{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Jt(null),this.pendingWriteTree_=function ey(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kn(i,t,e,o,l){return function lI(i,t,e,o,l){(0,N.hu)(o>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===l&&(l=!0),i.allWrites.push({path:t,snap:e,writeId:o,visible:l}),l&&(i.visibleWrites=wd(i.visibleWrites,t,e)),i.lastWriteId=o}(i.pendingWriteTree_,t,e,o,l),l?tu(i,new as({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Ga(i,t,e=!1){const o=function cI(i,t){for(let e=0;e<i.allWrites.length;e++){const o=i.allWrites[e];if(o.writeId===t)return o}return null}(i.pendingWriteTree_,t);if(function HE(i,t){const e=i.allWrites.findIndex(E=>E.writeId===t);(0,N.hu)(e>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[e];i.allWrites.splice(e,1);let l=o.visible,d=!1,g=i.allWrites.length-1;for(;l&&g>=0;){const E=i.allWrites[g];E.visible&&(g>=e&&Y_(E,o.path)?l=!1:ns(o.path,E.path)&&(d=!0)),g--}return!!l&&(d?(function dI(i){i.visibleWrites=eu(i.allWrites,$E,Bt()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(o.snap?i.visibleWrites=q_(i.visibleWrites,o.path):_r(o.children,b=>{i.visibleWrites=q_(i.visibleWrites,pn(o.path,b))}),!0))}(i.pendingWriteTree_,t)){let d=new Jt(null);return null!=o.snap?d=d.set(Bt(),!0):_r(o.children,g=>{d=d.set(new Ht(g),!0)}),tu(i,new qo(o.path,d,e))}return[]}function Ad(i,t,e){return tu(i,new as({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Cf(i,t,e,o){const l=t._path,d=i.syncPointTree_.get(l);let g=[];if(d&&("default"===t._queryIdentifier||kg(d,t))){const E=function hy(i,t,e,o){const l=t._queryIdentifier,d=[];let g=[];const E=Qo(i);if("default"===l)for(const[b,R]of i.views.entries())g=g.concat(Tg(R,e,o)),bg(R)&&(i.views.delete(b),R.query._queryParams.loadsAllData()||d.push(R.query));else{const b=i.views.get(l);b&&(g=g.concat(Tg(b,e,o)),bg(b)&&(i.views.delete(l),b.query._queryParams.loadsAllData()||d.push(b.query)))}return E&&!Qo(i)&&d.push(new(function JE(){return(0,N.hu)(hc,"Reference.ts has not been loaded"),hc}())(t._repo,t._path)),{removed:d,events:g}}(d,t,e,o);(function XE(i){return 0===i.views.size})(d)&&(i.syncPointTree_=i.syncPointTree_.remove(l));const b=E.removed;g=E.events;const R=-1!==b.findIndex(O=>O._queryParams.loadsAllData()),U=i.syncPointTree_.findOnPath(l,(O,Q)=>Qo(Q));if(R&&!U){const O=i.syncPointTree_.subtree(l);if(!O.isEmpty()){const Q=function $s(i){return i.fold((t,e,o)=>{if(e&&Qo(e))return[Sd(e)];{let l=[];return e&&(l=Ag(e)),_r(o,(d,g)=>{l=l.concat(g)}),l}})}(O);for(let ge=0;ge<Q.length;++ge){const Me=Q[ge],Ke=Me.query,kt=xg(i,Me);i.listenProvider_.startListening(pc(Ke),Ti(i,Ke),kt.hashFn,kt.onComplete)}}}!U&&b.length>0&&!o&&(R?i.listenProvider_.stopListening(pc(t),null):b.forEach(O=>{const Q=i.queryToTagMap.get(If(O));i.listenProvider_.stopListening(pc(O),Q)})),function vy(i,t){for(let e=0;e<t.length;++e){const o=t[e];if(!o._queryParams.loadsAllData()){const l=If(o),d=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(d)}}}(i,b)}return g}function yy(i,t,e){const o=t._path;let l=null,d=!1;i.syncPointTree_.foreachOnPath(o,(O,Q)=>{const ge=yr(O,o);l=l||Yo(Q,ge),d=d||Qo(Q)});let E,g=i.syncPointTree_.get(o);g?(d=d||Qo(g),l=l||Yo(g,Bt())):(g=new cy,i.syncPointTree_=i.syncPointTree_.set(o,g)),null!=l?E=!0:(E=!1,l=mt.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((Q,ge)=>{const Me=Yo(ge,Bt());Me&&(l=l.updateImmediateChild(Q,Me))}));const b=kg(g,t);if(!b&&!t._queryParams.loadsAllData()){const O=If(t);(0,N.hu)(!i.queryToTagMap.has(O),"View does not exist, but we have a tag");const Q=function a0(){return fy++}();i.queryToTagMap.set(O,Q),i.tagToQueryMap.set(Q,O)}let U=function dy(i,t,e,o,l,d){const g=Ef(i,t,o,l,d);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,g),function Dg(i,t){i.eventRegistrations_.push(t)}(g,e),function uy(i,t){const e=i.viewCache_.eventCache,o=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Kt,(d,g)=>{o.push(zl(d,g))}),e.isFullyInitialized()&&o.push(NE(e.getNode())),Sg(i,o,e.getNode(),t)}(g,e)}(g,t,e,hf(i.pendingWriteTree_,o),l,E);if(!b&&!d){const O=Rg(g,t);U=U.concat(function l0(i,t,e){const o=t._path,l=Ti(i,t),d=xg(i,e),g=i.listenProvider_.startListening(pc(t),l,d.hashFn,d.onComplete),E=i.syncPointTree_.subtree(o);if(l)(0,N.hu)(!Qo(E.value),"If we're adding a query, it shouldn't be shadowed");else{const b=E.fold((R,U,O)=>{if(!Et(R)&&U&&Qo(U))return[Sd(U).query];{let Q=[];return U&&(Q=Q.concat(Ag(U).map(ge=>ge.query))),_r(O,(ge,Me)=>{Q=Q.concat(Me)}),Q}});for(let R=0;R<b.length;++R){const U=b[R];i.listenProvider_.stopListening(pc(U),Ti(i,U))}}return g}(i,t,O))}return U}function Rd(i,t,e){const l=i.pendingWriteTree_,d=i.syncPointTree_.findOnPath(t,(g,E)=>{const R=Yo(E,yr(g,t));if(R)return R});return Q_(l,t,d,e,!0)}function tu(i,t){return o0(t,i.syncPointTree_,null,hf(i.pendingWriteTree_,Bt()))}function o0(i,t,e,o){if(Et(i.path))return Pg(i,t,e,o);{const l=t.get(Bt());null==e&&null!=l&&(e=Yo(l,Bt()));let d=[];const g=Tt(i.path),E=i.operationForChild(g),b=t.children.get(g);if(b&&E){const R=e?e.getImmediateChild(g):null,U=ny(o,g);d=d.concat(o0(E,b,R,U))}return l&&(d=d.concat(vf(l,i,o,e))),d}}function Pg(i,t,e,o){const l=t.get(Bt());null==e&&null!=l&&(e=Yo(l,Bt()));let d=[];return t.children.inorderTraversal((g,E)=>{const b=e?e.getImmediateChild(g):null,R=ny(o,g),U=i.operationForChild(g);U&&(d=d.concat(Pg(U,E,b,R)))}),l&&(d=d.concat(vf(l,i,o,e))),d}function xg(i,t){const e=t.query,o=Ti(i,e);return{hashFn:()=>(function YE(i){return i.viewCache_.serverCache.getNode()}(t)||mt.EMPTY_NODE).hash(),onComplete:l=>{if("ok"===l)return o?function _y(i,t,e){const o=Ng(i,e);if(o){const l=ls(o),d=l.path,g=l.queryId,E=yr(d,t);return Si(i,d,new Co($a(g),E))}return[]}(i,e._path,o):function n0(i,t){return tu(i,new Co({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(i,e._path);{const d=function Lp(i,t){let e="Unknown Error";"too_big"===i?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?e="Client doesn't have permission to access the desired data.":"unavailable"===i&&(e="The service is unavailable");const o=new Error(i+" at "+t._path.toString()+": "+e);return o.code=i.toUpperCase(),o}(l,e);return Cf(i,e,null,d)}}}}function Ti(i,t){const e=If(t);return i.queryToTagMap.get(e)}function If(i){return i._path.toString()+"$"+i._queryIdentifier}function Ng(i,t){return i.tagToQueryMap.get(t)}function ls(i){const t=i.indexOf("$");return(0,N.hu)(-1!==t&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Ht(i.substr(0,t))}}function Si(i,t,e){const o=i.syncPointTree_.get(t);return(0,N.hu)(o,"Missing sync point for query tag that we're tracking"),vf(o,e,hf(i.pendingWriteTree_,t),null)}function pc(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function t0(){return(0,N.hu)(Mg,"Reference.ts has not been loaded"),Mg}())(i._repo,i._path):i}class Og{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Og(e)}node(){return this.node_}}class Fg{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=pn(this.path_,t);return new Fg(this.syncTree_,e)}node(){return Rd(this.syncTree_,this.path_)}}const gc=function(i,t,e){return i&&"object"==typeof i?((0,N.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?u0(i[".sv"],t,e):"object"==typeof i[".sv"]?Ey(i[".sv"],t):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},u0=function(i,t,e){if("timestamp"===i)return e.timestamp;(0,N.hu)(!1,"Unexpected server value: "+i)},Ey=function(i,t,e){i.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;"number"!=typeof o&&(0,N.hu)(!1,"Unexpected increment value: "+o);const l=t.node();if((0,N.hu)(null!=l,"Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const g=l.getValue();return"number"!=typeof g?o:g+o},Cy=function(i,t,e,o){return bf(t,new Fg(e,i),o)},wf=function(i,t,e){return bf(i,new Og(t),e)};function bf(i,t,e){const o=i.getPriority().val(),l=gc(o,t.getImmediateChild(".priority"),e);let d;if(i.isLeafNode()){const g=i,E=gc(g.getValue(),t,e);return E!==g.getValue()||l!==g.getPriority().val()?new Bs(E,Cn(l)):i}{const g=i;return d=g,l!==g.getPriority().val()&&(d=d.updatePriority(new Bs(l))),g.forEachChild(Kt,(E,b)=>{const R=bf(b,t.getImmediateChild(E),e);R!==b&&(d=d.updateImmediateChild(E,R))}),d}}class mc{constructor(t="",e=null,o={children:{},childCount:0}){this.name=t,this.parent=e,this.node=o}}function Df(i,t){let e=t instanceof Ht?t:new Ht(t),o=i,l=Tt(e);for(;null!==l;){const d=(0,N.DV)(o.node.children,l)||{children:{},childCount:0};o=new mc(l,o,d),e=qt(e),l=Tt(e)}return o}function za(i){return i.node.value}function Tf(i,t){i.node.value=t,Sf(i)}function Ug(i){return i.node.childCount>0}function kd(i,t){_r(i.node.children,(e,o)=>{t(new mc(e,i,o))})}function Vg(i,t,e,o){e&&!o&&t(i),kd(i,l=>{Vg(l,t,!0,o)}),e&&o&&t(i)}function _c(i){return new Ht(null===i.parent?i.name:_c(i.parent)+"/"+i.name)}function Sf(i){null!==i.parent&&function wy(i,t,e){const o=function Bg(i){return void 0===za(i)&&!Ug(i)}(e),l=(0,N.r3)(i.node.children,t);o&&l?(delete i.node.children[t],i.node.childCount--,Sf(i)):!o&&!l&&(i.node.children[t]=e.node,i.node.childCount++,Sf(i))}(i.parent,i.name,i)}const by=/[\[\].#$\/\u0000-\u001F\u007F]/,Dy=/[\[\].#$\u0000-\u001F\u007F]/,jg=10485760,Af=function(i){return"string"==typeof i&&0!==i.length&&!by.test(i)},Ty=function(i){return"string"==typeof i&&0!==i.length&&!Dy.test(i)},Md=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!Yu(i)||i&&"object"==typeof i&&(0,N.r3)(i,".sv")},Io=function(i,t,e,o){o&&void 0===t||Pd((0,N.gK)(i,"value"),t,e)},Pd=function(i,t,e){const o=e instanceof Ht?new tg(e,i):e;if(void 0===t)throw new Error(i+"contains undefined "+Oa(o));if("function"==typeof t)throw new Error(i+"contains a function "+Oa(o)+" with contents = "+t.toString());if(Yu(t))throw new Error(i+"contains "+t.toString()+" "+Oa(o));if("string"==typeof t&&t.length>jg/3&&(0,N.ug)(t)>jg)throw new Error(i+"contains a string greater than "+jg+" utf8 bytes "+Oa(o)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let l=!1,d=!1;if(_r(t,(g,E)=>{if(".value"===g)l=!0;else if(".priority"!==g&&".sv"!==g&&(d=!0,!Af(g)))throw new Error(i+" contains an invalid key ("+g+") "+Oa(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function iI(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=(0,N.ug)(t),ng(i)})(o,g),Pd(i,E,o),function TE(i){const t=i.parts_.pop();i.byteLength_-=(0,N.ug)(t),i.parts_.length>0&&(i.byteLength_-=1)}(o)}),l&&d)throw new Error(i+' contains ".value" child '+Oa(o)+" in addition to actual children.")}},Sy=function(i,t,e,o){if(o&&void 0===t)return;const l=(0,N.gK)(i,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(l+" must be an object containing the children to replace.");const d=[];_r(t,(g,E)=>{const b=new Ht(g);if(Pd(l,E,pn(e,b)),".priority"===Xp(b)&&!Md(E))throw new Error(l+"contains an invalid value for '"+b.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(b)}),function(i,t){let e,o;for(e=0;e<t.length;e++){o=t[e];const d=Na(o);for(let g=0;g<d.length;g++)if((".priority"!==d[g]||g!==d.length-1)&&!Af(d[g]))throw new Error(i+"contains an invalid key ("+d[g]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(k_);let l=null;for(e=0;e<t.length;e++){if(o=t[e],null!==l&&ns(l,o))throw new Error(i+"contains a path "+l.toString()+" that is ancestor of another path "+o.toString());l=o}}(l,d)},Hg=function(i,t,e){if(!e||void 0!==t){if(Yu(t))throw new Error((0,N.gK)(i,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Md(t))throw new Error((0,N.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xd=function(i,t,e,o){if(!(o&&void 0===e||Af(e)))throw new Error((0,N.gK)(i,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nd=function(i,t,e,o){if(!(o&&void 0===e||Ty(e)))throw new Error((0,N.gK)(i,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},us=function(i,t){if(".info"===Tt(t))throw new Error(i+" failed = Can't modify data under /.info/")},Ay=function(i,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Af(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ty(i)}(e))throw new Error((0,N.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class f0{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rf(i,t){let e=null;for(let o=0;o<t.length;o++){const l=t[o],d=l.getPath();null!==e&&!eg(d,e.path)&&(i.eventLists_.push(e),e=null),null===e&&(e={events:[],path:d}),e.events.push(l)}e&&i.eventLists_.push(e)}function $g(i,t,e){Rf(i,e),Wg(i,o=>eg(o,t))}function Ai(i,t,e){Rf(i,e),Wg(i,o=>ns(o,t)||ns(t,o))}function Wg(i,t){i.recursionDepth_++;let e=!0;for(let o=0;o<i.eventLists_.length;o++){const l=i.eventLists_[o];l&&(t(l.path)?(Ry(i.eventLists_[o]),i.eventLists_[o]=null):e=!1)}e&&(i.eventLists_=[]),i.recursionDepth_--}function Ry(i){for(let t=0;t<i.events.length;t++){const e=i.events[t];if(null!==e){i.events[t]=null;const o=e.getEventRunner();Ma&&Qn("event: "+e.toString()),gd(o)}}}const Gg="repo_interrupt";class My{constructor(t,e,o,l){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new f0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=af(),this.transactionQueueTree_=new mc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zg(i){const e=i.infoData_.getNode(new Ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function yc(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:zg(i)})}function Zg(i,t,e,o,l){i.dataUpdateCount++;const d=new Ht(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let g=[];if(l)if(o){const b=(0,N.UI)(e,R=>Cn(R));g=function r0(i,t,e,o){const l=Ng(i,o);if(l){const d=ls(l),g=d.path,E=d.queryId,b=yr(g,t),R=Jt.fromObject(e);return Si(i,g,new js($a(E),b,R))}return[]}(i.serverSyncTree_,d,b,l)}else{const b=Cn(e);g=function fc(i,t,e,o){const l=Ng(i,o);if(null!=l){const d=ls(l),g=d.path,E=d.queryId,b=yr(g,t);return Si(i,g,new as($a(E),b,e))}return[]}(i.serverSyncTree_,d,b,l)}else if(o){const b=(0,N.UI)(e,R=>Cn(R));g=function my(i,t,e){const o=Jt.fromObject(e);return tu(i,new js({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,o))}(i.serverSyncTree_,d,b)}else{const b=Cn(e);g=Ad(i.serverSyncTree_,d,b)}let E=d;g.length>0&&(E=Cc(i,d)),Ai(i.eventQueue_,E,g)}function qg(i,t){Kg(i,"connected",t),!1===t&&function fI(i){Ec(i,"onDisconnectEvents");const t=yc(i),e=af();Kl(i.onDisconnect_,Bt(),(l,d)=>{const g=Cy(l,d,i.serverSyncTree_,t);Va(e,l,g)});let o=[];Kl(e,Bt(),(l,d)=>{o=o.concat(Ad(i.serverSyncTree_,l,d));const g=rm(i,l);Cc(i,g)}),i.onDisconnect_=af(),Ai(i.eventQueue_,Bt(),o)}(i)}function Kg(i,t,e){const o=new Ht("/.info/"+t),l=Cn(e);i.infoData_.updateSnapshot(o,l);const d=Ad(i.infoSyncTree_,o,l);Ai(i.eventQueue_,o,d)}function kf(i){return i.nextWriteId_++}function xy(i,t,e,o,l){Ec(i,"set",{path:t.toString(),value:e,priority:o});const d=yc(i),g=Cn(e,o),E=Rd(i.serverSyncTree_,t),b=wf(g,E,d),R=kf(i),U=kn(i.serverSyncTree_,t,b,R,!0);Rf(i.eventQueue_,U),i.server_.put(t.toString(),g.val(!0),(Q,ge)=>{const Me="ok"===Q;Me||mr("set at "+t+" failed: "+Q);const Ke=Ga(i.serverSyncTree_,R,!Me);Ai(i.eventQueue_,t,Ke),Ws(0,l,Q,ge)});const O=rm(i,t);Cc(i,O),Ai(i.eventQueue_,O,[])}function Ny(i,t,e){i.server_.onDisconnectCancel(t.toString(),(o,l)=>{"ok"===o&&ss(i.onDisconnect_,t),Ws(0,e,o,l)})}function Qg(i,t,e,o){const l=Cn(e);i.server_.onDisconnectPut(t.toString(),l.val(!0),(d,g)=>{"ok"===d&&Va(i.onDisconnect_,t,l),Ws(0,o,d,g)})}function Jg(i,t,e){let o;o=".info"===Tt(t._path)?Cf(i.infoSyncTree_,t,e):Cf(i.serverSyncTree_,t,e),$g(i.eventQueue_,t._path,o)}function Oy(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Gg)}function Ec(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),Qn(e,...t)}function Ws(i,t,e,o){t&&gd(()=>{if("ok"===e)t(null);else{const l=(e||"error").toUpperCase();let d=l;o&&(d+=": "+o);const g=new Error(d);g.code=l,t(g)}})}function gn(i,t,e){return Rd(i.serverSyncTree_,t,e)||mt.EMPTY_NODE}function Xg(i,t=i.transactionQueueTree_){if(t||Od(i,t),za(t)){const e=tm(i,t);(0,N.hu)(e.length>0,"Sending zero length transaction queue"),e.every(l=>0===l.status)&&function Fy(i,t,e){const o=e.map(R=>R.currentWriteId),l=gn(i,t,o);let d=l;const g=l.hash();for(let R=0;R<e.length;R++){const U=e[R];(0,N.hu)(0===U.status,"tryToSendTransactionQueue_: items in queue should all be run."),U.status=1,U.retryCount++;const O=yr(t,U.path);d=d.updateChild(O,U.currentOutputSnapshotRaw)}const E=d.val(!0),b=t;i.server_.put(b.toString(),E,R=>{Ec(i,"transaction put response",{path:b.toString(),status:R});let U=[];if("ok"===R){const O=[];for(let Q=0;Q<e.length;Q++)e[Q].status=2,U=U.concat(Ga(i.serverSyncTree_,e[Q].currentWriteId)),e[Q].onComplete&&O.push(()=>e[Q].onComplete(null,!0,e[Q].currentOutputSnapshotResolved)),e[Q].unwatcher();Od(i,Df(i.transactionQueueTree_,t)),Xg(i,i.transactionQueueTree_),Ai(i.eventQueue_,t,U);for(let Q=0;Q<O.length;Q++)gd(O[Q])}else{if("datastale"===R)for(let O=0;O<e.length;O++)e[O].status=3===e[O].status?4:0;else{mr("transaction at "+b.toString()+" failed: "+R);for(let O=0;O<e.length;O++)e[O].status=4,e[O].abortReason=R}Cc(i,t)}},g)}(i,_c(t),e)}else Ug(t)&&kd(t,e=>{Xg(i,e)})}function Cc(i,t){const e=em(i,t),o=_c(e);return function g0(i,t,e){if(0===t.length)return;const o=[];let l=[];const g=t.filter(E=>0===E.status).map(E=>E.currentWriteId);for(let E=0;E<t.length;E++){const b=t[E],R=yr(e,b.path);let O,U=!1;if((0,N.hu)(null!==R,"rerunTransactionsUnderNode_: relativePath should not be null."),4===b.status)U=!0,O=b.abortReason,l=l.concat(Ga(i.serverSyncTree_,b.currentWriteId,!0));else if(0===b.status)if(b.retryCount>=25)U=!0,O="maxretry",l=l.concat(Ga(i.serverSyncTree_,b.currentWriteId,!0));else{const Q=gn(i,b.path,g);b.currentInputSnapshot=Q;const ge=t[E].update(Q.val());if(void 0!==ge){Pd("transaction failed: Data returned ",ge,b.path);let Me=Cn(ge);"object"==typeof ge&&null!=ge&&(0,N.r3)(ge,".priority")||(Me=Me.updatePriority(Q.getPriority()));const kt=b.currentWriteId,Jn=yc(i),en=wf(Me,Q,Jn);b.currentOutputSnapshotRaw=Me,b.currentOutputSnapshotResolved=en,b.currentWriteId=kf(i),g.splice(g.indexOf(kt),1),l=l.concat(kn(i.serverSyncTree_,b.path,en,b.currentWriteId,b.applyLocally)),l=l.concat(Ga(i.serverSyncTree_,kt,!0))}else U=!0,O="nodata",l=l.concat(Ga(i.serverSyncTree_,b.currentWriteId,!0))}Ai(i.eventQueue_,e,l),l=[],U&&(t[E].status=2,setTimeout(t[E].unwatcher,Math.floor(0)),t[E].onComplete&&o.push("nodata"===O?()=>t[E].onComplete(null,!1,t[E].currentInputSnapshot):()=>t[E].onComplete(new Error(O),!1,null)))}Od(i,i.transactionQueueTree_);for(let E=0;E<o.length;E++)gd(o[E]);Xg(i,i.transactionQueueTree_)}(i,tm(i,e),o),o}function em(i,t){let e,o=i.transactionQueueTree_;for(e=Tt(t);null!==e&&void 0===za(o);)o=Df(o,e),e=Tt(t=qt(t));return o}function tm(i,t){const e=[];return nm(i,t,e),e.sort((o,l)=>o.order-l.order),e}function nm(i,t,e){const o=za(t);if(o)for(let l=0;l<o.length;l++)e.push(o[l]);kd(t,l=>{nm(i,l,e)})}function Od(i,t){const e=za(t);if(e){let o=0;for(let l=0;l<e.length;l++)2!==e[l].status&&(e[o]=e[l],o++);e.length=o,Tf(t,e.length>0?e:void 0)}kd(t,o=>{Od(i,o)})}function rm(i,t){const e=_c(em(i,t)),o=Df(i.transactionQueueTree_,t);return function Iy(i,t,e){let o=e?i:i.parent;for(;null!==o;){if(t(o))return!0;o=o.parent}}(o,l=>{im(i,l)}),im(i,o),Vg(o,l=>{im(i,l)}),e}function im(i,t){const e=za(t);if(e){const o=[];let l=[],d=-1;for(let g=0;g<e.length;g++)3===e[g].status||(1===e[g].status?((0,N.hu)(d===g-1,"All SENT items should be at beginning of queue."),d=g,e[g].status=3,e[g].abortReason="set"):((0,N.hu)(0===e[g].status,"Unexpected transaction status in abort"),e[g].unwatcher(),l=l.concat(Ga(i.serverSyncTree_,e[g].currentWriteId,!0)),e[g].onComplete&&o.push(e[g].onComplete.bind(null,new Error("set"),!1,null))));-1===d?Tf(t,void 0):e.length=d+1,Ai(i.eventQueue_,_c(t),l);for(let g=0;g<o.length;g++)gd(o[g])}}const sm=function(i,t){const e=_0(i),o=e.namespace;return"firebase.com"===e.domain&&Di(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==e.domain&&Di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new md(e.host,e.secure,o,t,"ws"===e.scheme||"wss"===e.scheme,"",o!==e.subdomain),path:new Ht(e.pathString)}},_0=function(i){let t="",e="",o="",l="",d="",g=!0,E="https",b=443;if("string"==typeof i){let R=i.indexOf("//");R>=0&&(E=i.substring(0,R-1),i=i.substring(R+2));let U=i.indexOf("/");-1===U&&(U=i.length);let O=i.indexOf("?");-1===O&&(O=i.length),t=i.substring(0,Math.min(U,O)),U<O&&(l=function m0(i){let t="";const e=i.split("/");for(let o=0;o<e.length;o++)if(e[o].length>0){let l=e[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(d){}t+="/"+l}return t}(i.substring(U,O)));const Q=function Fd(i){const t={};"?"===i.charAt(0)&&(i=i.substring(1));for(const e of i.split("&")){if(0===e.length)continue;const o=e.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):mr(`Invalid query segment '${e}' in query '${i}'`)}return t}(i.substring(Math.min(i.length,O)));R=t.indexOf(":"),R>=0?(g="https"===E||"wss"===E,b=parseInt(t.substring(R+1),10)):R=t.length;const ge=t.slice(0,R);if("localhost"===ge.toLowerCase())e="localhost";else if(ge.split(".").length<=2)e=ge;else{const Me=t.indexOf(".");o=t.substring(0,Me).toLowerCase(),e=t.substring(Me+1),d=o}"ns"in Q&&(d=Q.ns)}return{host:t,port:b,domain:e,subdomain:o,secure:g,scheme:E,pathString:l,namespace:d}};class Ly{constructor(t,e,o,l){this.eventType=t,this.eventRegistration=e,this.snapshot=o,this.prevName=l}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class Ld{constructor(t,e,o){this.eventRegistration=t,this.error=e,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class om{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class am{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new N.BH;return Ny(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){us("OnDisconnect.remove",this._path);const t=new N.BH;return Qg(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){us("OnDisconnect.set",this._path),Io("OnDisconnect.set",t,this._path,!1);const e=new N.BH;return Qg(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){us("OnDisconnect.setWithPriority",this._path),Io("OnDisconnect.setWithPriority",t,this._path,!1),Hg("OnDisconnect.setWithPriority",e,!1);const o=new N.BH;return function pI(i,t,e,o,l){const d=Cn(e,o);i.server_.onDisconnectPut(t.toString(),d.val(!0),(g,E)=>{"ok"===g&&Va(i.onDisconnect_,t,d),Ws(0,l,g,E)})}(this._repo,this._path,t,e,o.wrapCallback(()=>{})),o.promise}update(t){us("OnDisconnect.update",this._path),Sy("OnDisconnect.update",t,this._path,!1);const e=new N.BH;return function st(i,t,e,o){if((0,N.xb)(e))return Qn("onDisconnect().update() called with empty data.  Don't do anything."),void Ws(0,o,"ok",void 0);i.server_.onDisconnectMerge(t.toString(),e,(l,d)=>{"ok"===l&&_r(e,(g,E)=>{const b=Cn(E);Va(i.onDisconnect_,pn(t,g),b)}),Ws(0,o,l,d)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class qr{constructor(t,e,o,l){this._repo=t,this._path=e,this._queryParams=o,this._orderByCalled=l}get key(){return Et(this._path)?null:Xp(this._path)}get ref(){return new ds(this._repo,this._path)}get _queryIdentifier(){const t=$_(this._queryParams),e=f_(t);return"{}"===e?"default":e}get _queryObject(){return $_(this._queryParams)}isEqual(t){if(!((t=(0,N.m9)(t))instanceof qr))return!1;const e=this._repo===t._repo,o=eg(this._path,t._path);return e&&o&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function DE(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)""!==i.pieces_[e]&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}(this._path)}}function xf(i,t){if(!0===i._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function cs(i){let t=null,e=null;if(i.hasStart()&&(t=i.getIndexStartValue()),i.hasEnd()&&(e=i.getIndexEndValue()),i.getIndex()===Us){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==Go)throw new Error(o);if("string"!=typeof t)throw new Error(l)}if(i.hasEnd()){if(i.getIndexEndName()!==vo)throw new Error(o);if("string"!=typeof e)throw new Error(l)}}else if(i.getIndex()===Kt){if(null!=t&&!Md(t)||null!=e&&!Md(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(i.getIndex()instanceof sg||i.getIndex()===V_,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Za(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ds extends qr{constructor(t,e){super(t,e,new of,!1)}get parent(){const t=Qh(this._path);return null===t?null:new ds(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class ru{constructor(t,e,o){this._node=t,this.ref=e,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ht(t),o=qa(this.ref,t);return new ru(this._node.getChild(e),o,Kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,l)=>t(new ru(l,qa(this.ref,o),Kt)))}hasChild(t){const e=new Ht(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Uy(i,t){return(i=(0,N.m9)(i))._checkNotDeleted("ref"),void 0!==t?qa(i._root,t):i._root}function lm(i,t){(i=(0,N.m9)(i))._checkNotDeleted("refFromURL");const e=sm(t,i._repo.repoInfo_.nodeAdmin);Ay("refFromURL",e);const o=e.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&o.host!==i._repo.repoInfo_.host&&Di("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+i._repo.repoInfo_.host+")"),Uy(i,e.path.toString())}function qa(i,t){return null===Tt((i=(0,N.m9)(i))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Nd("child","path",e,!1)):Nd("child","path",t,!1),new ds(i._repo,pn(i._path,t));var e}function um(i,t){i=(0,N.m9)(i),us("set",i._path),Io("set",t,i._path,!1);const e=new N.BH;return xy(i._repo,i._path,t,null,e.wrapCallback(()=>{})),e.promise}function mI(i,t){Sy("update",t,i._path,!1);const e=new N.BH;return function Yg(i,t,e,o){Ec(i,"update",{path:t.toString(),value:e});let l=!0;const d=yc(i),g={};if(_r(e,(E,b)=>{l=!1,g[E]=Cy(pn(t,E),Cn(b),i.serverSyncTree_,d)}),l)Qn("update() called with empty data.  Don't do anything."),Ws(0,o,"ok",void 0);else{const E=kf(i),b=function gy(i,t,e,o){!function uI(i,t,e,o){(0,N.hu)(o>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:e,writeId:o,visible:!0}),i.visibleWrites=uf(i.visibleWrites,t,e),i.lastWriteId=o}(i.pendingWriteTree_,t,e,o);const l=Jt.fromObject(e);return tu(i,new js({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,l))}(i.serverSyncTree_,t,g,E);Rf(i.eventQueue_,b),i.server_.merge(t.toString(),e,(R,U)=>{const O="ok"===R;O||mr("update at "+t+" failed: "+R);const Q=Ga(i.serverSyncTree_,E,!O),ge=Q.length>0?Cc(i,t):t;Ai(i.eventQueue_,ge,Q),Ws(0,o,R,U)}),_r(e,R=>{const U=rm(i,pn(t,R));Cc(i,U)}),Ai(i.eventQueue_,t,[])}}(i._repo,i._path,t,e.wrapCallback(()=>{})),e.promise}function _I(i){return function vc(i,t){const e=function s0(i,t){const e=t._path;let o=null;i.syncPointTree_.foreachOnPath(e,(R,U)=>{const O=yr(R,e);o=o||Yo(U,O)});let l=i.syncPointTree_.get(e);l?o=o||Yo(l,Bt()):(l=new cy,i.syncPointTree_=i.syncPointTree_.set(e,l));const d=null!=o,g=d?new Ko(o,!0,!1):null;return function wg(i){return lf(i.viewCache_)}(Ef(l,t,hf(i.pendingWriteTree_,t._path),d?g.getNode():mt.EMPTY_NODE,d))}(i.serverSyncTree_,t);return null!=e?Promise.resolve(e):i.server_.get(t).then(o=>{const l=Cn(o).withIndex(t._queryParams.getIndex()),d=Ad(i.serverSyncTree_,t._path,l);return $g(i.eventQueue_,t._path,d),Promise.resolve(l)},o=>(Ec(i,"get for query "+(0,N.Pz)(t)+" failed: "+o),Promise.reject(new Error(o))))}((i=(0,N.m9)(i))._repo,i).then(t=>new ru(t,new ds(i._repo,i._path),i._queryParams.getIndex()))}class cm{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const o=e._queryParams.getIndex();return new Ly("value",this,new ru(t.snapshotNode,new ds(e._repo,e._path),o))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ld(this,t,e):null}matches(t){return t instanceof cm&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ud{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ld(this,t,e):null}createEvent(t,e){(0,N.hu)(null!=t.childName,"Child events should have a childName.");const o=qa(new ds(e._repo,e._path),t.childName),l=e._queryParams.getIndex();return new Ly(t.type,this,new ru(t.snapshotNode,o,l),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Ud&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ka(i,t,e,o,l){let d;if("object"==typeof o&&(d=void 0,l=o),"function"==typeof o&&(d=o),l&&l.onlyOnce){const b=e,R=(U,O)=>{Jg(i._repo,i,E),b(U,O)};R.userCallback=e.userCallback,R.context=e.context,e=R}const g=new om(e,d||void 0),E="value"===t?new cm(g):new Ud(t,g);return function p0(i,t,e){let o;o=".info"===Tt(t._path)?yy(i.infoSyncTree_,t,e):yy(i.serverSyncTree_,t,e),$g(i.eventQueue_,t._path,o)}(i._repo,i,E),()=>Jg(i._repo,i,E)}function dm(i,t,e,o){return Ka(i,"value",t,e,o)}function Vy(i,t,e,o){return Ka(i,"child_added",t,e,o)}function hm(i,t,e,o){return Ka(i,"child_changed",t,e,o)}function Ic(i,t,e,o){return Ka(i,"child_moved",t,e,o)}function jy(i,t,e,o){return Ka(i,"child_removed",t,e,o)}function Hy(i,t,e){let o=null;const l=e?new om(e):null;"value"===t?o=new cm(l):t&&(o=new Ud(t,l)),Jg(i._repo,i,o)}class Gs{}class $y extends Gs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Io("endAt",this._value,t._path,!0);const e=dg(t._queryParams,this._value,this._key);if(Za(e),cs(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qr(t._repo,t._path,e,t._orderByCalled)}}class Wy extends Gs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Io("endBefore",this._value,t._path,!1);const e=function BE(i,t,e){let o,l;return i.index_===Us?("string"==typeof t&&(t=xE(t)),l=dg(i,t,e)):(o=null==e?Go:xE(e),l=dg(i,t,o)),l.endBeforeSet_=!0,l}(t._queryParams,this._value,this._key);if(Za(e),cs(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qr(t._repo,t._path,e,t._orderByCalled)}}class Gy extends Gs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Io("startAt",this._value,t._path,!0);const e=cg(t._queryParams,this._value,this._key);if(Za(e),cs(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qr(t._repo,t._path,e,t._orderByCalled)}}class w0 extends Gs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Io("startAfter",this._value,t._path,!1);const e=function UE(i,t,e){let o;if(i.index_===Us)"string"==typeof t&&(t=is(t)),o=cg(i,t,e);else{let l;l=null==e?vo:is(e),o=cg(i,t,l)}return o.startAfterSet_=!0,o}(t._queryParams,this._value,this._key);if(Za(e),cs(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qr(t._repo,t._path,e,t._orderByCalled)}}class b0 extends Gs{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qr(t._repo,t._path,function FE(i,t){const e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class D0 extends Gs{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qr(t._repo,t._path,function LE(i,t){const e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class T0 extends Gs{constructor(t){super(),this._path=t}_apply(t){xf(t,"orderByChild");const e=new Ht(this._path);if(Et(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new sg(e),l=Zl(t._queryParams,o);return cs(l),new qr(t._repo,t._path,l,!0)}}class S0 extends Gs{_apply(t){xf(t,"orderByKey");const e=Zl(t._queryParams,Us);return cs(e),new qr(t._repo,t._path,e,!0)}}class Yy extends Gs{_apply(t){xf(t,"orderByPriority");const e=Zl(t._queryParams,Kt);return cs(e),new qr(t._repo,t._path,e,!0)}}class R0 extends Gs{_apply(t){xf(t,"orderByValue");const e=Zl(t._queryParams,V_);return cs(e),new qr(t._repo,t._path,e,!0)}}class pm extends Gs{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Io("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $y(this._value,this._key)._apply(new Gy(this._value,this._key)._apply(t))}}function hs(i,...t){let e=(0,N.m9)(i);for(const o of t)e=o._apply(e);return e}(function QE(i){(0,N.hu)(!hc,"__referenceConstructor has already been defined"),hc=i})(ds),function e0(i){(0,N.hu)(!Mg,"__referenceConstructor has already been defined"),Mg=i}(ds);const gm={};function Jy(i,t,e,o,l){let d=o||i.options.databaseURL;void 0===d&&(i.options.projectId||Di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qn("Using default host for project ",i.options.projectId),d=`${i.options.projectId}-default-rtdb.firebaseio.com`);let b,R,g=sm(d,l),E=g.repoInfo;"undefined"!=typeof process&&(R=process.env.FIREBASE_DATABASE_EMULATOR_HOST),R?(b=!0,d=`http://${R}?ns=${E.namespace}`,g=sm(d,l),E=g.repoInfo):b=!g.repoInfo.secure;const U=l&&b?new Bh(Bh.OWNER):new tI(i.name,i.options,t);Ay("Invalid Firebase Database URL",g),Et(g.path)||Di("Database URL must point to the root of a Firebase Database (not including a child path).");const O=function O0(i,t,e,o){let l=gm[t.name];l||(l={},gm[t.name]=l);let d=l[i.toURLString()];return d&&Di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new My(i,false,e,o),l[i.toURLString()]=d,d}(E,i,U,new eI(i.name,e));return new Xy(O,i)}class Xy{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Py(i,t,e){if(i.stats_=Pa(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Ba(i.repoInfo_,(o,l,d,g)=>{Zg(i,o,l,d,g)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>qg(i,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(e)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new Fa(i.repoInfo_,t,(o,l,d,g)=>{Zg(i,o,l,d,g)},o=>{qg(i,o)},o=>{!function nu(i,t){_r(t,(e,o)=>{Kg(i,e,o)})}(i,o)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=function Wp(i,t){const e=i.toString();return Gl[e]||(Gl[e]=t()),Gl[e]}(i.repoInfo_,()=>new lc(i.stats_,i.server_)),i.infoData_=new VE,i.infoSyncTree_=new py({startListening:(o,l,d,g)=>{let E=[];const b=i.infoData_.getNode(o._path);return b.isEmpty()||(E=Ad(i.infoSyncTree_,o._path,b),setTimeout(()=>{g("ok")},0)),E},stopListening:()=>{}}),Kg(i,"connected",!1),i.serverSyncTree_=new py({startListening:(o,l,d,g)=>(i.server_.listen(o,d,l,(E,b)=>{const R=g(E,b);Ai(i.eventQueue_,o._path,R)}),[]),stopListening:(o,l)=>{i.server_.unlisten(o,l)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ds(this._repo,Bt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N0(i,t){const e=gm[t];(!e||e[i.key]!==i)&&Di(`Database ${t}(${i.repoInfo_}) has already been deleted.`),Oy(i),delete e[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Di("Cannot call "+t+" on a deleted database.")}}function V0(i,t){lE(i,t)}const H0={".sv":"timestamp"};class tv{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fa.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)},Fa.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)},function j0(i){c_(Hl.SDK_VERSION),(0,Hl._registerComponent)(new Vl.wA("database",(t,{instanceIdentifier:e})=>Jy(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Hl.registerVersion)(l_,"0.12.7",i),(0,Hl.registerVersion)(l_,"0.12.7","esm2017")}();const W0=new xh.Yd("@firebase/database-compat"),nv=function(i){W0.warn("FIREBASE WARNING: "+i)};class iv{constructor(t){this._delegate=t}cancel(t){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),o=>t(o)),e}remove(t){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),o=>t(o)),e}set(t,e){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",e,!0);const o=this._delegate.set(t);return e&&o.then(()=>e(null),l=>e(l)),o}setWithPriority(t,e,o){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",o,!0);const l=this._delegate.setWithPriority(t,e);return o&&l.then(()=>o(null),d=>o(d)),l}update(t,e){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const l={};for(let d=0;d<t.length;++d)l[""+d]=t[d];t=l,nv("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",e,!0);const o=this._delegate.update(t);return e&&o.then(()=>e(null),l=>e(l)),o}}class EI{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ya{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Nd("DataSnapshot.child","path",t,!1),new Ya(this._database,this._delegate.child(t))}hasChild(t){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Nd("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ya(this._database,e)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ri(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ln{constructor(t,e){this.database=t,this._delegate=e}on(t,e,o,l){var d;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",e,!1);const g=Ln.getCancelAndContextArgs_("Query.on",o,l),E=(R,U)=>{e.call(g.context,new Ya(this.database,R),U)};E.userCallback=e,E.context=g.context;const b=null===(d=g.cancel)||void 0===d?void 0:d.bind(g.context);switch(t){case"value":return dm(this._delegate,E,b),e;case"child_added":return Vy(this._delegate,E,b),e;case"child_removed":return jy(this._delegate,E,b),e;case"child_changed":return hm(this._delegate,E,b),e;case"child_moved":return Ic(this._delegate,E,b),e;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,o){if((0,N.Dv)("Query.off",0,3,arguments.length),function(i,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,N.Wj)("Query.off","callback",e,!0),(0,N.lb)("Query.off","context",o,!0),e){const l=()=>{};l.userCallback=e,l.context=o,Hy(this._delegate,t,l)}else Hy(this._delegate,t)}get(){return _I(this._delegate).then(t=>new Ya(this.database,t))}once(t,e,o,l){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",e,!0);const d=Ln.getCancelAndContextArgs_("Query.once",o,l),g=new N.BH,E=(R,U)=>{const O=new Ya(this.database,R);e&&e.call(d.context,O,U),g.resolve(O)};E.userCallback=e,E.context=d.context;const b=R=>{d.cancel&&d.cancel.call(d.context,R),g.reject(R)};switch(t){case"value":dm(this._delegate,E,b,{onlyOnce:!0});break;case"child_added":Vy(this._delegate,E,b,{onlyOnce:!0});break;case"child_removed":jy(this._delegate,E,b,{onlyOnce:!0});break;case"child_changed":hm(this._delegate,E,b,{onlyOnce:!0});break;case"child_moved":Ic(this._delegate,E,b,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return g.promise}limitToFirst(t){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Ln(this.database,hs(this._delegate,function Zy(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new b0(i)}(t)))}limitToLast(t){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Ln(this.database,hs(this._delegate,function qy(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new D0(i)}(t)))}orderByChild(t){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Ln(this.database,hs(this._delegate,function fm(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nd("orderByChild","path",i,!1),new T0(i)}(t)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Ln(this.database,hs(this._delegate,function Ky(){return new S0}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Ln(this.database,hs(this._delegate,function A0(){return new Yy}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Ln(this.database,hs(this._delegate,function k0(){return new R0}()))}startAt(t=null,e){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Ln(this.database,hs(this._delegate,function wc(i=null,t){return xd("startAt","key",t,!0),new Gy(i,t)}(t,e)))}startAfter(t=null,e){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Ln(this.database,hs(this._delegate,function zy(i,t){return xd("startAfter","key",t,!0),new w0(i,t)}(t,e)))}endAt(t=null,e){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Ln(this.database,hs(this._delegate,function C0(i,t){return xd("endAt","key",t,!0),new $y(i,t)}(t,e)))}endBefore(t=null,e){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Ln(this.database,hs(this._delegate,function I0(i,t){return xd("endBefore","key",t,!0),new Wy(i,t)}(t,e)))}equalTo(t,e){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Ln(this.database,hs(this._delegate,function M0(i,t){return xd("equalTo","key",t,!0),new pm(i,t)}(t,e)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Ln))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,o){const l={cancel:void 0,context:void 0};if(e&&o)l.cancel=e,(0,N.Wj)(t,"cancel",l.cancel,!0),l.context=o,(0,N.lb)(t,"context",l.context,!0);else if(e)if("object"==typeof e&&null!==e)l.context=e;else{if("function"!=typeof e)throw new Error((0,N.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");l.cancel=e}return l}get ref(){return new Ri(this.database,new ds(this._delegate._repo,this._delegate._path))}}class Ri extends Ln{constructor(t,e){super(t,new qr(e._repo,e._path,new of,!1)),this.database=t,this._delegate=e}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ri(this.database,qa(this._delegate,t))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ri(this.database,t):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Ri(this.database,this._delegate.root)}set(t,e){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",e,!0);const o=um(this._delegate,t);return e&&o.then(()=>e(null),l=>e(l)),o}update(t,e){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const l={};for(let d=0;d<t.length;++d)l[""+d]=t[d];t=l,nv("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}us("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",e,!0);const o=mI(this._delegate,t);return e&&o.then(()=>e(null),l=>e(l)),o}setWithPriority(t,e,o){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",o,!0);const l=function gI(i,t,e){if(us("setWithPriority",i._path),Io("setWithPriority",t,i._path,!1),Hg("setWithPriority",e,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const o=new N.BH;return xy(i._repo,i._path,t,e,o.wrapCallback(()=>{})),o.promise}(this._delegate,t,e);return o&&l.then(()=>o(null),d=>o(d)),l}remove(t){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",t,!0);const e=function By(i){return us("remove",i._path),um(i,null)}(this._delegate);return t&&e.then(()=>t(null),o=>t(o)),e}transaction(t,e,o){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,N.Wj)("Reference.transaction","onComplete",e,!0),function(i,t,e,o){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const l=function ym(i,t,e){var o;if(i=(0,N.m9)(i),us("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const l=null===(o=null==e?void 0:e.applyLocally)||void 0===o||o,d=new N.BH,E=dm(i,()=>{});return function Pf(i,t,e,o,l,d){Ec(i,"transaction on "+t);const g={path:t,update:e,onComplete:o,status:null,order:Oh(),applyLocally:d,retryCount:0,unwatcher:l,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},E=gn(i,t,void 0);g.currentInputSnapshot=E;const b=g.update(E.val());if(void 0===b)g.unwatcher(),g.currentOutputSnapshotRaw=null,g.currentOutputSnapshotResolved=null,g.onComplete&&g.onComplete(null,!1,g.currentInputSnapshot);else{Pd("transaction failed: Data returned ",b,g.path),g.status=0;const R=Df(i.transactionQueueTree_,t),U=za(R)||[];let O;U.push(g),Tf(R,U),"object"==typeof b&&null!==b&&(0,N.r3)(b,".priority")?(O=(0,N.DV)(b,".priority"),(0,N.hu)(Md(O),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):O=(Rd(i.serverSyncTree_,t)||mt.EMPTY_NODE).getPriority().val();const Q=yc(i),ge=Cn(b,O),Me=wf(ge,E,Q);g.currentOutputSnapshotRaw=ge,g.currentOutputSnapshotResolved=Me,g.currentWriteId=kf(i);const Ke=kn(i.serverSyncTree_,t,Me,g.currentWriteId,g.applyLocally);Ai(i.eventQueue_,t,Ke),Xg(i,i.transactionQueueTree_)}}(i._repo,i._path,t,(b,R,U)=>{let O=null;b?d.reject(b):(O=new ru(U,new ds(i._repo,i._path),Kt),d.resolve(new tv(R,O)))},E,l),d.promise}(this._delegate,t,{applyLocally:o}).then(d=>new EI(d.committed,new Ya(this.database,d.snapshot)));return e&&l.then(d=>e(null,d.committed,d.snapshot),d=>e(d,!1,null)),l}setPriority(t,e){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",e,!0);const o=function E0(i,t){i=(0,N.m9)(i),us("setPriority",i._path),Hg("setPriority",t,!1);const e=new N.BH;return xy(i._repo,pn(i._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&o.then(()=>e(null),l=>e(l)),o}push(t,e){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",e,!0);const o=function v0(i,t){i=(0,N.m9)(i),us("push",i._path),Io("push",t,i._path,!0);const e=zg(i._repo),o=aI(e),l=qa(i,o),d=qa(i,o);let g;return g=null!=t?um(d,t).then(()=>d):Promise.resolve(d),l.then=g.then.bind(g),l.catch=g.then.bind(g,void 0),l}(this._delegate,t),l=o.then(g=>new Ri(this.database,g));e&&l.then(()=>e(null),g=>e(g));const d=new Ri(this.database,o);return d.then=l.then.bind(l),d.catch=l.catch.bind(l,void 0),d}onDisconnect(){return us("Reference.onDisconnect",this._delegate._path),new iv(new am(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wo{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,o={}){!function U0(i,t,e,o={}){(i=(0,N.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Di("Cannot call useEmulator() after instance has already been initialized.");const l=i._repoInternal;let d;if(l.repoInfo_.nodeAdmin)o.mockUserToken&&Di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Bh(Bh.OWNER);else if(o.mockUserToken){const g="string"==typeof o.mockUserToken?o.mockUserToken:(0,N.Sg)(o.mockUserToken,i.app.options.projectId);d=new Bh(g)}!function x0(i,t,e,o){i.repoInfo_=new md(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}(l,t,e,d)}(this._delegate,t,e,o)}ref(t){if((0,N.Dv)("database.ref",0,1,arguments.length),t instanceof Ri){const e=lm(this._delegate,t.toString());return new Ri(this,e)}{const e=Uy(this._delegate,t);return new Ri(this,e)}}refFromURL(t){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const o=lm(this._delegate,t);return new Ri(this,o)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function B0(i){(i=(0,N.m9)(i))._checkNotDeleted("goOffline"),Oy(i._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function ev(i){(i=(0,N.m9)(i))._checkNotDeleted("goOnline"),function Mf(i){i.persistentConnection_&&i.persistentConnection_.resume(Gg)}(i._repo)}(this._delegate)}}wo.ServerValue={TIMESTAMP:function mm(){return H0}(),increment:i=>function _m(i){return{".sv":{increment:i}}}(i)};var z0=Object.freeze({__proto__:null,initStandalone:function Bd({app:i,url:t,version:e,customAuthImpl:o,namespace:l,nodeAdmin:d=!1}){c_(e);const g=new Vl.zt("auth-internal",new Vl.H0("database-standalone"));return g.setComponent(new Vl.wA("auth-internal",()=>o,"PRIVATE")),{instance:new wo(Jy(i,g,void 0,t,d),i),namespace:l}}});const CI=wo.ServerValue;!function sv(i){i.INTERNAL.registerComponent(new Vl.wA("database-compat",(t,{instanceIdentifier:e})=>{const o=t.getProvider("app-compat").getImmediate(),l=t.getProvider("database").getImmediate({identifier:e});return new wo(l,o)},"PUBLIC").setServiceProps({Reference:Ri,Query:Ln,Database:wo,DataSnapshot:Ya,enableLogging:V0,INTERNAL:z0,ServerValue:CI}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.7")}(aE.Z);var Nf=M(5363),Z0=M(6063);class q0 extends Fn.x{constructor(t=1/0,e=1/0,o=Z0.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:o,_infiniteTimeWindow:l,_timestampProvider:d,_windowTime:g}=this;e||(o.push(t),!l&&o.push(d.now()+g)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:o,_buffer:l}=this,d=l.slice();for(let g=0;g<d.length&&!t.closed;g+=o?1:2)t.next(d[g]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:l}=this,d=(l?1:2)*t;if(t<1/0&&d<o.length&&o.splice(0,o.length-d),!l){const g=e.now();let E=0;for(let b=1;b<o.length&&o[b]<=g;b+=2)E=b;E&&o.splice(0,E+1)}}}function ov(i,t,e){let o,l=!1;return i&&"object"==typeof i?({bufferSize:o=1/0,windowTime:t=1/0,refCount:l=!1,scheduler:e}=i):o=null!=i?i:1/0,(0,nE.B)({connector:()=>new q0(o,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function Em(i,t){return(0,Oo.m)(t)?rn(()=>i,t):rn(()=>i)}var Of=M(9468);M(5867);const lv=new Map,SI={activated:!1,tokenObservers:[]},uv={initialized:!1,enabled:!1};function Er(i){return lv.get(i)||SI}function fs(i,t){lv.set(i,t)}function bc(){return uv}class nC{constructor(t,e,o,l,d){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=o,this.lowerBound=l,this.upperBound=d,this.pending=null,this.nextErrorWaitInterval=l,l>d)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,jl.Z)(function*(){e.stop();try{e.pending=new N.BH,yield function rC(i){return new Promise(t=>{setTimeout(t,i)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new N.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(o){e.retryPolicy(o)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Kr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wm(i){if(!Er(i).activated)throw Kr.create("use-before-activation",{appName:i.name})}function Bf(i,t){return bm.apply(this,arguments)}function bm(){return(bm=(0,jl.Z)(function*({url:i,body:t},e){const o={"Content-Type":"application/json"},l=e.getImmediate({optional:!0});if(l){const O=yield l.getHeartbeatsHeader();O&&(o["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(t),headers:o};let g,E;try{g=yield fetch(i,d)}catch(O){throw Kr.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==g.status)throw Kr.create("fetch-status-error",{httpStatus:g.status});try{E=yield g.json()}catch(O){throw Kr.create("fetch-parse-error",{originalErrorMessage:O.message})}const b=E.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const R=1e3*Number(b[1]),U=Date.now();return{token:E.attestationToken,expireTimeMillis:U+R,issuedAtTimeMillis:U}})).apply(this,arguments)}function aC(i,t){const{projectId:e,appId:o,apiKey:l}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${o}:exchangeDebugToken?key=${l}`,body:{debug_token:t}}}const Wd="firebase-app-check-store";let Vf=null;function jf(){return Vf||(Vf=new Promise((i,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=o=>{i(o.target.result)},e.onerror=o=>{var l;t(Kr.create("storage-open",{originalErrorMessage:null===(l=o.target.error)||void 0===l?void 0:l.message}))},e.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Wd,{keyPath:"compositeKey"})}}catch(e){t(Kr.create("storage-open",{originalErrorMessage:e.message}))}}),Vf)}function Tm(){return(Tm=(0,jl.Z)(function*(i,t){const o=(yield jf()).transaction(Wd,"readwrite"),d=o.objectStore(Wd).put({compositeKey:i,value:t});return new Promise((g,E)=>{d.onsuccess=b=>{g()},o.onerror=b=>{var R;E(Kr.create("storage-set",{originalErrorMessage:null===(R=b.target.error)||void 0===R?void 0:R.message}))}})})).apply(this,arguments)}const Zd=new xh.Yd("@firebase/app-check");function Sm(i,t){return(0,N.hl)()?function cC(i,t){return function hv(i,t){return Tm.apply(this,arguments)}(function zd(i){return`${i.options.appId}-${i.name}`}(i),t)}(i,t).catch(e=>{Zd.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function pv(){return bc().enabled}function gv(){return mv.apply(this,arguments)}function mv(){return(mv=(0,jl.Z)(function*(){const i=bc();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const km={error:"UNKNOWN_ERROR"};function _v(i){return N.US.encodeString(JSON.stringify(i),!1)}function Sc(i){return qd.apply(this,arguments)}function qd(){return(qd=(0,jl.Z)(function*(i,t=!1){const e=i.app;wm(e);const o=Er(e);let d,l=o.token;if(!l){const b=yield o.cachedTokenPromise;b&&Ac(b)&&(l=b)}if(!t&&l&&Ac(l))return{token:l.token};let E,g=!1;if(pv()){o.exchangeTokenPromise||(o.exchangeTokenPromise=Bf(aC(e,yield gv()),i.heartbeatServiceProvider).then(R=>(o.exchangeTokenPromise=void 0,R)),g=!0);const b=yield o.exchangeTokenPromise;return yield Sm(e,b),fs(e,Object.assign(Object.assign({},o),{token:b})),{token:b.token}}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().then(b=>(o.exchangeTokenPromise=void 0,b)),g=!0),l=yield o.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Zd.warn(b.message):Zd.error(b),d=b}return l?(E={token:l.token},fs(e,Object.assign(Object.assign({},o),{token:l})),yield Sm(e,l)):E=vv(d),g&&xm(e,E),E})).apply(this,arguments)}function Pm(i,t){const e=Er(i),o=e.tokenObservers.filter(l=>l.next!==t);0===o.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),fs(i,Object.assign(Object.assign({},e),{tokenObservers:o}))}function yv(i){const{app:t}=i,e=Er(t);let o=e.tokenRefresher;o||(o=function hC(i){const{app:t}=i;return new nC((0,jl.Z)(function*(){let o;if(o=Er(t).token?yield Sc(i,!0):yield Sc(i),o.error)throw o.error}),()=>!0,()=>{const e=Er(t);if(e.token){let o=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return o=Math.min(o,e.token.expireTimeMillis-3e5),Math.max(0,o-Date.now())}return 0},3e4,96e4)}(i),fs(t,Object.assign(Object.assign({},e),{tokenRefresher:o}))),!o.isRunning()&&e.isTokenAutoRefreshEnabled&&o.start()}function xm(i,t){const e=Er(i).tokenObservers;for(const o of e)try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch(l){}}function Ac(i){return i.expireTimeMillis-Date.now()>0}function vv(i){return{token:_v(km),error:i}}class fC{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Er(this.app);for(const e of t)Pm(this.app,e.next);return Promise.resolve()}}const Pv="app-check-internal";!function xv(){(0,Hl._registerComponent)(new Vl.wA("app-check",i=>function Ev(i,t){return new fC(i,t)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,t,e)=>{i.getProvider(Pv).initialize()})),(0,Hl._registerComponent)(new Vl.wA(Pv,i=>function Cv(i){return{getToken:t=>Sc(i,t),addTokenListener:t=>function Mm(i,t,e,o){const{app:l}=i,d=Er(l),g={next:e,error:o,type:t};if(fs(l,Object.assign(Object.assign({},d),{tokenObservers:[...d.tokenObservers,g]})),d.token&&Ac(d.token)){const E=d.token;Promise.resolve().then(()=>{e({token:E.token}),yv(i)}).catch(()=>{})}d.cachedTokenPromise.then(()=>yv(i))}(i,"INTERNAL",t),removeTokenListener:t=>Pm(i.app,t)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hl.registerVersion)("@firebase/app-check","0.5.5")}();class Lm{constructor(){return(0,Tn.vb)("app-check")}}"undefined"!=typeof window&&window;var Uv=M(127);const Um=new p.OlP("angularfire2.auth.use-emulator"),Vv=new p.OlP("angularfire2.auth.settings"),jv=new p.OlP("angularfire2.auth.tenant-id"),wC=new p.OlP("angularfire2.auth.langugage-code"),Bm=new p.OlP("angularfire2.auth.use-device-language"),bC=new p.OlP("angularfire.auth.persistence"),DC=(i,t,e,o,l,d,g,E)=>(0,Os.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const b=t.runOutsideAngular(()=>i.auth());if(e&&b.useEmulator(...e),o&&(b.tenantId=o),b.languageCode=l,d&&b.useDeviceLanguage(),g)for(const[R,U]of Object.entries(g))b.settings[R]=U;return E&&b.setPersistence(E),b},[e,o,l,d,g,E]);let TC=(()=>{class i{constructor(e,o,l,d,g,E,b,R,U,O,Q,ge){const Me=new Fn.x,Ke=it(void 0).pipe((0,Nf.Q)(g.outsideAngular),rn(()=>d.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,4087)))),(0,Rt.U)(()=>(0,Os.on)(e,d,o)),(0,Rt.U)(kt=>DC(kt,d,E,R,U,O,b,Q)),ov({bufferSize:1,refCount:!1}));if(function Hn(i){return"server"===i}(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Ke.pipe(Qi()).subscribe();const Jn=Ke.pipe(rn(mn=>mn.getRedirectResult().then(ps=>ps,()=>null)),Tn.iC,ov({bufferSize:1,refCount:!1})),en=Ke.pipe(rn(mn=>new Tr.y(ps=>({unsubscribe:d.runOutsideAngular(()=>mn.onAuthStateChanged(Ja=>ps.next(Ja),Ja=>ps.error(Ja),()=>ps.complete()))})))),Nr=Ke.pipe(rn(mn=>new Tr.y(ps=>({unsubscribe:d.runOutsideAngular(()=>mn.onIdTokenChanged(Ja=>ps.next(Ja),Ja=>ps.error(Ja),()=>ps.complete()))}))));this.authState=Jn.pipe(Em(en),(0,Of.R)(g.outsideAngular),(0,Nf.Q)(g.insideAngular)),this.user=Jn.pipe(Em(Nr),(0,Of.R)(g.outsideAngular),(0,Nf.Q)(g.insideAngular)),this.idToken=this.user.pipe(rn(mn=>mn?(0,zn.D)(mn.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(rn(mn=>mn?(0,zn.D)(mn.getIdTokenResult()):it(null))),this.credential=(0,Ph.T)(Jn,Me,this.authState.pipe(Ts(mn=>!mn))).pipe((0,Rt.U)(mn=>(null==mn?void 0:mn.user)?mn:null),(0,Of.R)(g.outsideAngular),(0,Nf.Q)(g.insideAngular))}return(0,Os.pX)(this,Ke,d,{spy:{apply:(kt,Jn,en)=>{(kt.startsWith("signIn")||kt.startsWith("createUser"))&&en.then(Nr=>Me.next(Nr))}}})}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(Os.Dh),p.LFG(Os.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Tn.HU),p.LFG(Um,8),p.LFG(Vv,8),p.LFG(jv,8),p.LFG(wC,8),p.LFG(Bm,8),p.LFG(bC,8),p.LFG(Lm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function SC(i){return null==i}function AC(i){return"function"==typeof i.set}function Xd(i,t){return AC(t)?t:i.ref(t)}function RC(i,t){if(function NI(i){return"string"==typeof i}(i))return t.stringCase();if(AC(i))return t.firebaseCase();if(function OI(i){return"function"==typeof i.exportVal}(i))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function Rc(i,t,e="on",o=Np.z){return new Tr.y(l=>{let d=null;return d=i[e](t,(g,E)=>{o.schedule(()=>{l.next({snapshot:g,prevKey:E})}),"once"===e&&o.schedule(()=>l.complete())},g=>{o.schedule(()=>l.error(g))}),"on"===e?{unsubscribe(){null!=d&&i.off(t,d)}}:{unsubscribe(){}}}).pipe((0,Rt.U)(l=>{const{snapshot:d,prevKey:g}=l;let E=null;return d.exists()&&(E=d.key),{type:t,payload:d,prevKey:g,key:E}}),(0,nE.B)())}function jm(i,t){const e=i.length;for(let o=0;o<e;o++)if(i[o].payload.key===t)return o;return-1}function FI(i,t){const{payload:e,prevKey:o,key:l}=t,d=jm(i,l),g=function Hv(i,t){if(SC(t))return 0;{const e=jm(i,t);return-1===e?i.length:e+1}}(i,o);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let E=null;t.payload.forEach(b=>{const R={payload:b,type:"value",prevKey:E,key:b.key};return E=b.key,i=[...i,R],!1})}return i;case"child_added":if(d>-1){const E=i[d-1];(E&&E.key||null)!==o&&(i=i.filter(b=>b.payload.key!==e.key)).splice(g,0,t)}else{if(null==o)return[t,...i];(i=i.slice()).splice(g,0,t)}return i;case"child_removed":return i.filter(E=>E.payload.key!==e.key);case"child_changed":return i.map(E=>E.payload.key===l?t:E);case"child_moved":if(d>-1){const E=i.splice(d,1)[0];return(i=i.slice()).splice(g,0,E),i}return i;default:return i}}function zf(i){return(SC(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function Hm(i,t,e){return function Vm(i,t,e){return Rc(i,"value","once",e).pipe(rn(o=>{const l=[it(o)];return t.forEach(d=>l.push(Rc(i,d,"on",e))),(0,Ph.T)(...l).pipe(tr(FI,[]))}),function o_(i,t=fr.y){return i=null!=i?i:rE,(0,Zn.e)((e,o)=>{let l,d=!0;e.subscribe((0,fn.x)(o,g=>{const E=t(g);(d||!i(l,E))&&(d=!1,l=E,o.next(g))}))})}())}(i,t=zf(t),e)}function $m(i,t,e){const o=(t=zf(t)).map(l=>Rc(i,l,"on",e));return(0,Ph.T)(...o)}function Gv(i,t){return function(o,l){return RC(o,{stringCase:()=>i.child(o)[t](l),firebaseCase:()=>o[t](l),snapshotCase:()=>o.ref[t](l)})}}function Wm(i){return function(e){return e?RC(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function MC(i,t){return function(){return Rc(i,"value","on",t)}}const BI=new p.OlP("angularfire2.realtimeDatabaseURL"),PC=new p.OlP("angularfire2.database.use-emulator");let zv=(()=>{class i{constructor(e,o,l,d,g,E,b,R,U,O,Q,ge,Me,Ke,kt){this.schedulers=E;const Jn=b,en=(0,Os.on)(e,g,o);R&&DC(en,g,U,Q,ge,Me,O,Ke),this.database=(0,Os.cc)(`${en.name}.database.${l}`,"AngularFireDatabase",en.name,()=>{const Nr=g.runOutsideAngular(()=>en.database(l||void 0));return Jn&&Nr.useEmulator(...Jn),Nr},[Jn])}list(e,o){const l=this.schedulers.ngZone.runOutsideAngular(()=>Xd(this.database,e));let d=l;return o&&(d=o(l)),function kC(i,t){const e=t.schedulers.outsideAngular,o=t.schedulers.ngZone.run(()=>i.ref);return{query:i,update:Gv(o,"update"),set:Gv(o,"set"),push:l=>o.push(l),remove:Wm(o),snapshotChanges:l=>Hm(i,l,e).pipe(Tn.iC),stateChanges:l=>$m(i,l,e).pipe(Tn.iC),auditTrail:l=>function $v(i,t,e){return function Wv(i,t,e){return function LI(i,t){return Rc(i,"value","on",t).pipe((0,Rt.U)(e=>{let o;return e.payload.forEach(l=>(o=l.key,!1)),{data:e,lastKeyToLoad:o}}))}(i,e).pipe(function iE(...i){const t=(0,hn.jO)(i);return(0,Zn.e)((e,o)=>{const l=i.length,d=new Array(l);let g=i.map(()=>!1),E=!1;for(let b=0;b<l;b++)(0,so.Xf)(i[b]).subscribe((0,fn.x)(o,R=>{d[b]=R,!E&&!g[b]&&(g[b]=!0,(E=g.every(fr.y))&&(g=null))},a_.Z));e.subscribe((0,fn.x)(o,b=>{if(E){const R=[b,...d];o.next(t?t(...R):R)}}))})}(t),(0,Rt.U)(([l,d])=>{const g=l.lastKeyToLoad,E=d.map(b=>b.key);return{actions:d,lastKeyToLoad:g,loadedKeys:E}}),function sE(i){return(0,Zn.e)((t,e)=>{let o=!1,l=0;t.subscribe((0,fn.x)(e,d=>(o||(o=!i(d,l++)))&&e.next(d)))})}(l=>-1===l.loadedKeys.indexOf(l.lastKeyToLoad)),(0,Rt.U)(l=>l.actions))}(i,$m(i,t).pipe(tr((l,d)=>[...l,d],[])),e)}(i,l,e).pipe(Tn.iC),valueChanges:(l,d)=>Hm(i,l,e).pipe((0,Rt.U)(E=>E.map(b=>d&&d.idField?Object.assign(Object.assign({},b.payload.val()),{[d.idField]:b.key}):b.payload.val())),Tn.iC)}}(d,this)}object(e){return function UI(i,t){return{query:i,snapshotChanges:()=>MC(i,t.schedulers.outsideAngular)().pipe(Tn.iC),update:e=>i.ref.update(e),set:e=>i.ref.set(e),remove:()=>i.ref.remove(),valueChanges:()=>MC(i,t.schedulers.outsideAngular)().pipe(Tn.iC,(0,Rt.U)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Xd(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(e){return new(e||i)(p.LFG(Os.Dh),p.LFG(Os.xv,8),p.LFG(BI,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Tn.HU),p.LFG(PC,8),p.LFG(TC,8),p.LFG(Um,8),p.LFG(Vv,8),p.LFG(jv,8),p.LFG(wC,8),p.LFG(Bm,8),p.LFG(bC,8),p.LFG(Lm,8))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),xC=(()=>{class i{constructor(){Uv.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i}),i.\u0275inj=p.cJS({providers:[zv]}),i})(),VI=(()=>{class i{constructor(e){this.title="Chess-Engineer",this.cssTextImg="width: 90%;height: 90%;margin-top: 4%;",this.gameStatus=new Map,this.chessBoard=new Map,this.gamestatusWithImgSrc=new Map,this.gameStatusArr=[],this.gameStatusArrWhite=[],this.gameStatusArrBlack=[],this.playerTurn=[],this.suggestedTestArr=[""],this.indexTurn=0,this.currentSelectedAndSuggestedBoxes=[],this.oldBoxesBackgroundColor="",this.oldSelectedBoxCode=[""],this._isClicked=!1,this.previousCode="",this.objColor="",this._initializationBox=new tE(this.chessBoard,this.gameStatus,this.gamestatusWithImgSrc,this.gameStatusArr,this.gameStatusArrWhite,this.gameStatusArrBlack),this._GameFunctions=new eE,e.list("/Game").valueChanges().forEach(o=>{console.log(o)})}ngOnInit(){this._initializationBox.inializeAllBox();for(let e=0;e<150;e++)this.playerTurn.push(1),this.playerTurn.push(0)}boxClicked(e){let o;if(console.log(e),console.log(this.suggestedTestArr),"a7a"!=this._GameFunctions.getByValue(this.gameStatus,e)&&(this.objColor=this._GameFunctions.getByValue(this.gameStatus,e)),this.objColor=this.objColor.slice(0,5),console.log(this.objColor),o="black"==this.objColor?0:1,o==this.playerTurn[this.indexTurn]){if(this.gameStatusArr.includes(e))console.log("fergan1"),this.getSuggestedMoves(e),this.saveBackgroundColor(e),this.applyStyleChangesToSuggestedMoves(this.currentSelectedAndSuggestedBoxes),this.suggestedTestArr=this.currentSelectedAndSuggestedBoxes.splice(1),this.currentSelectedAndSuggestedBoxes=[],console.log(this.suggestedTestArr);else if(this.suggestedTestArr.includes(e)){console.log("fergany2"),this.clearBackgroundSelected(),this._GameFunctions.removeChessObj(this.previousCode);let l=this._GameFunctions.getByKey(this.gamestatusWithImgSrc,this.previousCode);console.log(this.previousCode),console.log(this.gamestatusWithImgSrc),this._initializationBox.boxInitialization(l,e),this.suggestedTestArr=[],this.updateMove(this.previousCode,e,l),this.indexTurn+=1}}else if(this.suggestedTestArr.includes(e)){console.log("fergany2"),this.clearBackgroundSelected(),this._GameFunctions.removeChessObj(this.previousCode),this._GameFunctions.removeChessObj(e);let l=this._GameFunctions.getByKey(this.gamestatusWithImgSrc,this.previousCode);console.log(this.previousCode),console.log(this.gamestatusWithImgSrc),this._initializationBox.boxInitialization(l,e),this.suggestedTestArr=[],this.updateMove(this.previousCode,e,l),this.indexTurn+=1}this.previousCode=e,console.log("fergany3"),console.log(this.indexTurn)}updateMove(e,o,l){console.log(this.gameStatusArr),console.log(this.gameStatusArr.indexOf(e)),this.gameStatusArr.splice(this.gameStatusArr.indexOf(e),1),this.gameStatusArr.push(o),console.log(this.gameStatusArr),1==this.playerTurn[this.indexTurn]?(this.gameStatusArrWhite.splice(this.gameStatusArrWhite.indexOf(e),1),this.gameStatusArrWhite.push(o)):(this.gameStatusArrBlack.splice(this.gameStatusArrBlack.indexOf(e),1),this.gameStatusArrBlack.push(o)),this.gamestatusWithImgSrc.set(o,l),this.gamestatusWithImgSrc.delete(e),this.gameStatus.set(this._GameFunctions.getByValue(this.gameStatus,e),o)}getSuggestedMoves(e){this.currentSelectedAndSuggestedBoxes.push(e);let o=this._GameFunctions.getByValue(this.gameStatus,e),l=new s_(o,parseInt(e),this.gameStatusArr,this.gameStatusArrWhite,this.gameStatusArrBlack);l.suggestedMoves(),l.getSuggestedMoves().forEach(d=>{this.currentSelectedAndSuggestedBoxes.push(d)})}saveBackgroundColor(e){if(this._isClicked=e!=this.oldSelectedBoxCode[0],this._isClicked){let o=document.getElementById(this.currentSelectedAndSuggestedBoxes[0]);this.oldBoxesBackgroundColor=o.style.backgroundColor}}applyStyleChangesToSuggestedMoves(e){e[0]!=this.oldSelectedBoxCode[0]?(this.clearBackgroundSelected(),e.forEach(o=>{o==e[0]?document.getElementById(o).style.cssText="background-color: #BACA2B;":this._GameFunctions.divInside(o)})):"rgb(186, 202, 43)"==document.getElementById(e[0]).style.backgroundColor?(this._GameFunctions.removeDiv(),document.getElementById(this.oldSelectedBoxCode[0]).style.cssText="background-color:"+this.oldBoxesBackgroundColor+";"):e.forEach(l=>{l==e[0]?document.getElementById(l).style.cssText="background-color: #BACA2B;":this._GameFunctions.divInside(l)}),this.oldBoxesBackgroundColor="",this.oldSelectedBoxCode=e}clearBackgroundSelected(){""!=this.oldSelectedBoxCode[0]&&(this._GameFunctions.removeDiv(),document.getElementById(this.oldSelectedBoxCode[0]).style.cssText="background-color:"+this.oldBoxesBackgroundColor[0]+";")}}return i.\u0275fac=function(e){return new(e||i)(p.Y36(zv))},i.\u0275cmp=p.Xpm({type:i,selectors:[["app-root"]],decls:134,vars:0,consts:[[1,"game"],[1,"grid"],[1,"border_box_horizntal","border_box_special1"],[1,"border_box_horizntal"],[1,"border_box_horizntal","border_box_special2"],[1,"border_box_vertical"],["id","18",1,"black_box",3,"click"],["id","28",1,"white_box",3,"click"],["id","38",1,"black_box",3,"click"],["id","48",1,"white_box",3,"click"],["id","58",1,"black_box",3,"click"],["id","68",1,"white_box",3,"click"],["id","78",1,"black_box",3,"click"],["id","88",1,"white_box",3,"click"],["id","17",1,"white_box",3,"click"],["id","27",1,"black_box",3,"click"],["id","37",1,"white_box",3,"click"],["id","47",1,"black_box",3,"click"],["id","57",1,"white_box",3,"click"],["id","67",1,"black_box",3,"click"],["id","77",1,"white_box",3,"click"],["id","87",1,"black_box",3,"click"],["id","16",1,"black_box",3,"click"],["id","26",1,"white_box",3,"click"],["id","36",1,"black_box",3,"click"],["id","46",1,"white_box",3,"click"],["id","56",1,"black_box",3,"click"],["id","66",1,"white_box",3,"click"],["id","76",1,"black_box",3,"click"],["id","86",1,"white_box",3,"click"],["id","15",1,"white_box",3,"click"],["id","25",1,"black_box",3,"click"],["id","35",1,"white_box",3,"click"],["id","45",1,"black_box",3,"click"],["id","55",1,"white_box",3,"click"],["id","65",1,"black_box",3,"click"],["id","75",1,"white_box",3,"click"],["id","85",1,"black_box",3,"click"],["id","14",1,"black_box",3,"click"],["id","24",1,"white_box",3,"click"],["id","34",1,"black_box",3,"click"],["id","44",1,"white_box",3,"click"],["id","54",1,"black_box",3,"click"],["id","64",1,"white_box",3,"click"],["id","74",1,"black_box",3,"click"],["id","84",1,"white_box",3,"click"],["id","13",1,"white_box",3,"click"],["id","23",1,"black_box",3,"click"],["id","33",1,"white_box",3,"click"],["id","43",1,"black_box",3,"click"],["id","53",1,"white_box",3,"click"],["id","63",1,"black_box",3,"click"],["id","73",1,"white_box",3,"click"],["id","83",1,"black_box",3,"click"],["id","12",1,"black_box",3,"click"],["id","22",1,"white_box",3,"click"],["id","32",1,"black_box",3,"click"],["id","42",1,"white_box",3,"click"],["id","52",1,"black_box",3,"click"],["id","62",1,"white_box",3,"click"],["id","72",1,"black_box",3,"click"],["id","82",1,"white_box",3,"click"],["id","11",1,"white_box",3,"click"],["id","21",1,"black_box",3,"click"],["id","31",1,"white_box",3,"click"],["id","41",1,"black_box",3,"click"],["id","51",1,"white_box",3,"click"],["id","61",1,"black_box",3,"click"],["id","71",1,"white_box",3,"click"],["id","81",1,"black_box",3,"click"],[1,"border_box_horizntal","border_box_special3"],[1,"border_box_horizntal","border_box_special4"]],template:function(e,o){1&e&&(p.TgZ(0,"div",0)(1,"div",1),p._UZ(2,"div",2),p.TgZ(3,"div",3),p._uU(4,"a"),p.qZA(),p.TgZ(5,"div",3),p._uU(6,"b"),p.qZA(),p.TgZ(7,"div",3),p._uU(8,"c"),p.qZA(),p.TgZ(9,"div",3),p._uU(10,"d"),p.qZA(),p.TgZ(11,"div",3),p._uU(12,"e"),p.qZA(),p.TgZ(13,"div",3),p._uU(14,"f"),p.qZA(),p.TgZ(15,"div",3),p._uU(16,"g"),p.qZA(),p.TgZ(17,"div",3),p._uU(18,"h"),p.qZA(),p._UZ(19,"div",4),p.TgZ(20,"div",5),p._uU(21,"8"),p.qZA(),p.TgZ(22,"div",6),p.NdJ("click",function(){return o.boxClicked("18")}),p.qZA(),p.TgZ(23,"div",7),p.NdJ("click",function(){return o.boxClicked("28")}),p.qZA(),p.TgZ(24,"div",8),p.NdJ("click",function(){return o.boxClicked("38")}),p.qZA(),p.TgZ(25,"div",9),p.NdJ("click",function(){return o.boxClicked("48")}),p.qZA(),p.TgZ(26,"div",10),p.NdJ("click",function(){return o.boxClicked("58")}),p.qZA(),p.TgZ(27,"div",11),p.NdJ("click",function(){return o.boxClicked("68")}),p.qZA(),p.TgZ(28,"div",12),p.NdJ("click",function(){return o.boxClicked("78")}),p.qZA(),p.TgZ(29,"div",13),p.NdJ("click",function(){return o.boxClicked("88")}),p.qZA(),p.TgZ(30,"div",5),p._uU(31,"8"),p.qZA(),p.TgZ(32,"div",5),p._uU(33,"7"),p.qZA(),p.TgZ(34,"div",14),p.NdJ("click",function(){return o.boxClicked("17")}),p.qZA(),p.TgZ(35,"div",15),p.NdJ("click",function(){return o.boxClicked("27")}),p.qZA(),p.TgZ(36,"div",16),p.NdJ("click",function(){return o.boxClicked("37")}),p.qZA(),p.TgZ(37,"div",17),p.NdJ("click",function(){return o.boxClicked("47")}),p.qZA(),p.TgZ(38,"div",18),p.NdJ("click",function(){return o.boxClicked("57")}),p.qZA(),p.TgZ(39,"div",19),p.NdJ("click",function(){return o.boxClicked("67")}),p.qZA(),p.TgZ(40,"div",20),p.NdJ("click",function(){return o.boxClicked("77")}),p.qZA(),p.TgZ(41,"div",21),p.NdJ("click",function(){return o.boxClicked("87")}),p.qZA(),p.TgZ(42,"div",5),p._uU(43,"7"),p.qZA(),p.TgZ(44,"div",5),p._uU(45,"6"),p.qZA(),p.TgZ(46,"div",22),p.NdJ("click",function(){return o.boxClicked("16")}),p.qZA(),p.TgZ(47,"div",23),p.NdJ("click",function(){return o.boxClicked("26")}),p.qZA(),p.TgZ(48,"div",24),p.NdJ("click",function(){return o.boxClicked("36")}),p.qZA(),p.TgZ(49,"div",25),p.NdJ("click",function(){return o.boxClicked("46")}),p.qZA(),p.TgZ(50,"div",26),p.NdJ("click",function(){return o.boxClicked("56")}),p.qZA(),p.TgZ(51,"div",27),p.NdJ("click",function(){return o.boxClicked("66")}),p.qZA(),p.TgZ(52,"div",28),p.NdJ("click",function(){return o.boxClicked("76")}),p.qZA(),p.TgZ(53,"div",29),p.NdJ("click",function(){return o.boxClicked("86")}),p.qZA(),p.TgZ(54,"div",5),p._uU(55,"6"),p.qZA(),p.TgZ(56,"div",5),p._uU(57,"5"),p.qZA(),p.TgZ(58,"div",30),p.NdJ("click",function(){return o.boxClicked("15")}),p.qZA(),p.TgZ(59,"div",31),p.NdJ("click",function(){return o.boxClicked("25")}),p.qZA(),p.TgZ(60,"div",32),p.NdJ("click",function(){return o.boxClicked("35")}),p.qZA(),p.TgZ(61,"div",33),p.NdJ("click",function(){return o.boxClicked("45")}),p.qZA(),p.TgZ(62,"div",34),p.NdJ("click",function(){return o.boxClicked("55")}),p.qZA(),p.TgZ(63,"div",35),p.NdJ("click",function(){return o.boxClicked("65")}),p.qZA(),p.TgZ(64,"div",36),p.NdJ("click",function(){return o.boxClicked("75")}),p.qZA(),p.TgZ(65,"div",37),p.NdJ("click",function(){return o.boxClicked("85")}),p.qZA(),p.TgZ(66,"div",5),p._uU(67,"5"),p.qZA(),p.TgZ(68,"div",5),p._uU(69,"4"),p.qZA(),p.TgZ(70,"div",38),p.NdJ("click",function(){return o.boxClicked("14")}),p.qZA(),p.TgZ(71,"div",39),p.NdJ("click",function(){return o.boxClicked("24")}),p.qZA(),p.TgZ(72,"div",40),p.NdJ("click",function(){return o.boxClicked("34")}),p.qZA(),p.TgZ(73,"div",41),p.NdJ("click",function(){return o.boxClicked("44")}),p.qZA(),p.TgZ(74,"div",42),p.NdJ("click",function(){return o.boxClicked("54")}),p.qZA(),p.TgZ(75,"div",43),p.NdJ("click",function(){return o.boxClicked("64")}),p.qZA(),p.TgZ(76,"div",44),p.NdJ("click",function(){return o.boxClicked("74")}),p.qZA(),p.TgZ(77,"div",45),p.NdJ("click",function(){return o.boxClicked("84")}),p.qZA(),p.TgZ(78,"div",5),p._uU(79,"4"),p.qZA(),p.TgZ(80,"div",5),p._uU(81,"3"),p.qZA(),p.TgZ(82,"div",46),p.NdJ("click",function(){return o.boxClicked("13")}),p.qZA(),p.TgZ(83,"div",47),p.NdJ("click",function(){return o.boxClicked("23")}),p.qZA(),p.TgZ(84,"div",48),p.NdJ("click",function(){return o.boxClicked("33")}),p.qZA(),p.TgZ(85,"div",49),p.NdJ("click",function(){return o.boxClicked("43")}),p.qZA(),p.TgZ(86,"div",50),p.NdJ("click",function(){return o.boxClicked("53")}),p.qZA(),p.TgZ(87,"div",51),p.NdJ("click",function(){return o.boxClicked("63")}),p.qZA(),p.TgZ(88,"div",52),p.NdJ("click",function(){return o.boxClicked("73")}),p.qZA(),p.TgZ(89,"div",53),p.NdJ("click",function(){return o.boxClicked("83")}),p.qZA(),p.TgZ(90,"div",5),p._uU(91,"3"),p.qZA(),p.TgZ(92,"div",5),p._uU(93,"2"),p.qZA(),p.TgZ(94,"div",54),p.NdJ("click",function(){return o.boxClicked("12")}),p.qZA(),p.TgZ(95,"div",55),p.NdJ("click",function(){return o.boxClicked("22")}),p.qZA(),p.TgZ(96,"div",56),p.NdJ("click",function(){return o.boxClicked("32")}),p.qZA(),p.TgZ(97,"div",57),p.NdJ("click",function(){return o.boxClicked("42")}),p.qZA(),p.TgZ(98,"div",58),p.NdJ("click",function(){return o.boxClicked("52")}),p.qZA(),p.TgZ(99,"div",59),p.NdJ("click",function(){return o.boxClicked("62")}),p.qZA(),p.TgZ(100,"div",60),p.NdJ("click",function(){return o.boxClicked("72")}),p.qZA(),p.TgZ(101,"div",61),p.NdJ("click",function(){return o.boxClicked("82")}),p.qZA(),p.TgZ(102,"div",5),p._uU(103,"2"),p.qZA(),p.TgZ(104,"div",5),p._uU(105,"1"),p.qZA(),p.TgZ(106,"div",62),p.NdJ("click",function(){return o.boxClicked("11")}),p.qZA(),p.TgZ(107,"div",63),p.NdJ("click",function(){return o.boxClicked("21")}),p.qZA(),p.TgZ(108,"div",64),p.NdJ("click",function(){return o.boxClicked("31")}),p.qZA(),p.TgZ(109,"div",65),p.NdJ("click",function(){return o.boxClicked("41")}),p.qZA(),p.TgZ(110,"div",66),p.NdJ("click",function(){return o.boxClicked("51")}),p.qZA(),p.TgZ(111,"div",67),p.NdJ("click",function(){return o.boxClicked("61")}),p.qZA(),p.TgZ(112,"div",68),p.NdJ("click",function(){return o.boxClicked("71")}),p.qZA(),p.TgZ(113,"div",69),p.NdJ("click",function(){return o.boxClicked("81")}),p.qZA(),p.TgZ(114,"div",5),p._uU(115,"1"),p.qZA(),p._UZ(116,"div",70),p.TgZ(117,"div",3),p._uU(118,"a"),p.qZA(),p.TgZ(119,"div",3),p._uU(120,"b"),p.qZA(),p.TgZ(121,"div",3),p._uU(122,"c"),p.qZA(),p.TgZ(123,"div",3),p._uU(124,"d"),p.qZA(),p.TgZ(125,"div",3),p._uU(126,"e"),p.qZA(),p.TgZ(127,"div",3),p._uU(128,"f"),p.qZA(),p.TgZ(129,"div",3),p._uU(130,"g"),p.qZA(),p.TgZ(131,"div",3),p._uU(132,"h"),p.qZA(),p._UZ(133,"div",71),p.qZA()())},styles:[".game[_ngcontent-%COMP%]{background-color:#1a1918;width:auto;top:0;bottom:0;right:0;left:0;position:absolute;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.grid[_ngcontent-%COMP%]{width:800px;height:800px}.black_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .white_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;height:90%;margin-top:4%}.black_box[_ngcontent-%COMP%]{height:10%;width:10%;background-color:#769656;padding:0;margin:0;float:left;text-align:center;vertical-align:middle;display:flex;justify-content:center;cursor:pointer;position:relative}.white_box[_ngcontent-%COMP%]{height:10%;width:10%;background-color:#ecf1ea;padding:0;margin:0;float:left;text-align:center;vertical-align:middle;display:flex;justify-content:center;cursor:pointer;position:relative}.border_box_horizntal[_ngcontent-%COMP%], .border_box_vertical[_ngcontent-%COMP%]{height:10%;width:10%;background-color:#272420;padding:0;margin:0;float:left;color:#fff;text-align:center;vertical-align:middle;line-height:450%}.border_box_special1[_ngcontent-%COMP%]{border-top-left-radius:30%}.border_box_special2[_ngcontent-%COMP%]{border-top-right-radius:30%}.border_box_special3[_ngcontent-%COMP%]{border-bottom-left-radius:30%}.border_box_special4[_ngcontent-%COMP%]{border-bottom-right-radius:30%}"]}),i})();const Zv_firebase={apiKey:"AIzaSyApusGzreMmPVkoxtcxiJjsDPjF91ZuRms",authDomain:"chess-engineer.firebaseapp.com",databaseURL:"https://chess-engineer-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chess-engineer",storageBucket:"chess-engineer.appspot.com",messagingSenderId:"481214538885",appId:"1:481214538885:web:07e1c92f27008a9c8af5ec",measurementId:"G-L8R6HFW19E"};let Gm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.oAB({type:i,bootstrap:[VI]}),i.\u0275inj=p.cJS({providers:[],imports:[[xo,i_,Os.hO.initializeApp(Zv_firebase),xC]]}),i})();(0,p.G48)(),ll().bootstrapModule(Gm).catch(i=>console.error(i))},5867:(ze,ve,M)=>{M.d(ve,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=M(9681);(0,p.registerVersion)("firebase","9.6.10","app")},127:(ze,ve,M)=>{M.d(ve,{Z:()=>p.Z});var p=M(3942);p.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(ze,ve,M)=>{M.r(ve);var p=M(5861),q=M(3942),P=M(2090),se=M(9681),J=M(655),de=M(1877),ie=M(4859);const Se=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ce=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new de.Yd("@firebase/auth");function Ue(m,...c){$e.logLevel<=de.in.ERROR&&$e.error(`Auth (${se.SDK_VERSION}): ${m}`,...c)}function Ee(m,...c){throw Ne(m,...c)}function pe(m,...c){return Ne(m,...c)}function me(m,c,f){const y=Object.assign(Object.assign({},ke()),{[c]:f});return new P.LL("auth","Firebase",y).create(c,{appName:m.name})}function Oe(m,c,f){if(!(c instanceof f))throw f.name!==c.constructor.name&&Ee(m,"argument-error"),me(m,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(m,...c){if("string"!=typeof m){const f=c[0],y=[...c.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(f,...y)}return ce.create(m,...c)}function ee(m,c,...f){if(!m)throw Ne(c,...f)}function G(m){const c="INTERNAL ASSERTION FAILED: "+m;throw Ue(c),new Error(c)}function te(m,c){m||G(c)}const he=new Map;function ne(m){te(m instanceof Function,"Expected a class definition");let c=he.get(m);return c?(te(c instanceof m,"Instance stored in cache mismatched with class"),c):(c=new m,he.set(m,c),c)}function lt(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Pt(){return"http:"===un()||"https:"===un()}function un(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Vt{constructor(c,f){this.shortDelay=c,this.longDelay=f,te(f>c,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Ze(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(m,c){te(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return c?`${f}${c.startsWith("/")?c.slice(1):c}`:f}class Or{static initialize(c,f,y){this.fetchImpl=c,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void G("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void G("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void G("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yr=new Vt(3e4,6e4);function xt(m,c){return m.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:m.tenantId}):c}function wt(m,c,f,y){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*(m,c,f,y,D={}){return sr(m,D,(0,p.Z)(function*(){let k={},W={};y&&("GET"===c?W=y:k={body:JSON.stringify(y)});const re=(0,P.xO)(Object.assign({key:m.config.apiKey},W)).slice(1),xe=yield m._getAdditionalHeaders();return xe["Content-Type"]="application/json",m.languageCode&&(xe["X-Firebase-Locale"]=m.languageCode),Or.fetch()(er(m,m.config.apiHost,f,re),Object.assign({method:c,headers:xe,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function sr(m,c,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,p.Z)(function*(m,c,f){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},Nt),c);try{const D=new ci(m),k=yield Promise.race([f(),D.promise]);D.clearNetworkTimeout();const W=yield k.json();if("needConfirmation"in W)throw Jr(m,"account-exists-with-different-credential",W);if(k.ok&&!("errorMessage"in W))return W;{const re=k.ok?W.errorMessage:W.error.message,[xe,He]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Jr(m,"credential-already-in-use",W);if("EMAIL_EXISTS"===xe)throw Jr(m,"email-already-in-use",W);const nt=y[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw me(m,nt,He);Ee(m,nt)}}catch(D){if(D instanceof P.ZR)throw D;Ee(m,"network-request-failed")}})).apply(this,arguments)}function Xn(m,c,f,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,p.Z)(function*(m,c,f,y,D={}){const k=yield wt(m,c,f,y,D);return"mfaPendingCredential"in k&&Ee(m,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function er(m,c,f,y){const D=`${c}${f}?${y}`;return m.config.emulator?jt(m.config,D):`${m.config.apiScheme}://${D}`}class ci{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(pe(this.auth,"network-request-failed")),Yr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jr(m,c,f){const y={appName:m.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const D=pe(m,c,y);return D.customData._tokenResponse=f,D}function or(){return(or=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Sn(m,c){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Cr(m,c){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function zt(m){if(m)try{const c=new Date(Number(m));if(!isNaN(c.getTime()))return c.toUTCString()}catch(c){}}function Zs(){return(Zs=(0,p.Z)(function*(m,c=!1){const f=(0,P.m9)(m),y=yield f.getIdToken(c),D=Ge(y);ee(D&&D.exp&&D.auth_time&&D.iat,f.auth,"internal-error");const k="object"==typeof D.firebase?D.firebase:void 0,W=null==k?void 0:k.sign_in_provider;return{claims:D,token:y,authTime:zt(bt(D.auth_time)),issuedAtTime:zt(bt(D.iat)),expirationTime:zt(bt(D.exp)),signInProvider:W||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function bt(m){return 1e3*Number(m)}function Ge(m){const[c,f,y]=m.split(".");if(void 0===c||void 0===f||void 0===y)return Ue("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,P.tV)(f);return D?JSON.parse(D):(Ue("Failed to decode base64 JWT payload"),null)}catch(D){return Ue("Caught error parsing JWT payload as JSON",D),null}}function Pn(m,c){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(m,c,f=!1){if(f)return c;try{return yield c}catch(y){throw y instanceof P.ZR&&Dt(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}function Dt({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class gs{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var f;if(c){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const D=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(c=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(c);this.timerId=setTimeout((0,p.Z)(function*(){yield f.iteration()}),y)}iteration(){var c=this;return(0,p.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&c.schedule(!0))}c.schedule()})()}}class Un{constructor(c,f){this.createdAt=c,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=zt(this.lastLoginAt),this.creationTime=zt(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xn(m){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(m){var c;const f=m.auth,y=yield m.getIdToken(),D=yield Pn(m,Cr(f,{idToken:y}));ee(null==D?void 0:D.users.length,f,"internal-error");const k=D.users[0];m._notifyReloadListener(k);const W=(null===(c=k.providerUserInfo)||void 0===c?void 0:c.length)?Ce(k.providerUserInfo):[],re=Be(m.providerData,W),nt=!!m.isAnonymous&&!(m.email&&k.passwordHash||(null==re?void 0:re.length)),qe={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:re,metadata:new Un(k.createdAt,k.lastLoginAt),isAnonymous:nt};Object.assign(m,qe)})).apply(this,arguments)}function vt(){return(vt=(0,p.Z)(function*(m){const c=(0,P.m9)(m);yield xn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Be(m,c){return[...m.filter(y=>!c.some(D=>D.providerId===y.providerId)),...c]}function Ce(m){return m.map(c=>{var{providerId:f}=c,y=(0,J._T)(c,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Je(){return(Je=(0,p.Z)(function*(m,c){const f=yield sr(m,{},(0,p.Z)(function*(){const y=(0,P.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:D,apiKey:k}=m.config,W=er(m,D,"/v1/token",`key=${k}`),re=yield m._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Or.fetch()(W,{method:"POST",headers:re,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ee(c.idToken,"internal-error"),ee(void 0!==c.idToken,"internal-error"),ee(void 0!==c.refreshToken,"internal-error");const f="expiresIn"in c&&void 0!==c.expiresIn?Number(c.expiresIn):function ot(m){const c=Ge(m);return ee(c,"internal-error"),ee(void 0!==c.exp,"internal-error"),ee(void 0!==c.iat,"internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,f)}getToken(c,f=!1){var y=this;return(0,p.Z)(function*(){return ee(!y.accessToken||y.refreshToken,c,"user-token-expired"),f||!y.accessToken||y.isExpired?y.refreshToken?(yield y.refresh(c,y.refreshToken),y.accessToken):null:y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,f){var y=this;return(0,p.Z)(function*(){const{accessToken:D,refreshToken:k,expiresIn:W}=yield function je(m,c){return Je.apply(this,arguments)}(c,f);y.updateTokensAndExpiration(D,k,Number(W))})()}updateTokensAndExpiration(c,f,y){this.refreshToken=f||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(c,f){const{refreshToken:y,accessToken:D,expirationTime:k}=f,W=new Ct;return y&&(ee("string"==typeof y,"internal-error",{appName:c}),W.refreshToken=y),D&&(ee("string"==typeof D,"internal-error",{appName:c}),W.accessToken=D),k&&(ee("number"==typeof k,"internal-error",{appName:c}),W.expirationTime=k),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return G("not implemented")}}function _t(m,c){ee("string"==typeof m||void 0===m,"internal-error",{appName:c})}class B{constructor(c){var{uid:f,auth:y,stsTokenManager:D}=c,k=(0,J._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Un(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(c){var f=this;return(0,p.Z)(function*(){const y=yield Pn(f,f.stsTokenManager.getToken(f.auth,c));return ee(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(c){return function di(m){return Zs.apply(this,arguments)}(this,c)}reload(){return function Bn(m){return vt.apply(this,arguments)}(this)}_assign(c){this!==c&&(ee(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(f=>Object.assign({},f)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){return new B(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(c){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,f=!1){var y=this;return(0,p.Z)(function*(){let D=!1;c.idToken&&c.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(c),D=!0),f&&(yield xn(y)),yield y.auth._persistUserIfCurrent(y),D&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var c=this;return(0,p.Z)(function*(){const f=yield c.getIdToken();return yield Pn(c,function Ye(m,c){return or.apply(this,arguments)}(c.auth,{idToken:f})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,f){var y,D,k,W,re,xe,He,nt;const qe=null!==(y=f.displayName)&&void 0!==y?y:void 0,ln=null!==(D=f.email)&&void 0!==D?D:void 0,ui=null!==(k=f.phoneNumber)&&void 0!==k?k:void 0,Bl=null!==(W=f.photoURL)&&void 0!==W?W:void 0,Ra=null!==(re=f.tenantId)&&void 0!==re?re:void 0,ka=null!==(xe=f._redirectEventId)&&void 0!==xe?xe:void 0,cd=null!==(He=f.createdAt)&&void 0!==He?He:void 0,Ip=null!==(nt=f.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:_o,emailVerified:$u,isAnonymous:Wu,providerData:dd,stsTokenManager:Gu}=f;ee(_o&&Gu,c,"internal-error");const zr=Ct.fromJSON(this.name,Gu);ee("string"==typeof _o,c,"internal-error"),_t(qe,c.name),_t(ln,c.name),ee("boolean"==typeof $u,c,"internal-error"),ee("boolean"==typeof Wu,c,"internal-error"),_t(ui,c.name),_t(Bl,c.name),_t(Ra,c.name),_t(ka,c.name),_t(cd,c.name),_t(Ip,c.name);const hd=new B({uid:_o,auth:c,email:ln,emailVerified:$u,displayName:qe,isAnonymous:Wu,photoURL:Bl,phoneNumber:ui,tenantId:Ra,stsTokenManager:zr,createdAt:cd,lastLoginAt:Ip});return dd&&Array.isArray(dd)&&(hd.providerData=dd.map(Ah=>Object.assign({},Ah))),ka&&(hd._redirectEventId=ka),hd}static _fromIdTokenResponse(c,f,y=!1){return(0,p.Z)(function*(){const D=new Ct;D.updateFromServerResponse(f);const k=new B({uid:f.localId,auth:c,stsTokenManager:D,isAnonymous:y});return yield xn(k),k})()}}const $=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(f,y){var D=this;return(0,p.Z)(function*(){D.storage[f]=y})()}_get(f){var y=this;return(0,p.Z)(function*(){const D=y.storage[f];return void 0===D?null:D})()}_remove(f){var y=this;return(0,p.Z)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return m.type="NONE",m})();function le(m,c,f){return`firebase:${m}:${c}:${f}`}class K{constructor(c,f,y){this.persistence=c,this.auth=f,this.userKey=y;const{config:D,name:k}=this.auth;this.fullUserKey=le(this.userKey,D.apiKey,k),this.fullPersistenceKey=le("persistence",D.apiKey,k),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,p.Z)(function*(){const f=yield c.persistence._get(c.fullUserKey);return f?B._fromJSON(c.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var f=this;return(0,p.Z)(function*(){if(f.persistence===c)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=c,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,f,y="authUser"){return(0,p.Z)(function*(){if(!f.length)return new K(ne($),c,y);const D=(yield Promise.all(f.map(function(){var He=(0,p.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let k=D[0]||ne($);const W=le(y,c.config.apiKey,c.name);let re=null;for(const He of f)try{const nt=yield He._get(W);if(nt){const qe=B._fromJSON(c,nt);He!==k&&(re=qe),k=He;break}}catch(nt){}const xe=D.filter(He=>He._shouldAllowMigration);return k._shouldAllowMigration&&xe.length?(k=xe[0],re&&(yield k._set(W,re.toJSON())),yield Promise.all(f.map(function(){var He=(0,p.Z)(function*(nt){if(nt!==k)try{yield nt._remove(W)}catch(qe){}});return function(nt){return He.apply(this,arguments)}}())),new K(k,c,y)):new K(k,c,y)})()}}function Pe(m){const c=m.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(St(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(tt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ht(c))return"Blackberry";if($t(c))return"Webos";if(At(c))return"Safari";if((c.includes("chrome/")||Vn(c))&&!c.includes("edge/"))return"Chrome";if(tn(c))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==y?void 0:y.length))return y[1]}return"Other"}function tt(m=(0,P.z$)()){return/firefox\//i.test(m)}function At(m=(0,P.z$)()){const c=m.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Vn(m=(0,P.z$)()){return/crios\//i.test(m)}function St(m=(0,P.z$)()){return/iemobile/i.test(m)}function tn(m=(0,P.z$)()){return/android/i.test(m)}function ht(m=(0,P.z$)()){return/blackberry/i.test(m)}function $t(m=(0,P.z$)()){return/webos/i.test(m)}function Rn(m=(0,P.z$)()){return/iphone|ipad|ipod/i.test(m)}function hi(m=(0,P.z$)()){return Rn(m)||tn(m)||$t(m)||ht(m)||/windows phone/i.test(m)||St(m)}function To(m,c=[]){let f;switch(m){case"Browser":f=Pe((0,P.z$)());break;case"Worker":f=`${Pe((0,P.z$)())}-${m}`;break;default:f=m}const y=c.length?c.join(","):"FirebaseCore-web";return`${f}/JsCore/${se.SDK_VERSION}/${y}`}class Ir{constructor(c,f,y){this.app=c,this.heartbeatServiceProvider=f,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pt(this),this.idTokenSubscription=new pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,f){var y=this;return f&&(this._popupRedirectResolver=ne(f)),this._initializationPromise=this.queue((0,p.Z)(function*(){var D,k;if(!y._deleted&&(y.persistenceManager=yield K.create(y,c),!y._deleted)){if(null===(D=y._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch(W){}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(k=y.currentUser)||void 0===k?void 0:k.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,p.Z)(function*(){if(c._deleted)return;const f=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||f){if(c.currentUser&&f&&c.currentUser.uid===f.uid)return c._currentUser._assign(f),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(f)}})()}initializeCurrentUser(c){var f=this;return(0,p.Z)(function*(){var y;let D=yield f.assertedPersistence.getCurrentUser();if(c&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const k=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,W=null==D?void 0:D._redirectEventId,re=yield f.tryRedirectSignIn(c);(!k||k===W)&&(null==re?void 0:re.user)&&(D=re.user)}return D?D._redirectEventId?(ee(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===D._redirectEventId?f.directlySetCurrentUser(D):f.reloadAndSetCurrentUserOrClear(D)):f.reloadAndSetCurrentUserOrClear(D):f.directlySetCurrentUser(null)})()}tryRedirectSignIn(c){var f=this;return(0,p.Z)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,c,!0)}catch(D){yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(c){var f=this;return(0,p.Z)(function*(){try{yield xn(c)}catch(y){if("auth/network-request-failed"!==y.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function et(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var c=this;return(0,p.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){const y=c?(0,P.m9)(c):null;return y&&ee(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(c){var f=this;return(0,p.Z)(function*(){if(!f._deleted)return c&&ee(f.tenantId===c.tenantId,f,"tenant-id-mismatch"),f.queue((0,p.Z)(function*(){yield f.directlySetCurrentUser(c),f.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,p.Z)(function*(){return(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null)})()}setPersistence(c){var f=this;return this.queue((0,p.Z)(function*(){yield f.assertedPersistence.setPersistence(ne(c))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new P.LL("auth","Firebase",c())}onAuthStateChanged(c,f,y){return this.registerStateListener(this.authStateSubscription,c,f,y)}onIdTokenChanged(c,f,y){return this.registerStateListener(this.idTokenSubscription,c,f,y)}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,f){var y=this;return(0,p.Z)(function*(){const D=yield y.getOrInitRedirectPersistenceManager(f);return null===c?D.removeCurrentUser():D.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var f=this;return(0,p.Z)(function*(){if(!f.redirectPersistenceManager){const y=c&&ne(c)||f._popupRedirectResolver;ee(y,f,"argument-error"),f.redirectPersistenceManager=yield K.create(f,[ne(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(c){var f=this;return(0,p.Z)(function*(){var y,D;return f._isInitialized&&(yield f.queue((0,p.Z)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===c?f._currentUser:(null===(D=f.redirectUser)||void 0===D?void 0:D._redirectEventId)===c?f.redirectUser:null})()}_persistUserIfCurrent(c){var f=this;return(0,p.Z)(function*(){if(c===f.currentUser)return f.queue((0,p.Z)(function*(){return f.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,f,y,D){if(this._deleted)return()=>{};const k="function"==typeof f?f:f.next.bind(f),W=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(W,this,"internal-error"),W.then(()=>k(this.currentUser)),"function"==typeof f?c.addObserver(f,y,D):c.addObserver(f)}directlySetCurrentUser(c){var f=this;return(0,p.Z)(function*(){f.currentUser&&f.currentUser!==c&&(f._currentUser._stopProactiveRefresh(),c&&f.isProactiveRefreshEnabled&&c._startProactiveRefresh()),f.currentUser=c,c?yield f.assertedPersistence.setCurrentUser(c):yield f.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=To(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,p.Z)(function*(){var f;const y={"X-Client-Version":c.clientVersion};c.app.options.appId&&(y["X-Firebase-gmpid"]=c.app.options.appId);const D=yield null===(f=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return D&&(y["X-Firebase-Client"]=D),y})()}}function Ae(m){return(0,P.m9)(m)}class pt{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,P.ne)(f=>this.observer=f)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nn(m){const c=m.indexOf(":");return c<0?"":m.substr(0,c+1)}function _n(m){if(!m)return null;const c=Number(m);return isNaN(c)?null:c}class Ft{constructor(c,f){this.providerId=c,this.signInMethod=f}toJSON(){return G("not implemented")}_getIdTokenResponse(c){return G("not implemented")}_linkToIdToken(c,f){return G("not implemented")}_getReauthenticationResolver(c){return G("not implemented")}}function cn(m,c){return xi.apply(this,arguments)}function xi(){return(xi=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:resetPassword",xt(m,c))})).apply(this,arguments)}function dt(m,c){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function _s(m,c){return So.apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:update",xt(m,c))})).apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithPassword",xt(m,c))})).apply(this,arguments)}function fi(m,c){return pi.apply(this,arguments)}function pi(){return(pi=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:sendOobCode",xt(m,c))})).apply(this,arguments)}function Fr(m,c){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,p.Z)(function*(m,c){return fi(m,c)})).apply(this,arguments)}function Xo(m,c){return ea.apply(this,arguments)}function ea(){return(ea=(0,p.Z)(function*(m,c){return fi(m,c)})).apply(this,arguments)}function Lr(m,c){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(m,c){return fi(m,c)})).apply(this,arguments)}function ou(m,c){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(m,c){return fi(m,c)})).apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithEmailLink",xt(m,c))})).apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithEmailLink",xt(m,c))})).apply(this,arguments)}class na extends Ft{constructor(c,f,y,D=null){super("password",y),this._email=c,this._password=f,this._tenantId=D}static _fromEmailAndPassword(c,f){return new na(c,f,"password")}static _fromEmailAndCode(c,f,y=null){return new na(c,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(c){var f=this;return(0,p.Z)(function*(){switch(f.signInMethod){case"password":return function Ni(m,c){return jn.apply(this,arguments)}(c,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function ta(m,c){return ar.apply(this,arguments)}(c,{email:f._email,oobCode:f._password});default:Ee(c,"internal-error")}})()}_linkToIdToken(c,f){var y=this;return(0,p.Z)(function*(){switch(y.signInMethod){case"password":return dt(c,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function kc(m,c){return au.apply(this,arguments)}(c,{idToken:f,email:y._email,oobCode:y._password});default:Ee(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function yn(m,c){return lu.apply(this,arguments)}function lu(){return(lu=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithIdp",xt(m,c))})).apply(this,arguments)}class gi extends Ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const f=new gi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(f.idToken=c.idToken),c.accessToken&&(f.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(f.nonce=c.nonce),c.pendingToken&&(f.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(f.accessToken=c.oauthToken,f.secret=c.oauthTokenSecret):Ee("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:D}=f,k=(0,J._T)(f,["providerId","signInMethod"]);if(!y||!D)return null;const W=new gi(y,D);return W.idToken=k.idToken||void 0,W.accessToken=k.accessToken||void 0,W.secret=k.secret,W.nonce=k.nonce,W.pendingToken=k.pendingToken||null,W}_getIdTokenResponse(c){return yn(c,this.buildRequest())}_linkToIdToken(c,f){const y=this.buildRequest();return y.idToken=f,yn(c,y)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,yn(c,f)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),c.postBody=(0,P.xO)(f)}return c}}function rh(m,c){return uu.apply(this,arguments)}function uu(){return(uu=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:sendVerificationCode",xt(m,c))})).apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",xt(m,c))})).apply(this,arguments)}function cu(){return(cu=(0,p.Z)(function*(m,c){const f=yield Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",xt(m,c));if(f.temporaryProof)throw Jr(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const sh={USER_NOT_FOUND:"user-not-found"};function du(){return(du=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithPhoneNumber",xt(m,Object.assign(Object.assign({},c),{operation:"REAUTH"})),sh)})).apply(this,arguments)}class Ks extends Ft{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,f){return new Ks({verificationId:c,verificationCode:f})}static _fromTokenResponse(c,f){return new Ks({phoneNumber:c,temporaryProof:f})}_getIdTokenResponse(c){return function Xa(m,c){return Fi.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,f){return function ih(m,c){return cu.apply(this,arguments)}(c,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function oh(m,c){return du.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:f,verificationId:y,verificationCode:D}=this.params;return c&&f?{temporaryProof:c,phoneNumber:f}:{sessionInfo:y,code:D}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:f,verificationCode:y,phoneNumber:D,temporaryProof:k}=c;return y||f||D||k?new Ks({verificationId:f,verificationCode:y,phoneNumber:D,temporaryProof:k}):null}}class ys{constructor(c){var f,y,D,k,W,re;const xe=(0,P.zd)((0,P.pd)(c)),He=null!==(f=xe.apiKey)&&void 0!==f?f:null,nt=null!==(y=xe.oobCode)&&void 0!==y?y:null,qe=function Zf(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=xe.mode)&&void 0!==D?D:null);ee(He&&nt&&qe,"argument-error"),this.apiKey=He,this.operation=qe,this.code=nt,this.continueUrl=null!==(k=xe.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(W=xe.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(re=xe.tenantId)&&void 0!==re?re:null}static parseLink(c){const f=function ra(m){const c=(0,P.zd)((0,P.pd)(m)).link,f=c?(0,P.zd)((0,P.pd)(c)).deep_link_id:null,y=(0,P.zd)((0,P.pd)(m)).deep_link_id;return(y?(0,P.zd)((0,P.pd)(y)).link:null)||y||f||c||m}(c);try{return new ys(f)}catch(y){return null}}}let el=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(f,y){return na._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const D=ys.parseLink(y);return ee(D,"argument-error"),na._fromEmailAndCode(f,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Li{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class lr extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ys extends lr{static credentialFromJSON(c){const f="string"==typeof c?JSON.parse(c):c;return ee("providerId"in f&&"signInMethod"in f,"argument-error"),gi._fromParams(f)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ee(c.idToken||c.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ys.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ys.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:D,pendingToken:k,nonce:W,providerId:re}=c;if(!y&&!D&&!f&&!k||!re)return null;try{return new Ys(re)._credential({idToken:f,accessToken:y,nonce:W,pendingToken:k})}catch(xe){return null}}}let vs=(()=>{class m extends lr{constructor(){super("facebook.com")}static credential(f){return gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(y){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Ao=(()=>{class m extends lr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:D}=f;if(!y&&!D)return null;try{return m.credential(y,D)}catch(k){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),hu=(()=>{class m extends lr{constructor(){super("github.com")}static credential(f){return gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch(y){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Qs extends Ft{constructor(c,f){super(c,c),this.pendingToken=f}_getIdTokenResponse(c){return yn(c,this.buildRequest())}_linkToIdToken(c,f){const y=this.buildRequest();return y.idToken=f,yn(c,y)}_getReauthenticationResolver(c){const f=this.buildRequest();return f.autoCreate=!1,yn(c,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const f="string"==typeof c?JSON.parse(c):c,{providerId:y,signInMethod:D,pendingToken:k}=f;return y&&D&&k&&y===D?new Qs(y,k):null}static _create(c,f){return new Qs(c,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class br extends Li{constructor(c){ee(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return br.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return br.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const f=Qs.fromJSON(c);return ee(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:f,providerId:y}=c;if(!f||!y)return null;try{return Qs._create(y,f)}catch(D){return null}}}let ia=(()=>{class m extends lr{constructor(){super("twitter.com")}static credential(f,y){return gi._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:D}=f;if(!y||!D)return null;try{return m.credential(y,D)}catch(k){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function sa(m,c){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signUp",xt(m,c))})).apply(this,arguments)}class Hn{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,f,y,D=!1){return(0,p.Z)(function*(){const k=yield B._fromIdTokenResponse(c,y,D),W=Pc(y);return new Hn({user:k,providerId:W,_tokenResponse:y,operationType:f})})()}static _forOperation(c,f,y){return(0,p.Z)(function*(){yield c._updateTokensIfNecessary(y,!0);const D=Pc(y);return new Hn({user:c,providerId:D,_tokenResponse:y,operationType:f})})()}}function Pc(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function fu(){return(fu=(0,p.Z)(function*(m){var c;const f=Ae(m);if(yield f._initializationPromise,null===(c=f.currentUser)||void 0===c?void 0:c.isAnonymous)return new Hn({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield sa(f,{returnSecureToken:!0}),D=yield Hn._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class aa extends P.ZR{constructor(c,f,y,D){var k;super(f.code,f.message),this.operationType=y,this.user=D,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:c.name,tenantId:null!==(k=c.tenantId)&&void 0!==k?k:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(c,f,y,D){return new aa(c,f,y,D)}}function la(m,c,f,y){return("reauthenticate"===c?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?aa._fromErrorAndOperation(m,k,c,y):k})}function mi(m){return new Set(m.map(({providerId:c})=>c).filter(c=>!!c))}function tl(){return(tl=(0,p.Z)(function*(m,c){const f=(0,P.m9)(m);yield Bi(!0,f,c);const{providerUserInfo:y}=yield Sn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[c]}),D=mi(y||[]);return f.providerData=f.providerData.filter(k=>D.has(k.providerId)),D.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function Zt(m,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(m,c,f=!1){const y=yield Pn(m,c._linkToIdToken(m.auth,yield m.getIdToken()),f);return Hn._forOperation(m,"link",y)})).apply(this,arguments)}function Bi(m,c,f){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(m,c,f){yield xn(c);const D=!1===m?"provider-already-linked":"no-such-provider";ee(mi(c.providerData).has(f)===m,c.auth,D)})).apply(this,arguments)}function pu(m,c){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(m,c,f=!1){const{auth:y}=m,D="reauthenticate";try{const k=yield Pn(m,la(y,D,c,m),f);ee(k.idToken,y,"internal-error");const W=Ge(k.idToken);ee(W,y,"internal-error");const{sub:re}=W;return ee(m.uid===re,y,"user-mismatch"),Hn._forOperation(m,D,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&Ee(y,"user-mismatch"),k}})).apply(this,arguments)}function Cs(m,c){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(m,c,f=!1){const y="signIn",D=yield la(m,y,c),k=yield Hn._fromIdTokenResponse(m,y,D);return f||(yield m._updateCurrentUser(k.user)),k})).apply(this,arguments)}function dn(m,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,p.Z)(function*(m,c){return Cs(Ae(m),c)})).apply(this,arguments)}function Ur(m,c){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(m,c){const f=(0,P.m9)(m);return yield Bi(!1,f,c.providerId),Zt(f,c)})).apply(this,arguments)}function Vi(m,c){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(m,c){return pu((0,P.m9)(m),c)})).apply(this,arguments)}function ua(m,c){return cr.apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(m,c){return Xn(m,"POST","/v1/accounts:signInWithCustomToken",xt(m,c))})).apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(m,c){const f=Ae(m),y=yield ua(f,{token:c,returnSecureToken:!0}),D=yield Hn._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(D.user),D})).apply(this,arguments)}class Xe{constructor(c,f){this.factorId=c,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(c,f){return"phoneInfo"in f?ca._fromServerResponse(c,f):Ee(c,"internal-error")}}class ca extends Xe{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,f){return new ca(f)}}function Mo(m,c,f){var y;ee((null===(y=f.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),ee(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),c.continueUrl=f.url,c.dynamicLinkDomain=f.dynamicLinkDomain,c.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ee(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),c.iOSBundleId=f.iOS.bundleId),f.android&&(ee(f.android.packageName.length>0,m,"missing-android-pkg-name"),c.androidInstallApp=f.android.installApp,c.androidMinimumVersionCode=f.android.minimumVersion,c.androidPackageName=f.android.packageName)}function ha(){return(ha=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m),D={requestType:"PASSWORD_RESET",email:c};f&&Mo(y,D,f),yield Xo(y,D)})).apply(this,arguments)}function nl(){return(nl=(0,p.Z)(function*(m,c,f){yield cn((0,P.m9)(m),{oobCode:c,newPassword:f})})).apply(this,arguments)}function ye(){return(ye=(0,p.Z)(function*(m,c){yield _s((0,P.m9)(m),{oobCode:c})})).apply(this,arguments)}function yt(m,c){return gu.apply(this,arguments)}function gu(){return(gu=(0,p.Z)(function*(m,c){const f=(0,P.m9)(m),y=yield cn(f,{oobCode:c}),D=y.requestType;switch(ee(D,f,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(y.mfaInfo,f,"internal-error");default:ee(y.email,f,"internal-error")}let k=null;return y.mfaInfo&&(k=Xe._fromServerResponse(Ae(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:k},operation:D}})).apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(m,c){const{data:f}=yield yt((0,P.m9)(m),c);return f.email})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(m,c,f){const y=Ae(m),D=yield sa(y,{returnSecureToken:!0,email:c,password:f}),k=yield Hn._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}function mu(){return(mu=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m),D={requestType:"EMAIL_SIGNIN",email:c};ee(f.handleCodeInApp,y,"argument-error"),f&&Mo(y,D,f),yield Lr(y,D)})).apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m),D=el.credentialWithLink(c,f||lt());return ee(D._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),dn(y,D)})).apply(this,arguments)}function On(m,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:createAuthUri",xt(m,c))})).apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(m,c){const y={identifier:c,continueUri:Pt()?lt():"http://localhost"},{signinMethods:D}=yield On((0,P.m9)(m),y);return D||[]})).apply(this,arguments)}function al(){return(al=(0,p.Z)(function*(m,c){const f=(0,P.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};c&&Mo(f.auth,D,c);const{email:k}=yield Fr(f.auth,D);k!==m.email&&(yield m.reload())})).apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:c};f&&Mo(y.auth,k,f);const{email:W}=yield ou(y.auth,k);W!==m.email&&(yield m.reload())})).apply(this,arguments)}function ll(m,c){return Po.apply(this,arguments)}function Po(){return(Po=(0,p.Z)(function*(m,c){return wt(m,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ul(){return(ul=(0,p.Z)(function*(m,{displayName:c,photoURL:f}){if(void 0===c&&void 0===f)return;const y=(0,P.m9)(m),k={idToken:yield y.getIdToken(),displayName:c,photoUrl:f,returnSecureToken:!0},W=yield Pn(y,ll(y.auth,k));y.displayName=W.displayName||null,y.photoURL=W.photoUrl||null;const re=y.providerData.find(({providerId:xe})=>"password"===xe);re&&(re.displayName=y.displayName,re.photoURL=y.photoURL),yield y._updateTokensIfNecessary(W)})).apply(this,arguments)}function dl(m,c,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(m,c,f){const{auth:y}=m,k={idToken:yield m.getIdToken(),returnSecureToken:!0};c&&(k.email=c),f&&(k.password=f);const W=yield Pn(m,dt(y,k));yield m._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class ws{constructor(c,f,y={}){this.isNewUser=c,this.providerId=f,this.profile=y}}class vu extends ws{constructor(c,f,y,D){super(c,f,y),this.username=D}}class Eu extends ws{constructor(c,f){super(c,"facebook.com",f)}}class bs extends vu{constructor(c,f){super(c,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Gi extends ws{constructor(c,f){super(c,"google.com",f)}}class hl extends vu{constructor(c,f,y){super(c,"twitter.com",f,y)}}function Gn(m){const{user:c,_tokenResponse:f}=m;return c.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function yu(m){var c,f;if(!m)return null;const{providerId:y}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},k=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&(null==m?void 0:m.idToken)){const W=null===(f=null===(c=Ge(m.idToken))||void 0===c?void 0:c.firebase)||void 0===f?void 0:f.sign_in_provider;if(W)return new ws(k,"anonymous"!==W&&"custom"!==W?W:null)}if(!y)return null;switch(y){case"facebook.com":return new Eu(k,D);case"github.com":return new bs(k,D);case"google.com":return new Gi(k,D);case"twitter.com":return new hl(k,D,m.screenName||null);case"custom":case"anonymous":return new ws(k,null);default:return new ws(k,y,D)}}(f)}class yi{constructor(c,f){this.type=c,this.credential=f}static _fromIdtoken(c){return new yi("enroll",c)}static _fromMfaPendingCredential(c){return new yi("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var f,y;if(null==c?void 0:c.multiFactorSession){if(null===(f=c.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return yi._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null===(y=c.multiFactorSession)||void 0===y?void 0:y.idToken)return yi._fromIdtoken(c.multiFactorSession.idToken)}return null}}class No{constructor(c,f,y){this.session=c,this.hints=f,this.signInResolver=y}static _fromError(c,f){const y=Ae(c),D=f.customData._serverResponse,k=(D.mfaInfo||[]).map(re=>Xe._fromServerResponse(y,re));ee(D.mfaPendingCredential,y,"internal-error");const W=yi._fromMfaPendingCredential(D.mfaPendingCredential);return new No(W,k,function(){var re=(0,p.Z)(function*(xe){const He=yield xe._process(y,W);delete D.mfaInfo,delete D.mfaPendingCredential;const nt=Object.assign(Object.assign({},D),{idToken:He.idToken,refreshToken:He.refreshToken});switch(f.operationType){case"signIn":const qe=yield Hn._fromIdTokenResponse(y,f.operationType,nt);return yield y._updateCurrentUser(qe.user),qe;case"reauthenticate":return ee(f.user,y,"internal-error"),Hn._forOperation(f.user,f.operationType,nt);default:Ee(y,"internal-error")}});return function(xe){return re.apply(this,arguments)}}())}resolveSignIn(c){var f=this;return(0,p.Z)(function*(){return f.signInResolver(c)})()}}function vn(m,c){return wt(m,"POST","/v2/accounts/mfaEnrollment:start",xt(m,c))}class vi{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>Xe._fromServerResponse(c.auth,y)))})}static _fromUser(c){return new vi(c)}getSession(){var c=this;return(0,p.Z)(function*(){return yi._fromIdtoken(yield c.user.getIdToken())})()}enroll(c,f){var y=this;return(0,p.Z)(function*(){const D=c,k=yield y.getSession(),W=yield Pn(y.user,D._process(y.user.auth,k,f));return yield y.user._updateTokensIfNecessary(W),y.user.reload()})()}unenroll(c){var f=this;return(0,p.Z)(function*(){const y="string"==typeof c?c:c.uid,D=yield f.user.getIdToken(),k=yield Pn(f.user,function lh(m,c){return wt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(m,c))}(f.user.auth,{idToken:D,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:W})=>W!==y),yield f.user._updateTokensIfNecessary(k);try{yield f.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const to=new WeakMap,gl="__sak";class Ds{constructor(c,f){this.storageRetriever=c,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(gl,"1"),this.storage.removeItem(gl),Promise.resolve(!0)):Promise.resolve(!1)}catch(c){return Promise.resolve(!1)}}_set(c,f){return this.storage.setItem(c,JSON.stringify(f)),Promise.resolve()}_get(c){const f=this.storage.getItem(c);return Promise.resolve(f?JSON.parse(f):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const hn=(()=>{class m extends Ds{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wu(){const m=(0,P.z$)();return At(m)||Rn(m)}()&&function wn(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=hi(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const D=this.storage.getItem(y),k=this.localCache[y];D!==k&&f(y,k,D)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((re,xe,He)=>{this.notifyListeners(re,He)});const D=f.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(D);if(f.newValue!==re)null!==f.newValue?this.storage.setItem(D,f.newValue):this.storage.removeItem(D);else if(this.localCache[D]===f.newValue&&!y)return}const k=()=>{const re=this.storage.getItem(D);!y&&this.localCache[D]===re||this.notifyListeners(D,re)},W=this.storage.getItem(D);!function Do(){return(0,P.w1)()&&10===document.documentMode}()||W===f.newValue||f.newValue===f.oldValue?k():setTimeout(k,10)}notifyListeners(f,y){this.localCache[f]=y;const D=this.listeners[f];if(D)for(const k of Array.from(D))k(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var D=()=>super._set,k=this;return(0,p.Z)(function*(){yield D().call(k,f,y),k.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,D=this;return(0,p.Z)(function*(){const k=yield y().call(D,f);return D.localCache[f]=JSON.stringify(k),k})()}_remove(f){var y=()=>super._remove,D=this;return(0,p.Z)(function*(){yield y().call(D,f),delete D.localCache[f]})()}}return m.type="LOCAL",m})(),Fn=(()=>{class m extends Ds{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return m.type="SESSION",m})();let Tr=(()=>{class m{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(k=>k.isListeningto(f));if(y)return y;const D=new m(f);return this.receivers.push(D),D}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,p.Z)(function*(){const D=f,{eventId:k,eventType:W,data:re}=D.data,xe=y.handlersMap[W];if(!(null==xe?void 0:xe.size))return;D.ports[0].postMessage({status:"ack",eventId:k,eventType:W});const He=Array.from(xe).map(function(){var qe=(0,p.Z)(function*(ln){return ln(D.origin,re)});return function(ln){return qe.apply(this,arguments)}}()),nt=yield function hr(m){return Promise.all(m.map(function(){var c=(0,p.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return c.apply(this,arguments)}}()))}(He);D.ports[0].postMessage({status:"done",eventId:k,eventType:W,response:nt})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function no(m="",c=10){let f="";for(let y=0;y<c;y++)f+=Math.floor(10*Math.random());return m+f}class bu{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,f,y=50){var D=this;return(0,p.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let W,re;return new Promise((xe,He)=>{const nt=no("",20);k.port1.start();const qe=setTimeout(()=>{He(new Error("unsupported_event"))},y);re={messageChannel:k,onMessage(ln){const ui=ln;if(ui.data.eventId===nt)switch(ui.data.status){case"ack":clearTimeout(qe),W=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),xe(ui.data.response);break;default:clearTimeout(qe),clearTimeout(W),He(new Error("invalid_response"))}}},D.handlers.add(re),k.port1.addEventListener("message",re.onMessage),D.target.postMessage({eventType:c,eventId:nt,data:f},[k.port2])}).finally(()=>{re&&D.removeMessageHandler(re)})})()}}function Gt(){return window}function ti(){return void 0!==Gt().WorkerGlobalScope&&"function"==typeof Gt().importScripts}function fr(){return(fr=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const ml="firebaseLocalStorageDb",ro="firebaseLocalStorage",fn="fbase_key";class Ei{constructor(c){this.request=c}toPromise(){return new Promise((c,f)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function io(m,c){return m.transaction([ro],c?"readwrite":"readonly").objectStore(ro)}function Zi(){const m=indexedDB.open(ml,1);return new Promise((c,f)=>{m.addEventListener("error",()=>{f(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(ro,{keyPath:fn})}catch(D){f(D)}}),m.addEventListener("success",(0,p.Z)(function*(){const y=m.result;y.objectStoreNames.contains(ro)?c(y):(y.close(),yield function Sr(){const m=indexedDB.deleteDatabase(ml);return new Ei(m).toPromise()}(),c(yield Zi()))}))})}function Oo(m,c,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(m,c,f){const y=io(m,!0).put({[fn]:c,value:f});return new Ei(y).toPromise()})).apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(m,c){const f=io(m,!1).get(c),y=yield new Ei(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function ri(m,c){const f=io(m,!0).delete(c);return new Ei(f).toPromise()}const Vr=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,p.Z)(function*(){return f.db||(f.db=yield Zi()),f.db})()}_withRetries(f){var y=this;return(0,p.Z)(function*(){let D=0;for(;;)try{const k=yield y._openDb();return yield f(k)}catch(k){if(D++>3)throw k;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,p.Z)(function*(){return ti()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,p.Z)(function*(){f.receiver=Tr._getInstance(function Du(){return ti()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,p.Z)(function*(D,k){return{keyProcessed:(yield f._poll()).includes(k.key)}});return function(D,k){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,p.Z)(function*(D,k){return["keyChanged"]});return function(D,k){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,p.Z)(function*(){var y,D;if(f.activeServiceWorker=yield function va(){return fr.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new bu(f.activeServiceWorker);const k=yield f.sender._send("ping",{},800);!k||(null===(y=k[0])||void 0===y?void 0:y.fulfilled)&&(null===(D=k[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,p.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function Rt(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Zi();return yield Oo(f,gl,"1"),yield ri(f,gl),!0}catch(f){}return!1})()}_withPendingWrite(f){var y=this;return(0,p.Z)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var D=this;return(0,p.Z)(function*(){return D._withPendingWrite((0,p.Z)(function*(){return yield D._withRetries(k=>Oo(k,f,y)),D.localCache[f]=y,D.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,p.Z)(function*(){const D=yield y._withRetries(k=>function _l(m,c){return qi.apply(this,arguments)}(k,f));return y.localCache[f]=D,D})()}_remove(f){var y=this;return(0,p.Z)(function*(){return y._withPendingWrite((0,p.Z)(function*(){return yield y._withRetries(D=>ri(D,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,p.Z)(function*(){const y=yield f._withRetries(W=>{const re=io(W,!1).getAll();return new Ei(re).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const D=[],k=new Set;for(const{fbase_key:W,value:re}of y)k.add(W),JSON.stringify(f.localCache[W])!==JSON.stringify(re)&&(f.notifyListeners(W,re),D.push(W));for(const W of Object.keys(f.localCache))f.localCache[W]&&!k.has(W)&&(f.notifyListeners(W,null),D.push(W));return D})()}notifyListeners(f,y){this.localCache[f]=y;const D=this.listeners[f];if(D)for(const k of Array.from(D))k(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function oo(m,c){return wt(m,"POST","/v2/accounts/mfaSignIn:start",xt(m,c))}function jr(){return(jr=(0,p.Z)(function*(m){return(yield wt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function rn(m){return new Promise((c,f)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=c,y.onerror=D=>{const k=pe("internal-error");k.customData=D,f(k)},y.type="text/javascript",y.charset="UTF-8",function Lc(){var m,c;return null!==(c=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==c?c:document}().appendChild(y)})}function ao(m){return`__${m}${Math.floor(1e6*Math.random())}`}const tr=1e12;class Ts{constructor(c){this.auth=c,this.counter=tr,this._widgets=new Map}render(c,f){const y=this.counter;return this._widgets.set(y,new ii(c,this.auth.name,f||{})),this.counter++,y}reset(c){var f;const y=c||tr;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(c){var f;return(null===(f=this._widgets.get(c||tr))||void 0===f?void 0:f.getResponse())||""}execute(c){var f=this;return(0,p.Z)(function*(){var y;return null===(y=f._widgets.get(c||tr))||void 0===y||y.execute(),""})()}}class ii{constructor(c,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof c?document.getElementById(c):c;ee(D,"argument-error",{appName:f}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sn(m){const c=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)c.push(f.charAt(Math.floor(Math.random()*f.length)));return c.join("")}(50);const{callback:c,"expired-callback":f}=this.params;if(c)try{c(this.responseToken)}catch(y){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(y){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yi=ao("rcb"),Su=new Vt(3e4,6e4);class ch{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gt().grecaptcha}load(c,f=""){return ee(function dh(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(f),c,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Gt().grecaptcha):new Promise((y,D)=>{const k=Gt().setTimeout(()=>{D(pe(c,"network-request-failed"))},Su.get());Gt()[Yi]=()=>{Gt().clearTimeout(k),delete Gt()[Yi];const re=Gt().grecaptcha;if(!re)return void D(pe(c,"internal-error"));const xe=re.render;re.render=(He,nt)=>{const qe=xe(He,nt);return this.counter++,qe},this.hostLanguage=f,y(re)},rn(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Yi,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(k),D(pe(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){return!!Gt().grecaptcha&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hh{load(c){return(0,p.Z)(function*(){return new Ts(c)})()}clearedOneInstance(){}}const Qi="recaptcha",pr={theme:"light",type:"image"};class fh{constructor(c,f=Object.assign({},pr),y){this.parameters=f,this.type=Qi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ae(y),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof c?document.getElementById(c):c;ee(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hh:new ch,this.validateStartingState()}verify(){var c=this;return(0,p.Z)(function*(){c.assertNotDestroyed();const f=yield c.render(),y=c.getAssertedRecaptcha();return y.getResponse(f)||new Promise(k=>{const W=re=>{!re||(c.tokenChangeListeners.delete(W),k(re))};c.tokenChangeListeners.add(W),c.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof c)c(f);else if("string"==typeof c){const y=Gt()[c];"function"==typeof y&&y(f)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,p.Z)(function*(){if(yield c.init(),!c.widgetId){let f=c.container;if(!c.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}c.widgetId=c.getAssertedRecaptcha().render(f,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,p.Z)(function*(){ee(Pt()&&!ti(),c.auth,"internal-error"),yield function Ji(){let m=null;return new Promise(c=>{"complete"!==document.readyState?(m=()=>c(),window.addEventListener("load",m)):c()}).catch(c=>{throw m&&window.removeEventListener("load",m),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const f=yield function Zn(m){return jr.apply(this,arguments)}(c.auth);ee(f,c.auth,"internal-error"),c.parameters.sitekey=f})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ci{constructor(c,f){this.verificationId=c,this.onConfirmation=f}confirm(c){const f=Ks._fromVerification(this.verificationId,c);return this.onConfirmation(f)}}function Xt(){return(Xt=(0,p.Z)(function*(m,c,f){const y=Ae(m),D=yield qn(y,c,(0,P.m9)(f));return new Ci(D,k=>dn(y,k))})).apply(this,arguments)}function uo(){return(uo=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m);yield Bi(!1,y,"phone");const D=yield qn(y.auth,c,(0,P.m9)(f));return new Ci(D,k=>Ur(y,k))})).apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m),D=yield qn(y.auth,c,(0,P.m9)(f));return new Ci(D,k=>Vi(y,k))})).apply(this,arguments)}function qn(m,c,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,p.Z)(function*(m,c,f){var y;const D=yield f.verify();try{let k;if(ee("string"==typeof D,m,"argument-error"),ee(f.type===Qi,m,"argument-error"),k="string"==typeof c?{phoneNumber:c}:c,"session"in k){const W=k.session;if("phoneNumber"in k)return ee("enroll"===W.type,m,"internal-error"),(yield vn(m,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{ee("signin"===W.type,m,"internal-error");const re=(null===(y=k.multiFactorHint)||void 0===y?void 0:y.uid)||k.multiFactorUid;return ee(re,m,"missing-multi-factor-info"),(yield oo(m,{mfaPendingCredential:W.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield rh(m,{phoneNumber:k.phoneNumber,recaptchaToken:D});return W}}finally{f._reset()}})).apply(this,arguments)}function Ii(){return(Ii=(0,p.Z)(function*(m,c){yield Zt((0,P.m9)(m),c)})).apply(this,arguments)}let Hr=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=Ae(f)}verifyPhoneNumber(f,y){return qn(this.auth,f,(0,P.m9)(y))}static credential(f,y){return Ks._fromVerification(f,y)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:D}=f;return y&&D?Ks._fromTokenResponse(y,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function si(m,c){return c?ne(c):(ee(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Lo extends Ft{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return yn(c,this._buildIdpRequest())}_linkToIdToken(c,f){return yn(c,this._buildIdpRequest(f))}_getReauthenticationResolver(c){return yn(c,this._buildIdpRequest())}_buildIdpRequest(c){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(f.idToken=c),f}}function Il(m){return Cs(m.auth,new Lo(m),m.bypassAuthState)}function wl(m){const{auth:c,user:f}=m;return ee(f,c,"internal-error"),pu(f,new Lo(m),m.bypassAuthState)}function gt(m){return bl.apply(this,arguments)}function bl(){return(bl=(0,p.Z)(function*(m){const{auth:c,user:f}=m;return ee(f,c,"internal-error"),Zt(f,new Lo(m),m.bypassAuthState)})).apply(this,arguments)}class bn{constructor(c,f,y,D,k=!1){this.auth=c,this.resolver=y,this.user=D,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var c=this;return new Promise(function(){var f=(0,p.Z)(function*(y,D){c.pendingPromise={resolve:y,reject:D};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(k){c.reject(k)}});return function(y,D){return f.apply(this,arguments)}}())}onAuthEvent(c){var f=this;return(0,p.Z)(function*(){const{urlResponse:y,sessionId:D,postBody:k,tenantId:W,error:re,type:xe}=c;if(re)return void f.reject(re);const He={auth:f.auth,requestUri:y,sessionId:D,tenantId:W||void 0,postBody:k||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(xe)(He))}catch(nt){f.reject(nt)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Il;case"linkViaPopup":case"linkViaRedirect":return gt;case"reauthViaPopup":case"reauthViaRedirect":return wl;default:Ee(this.auth,"internal-error")}}resolve(c){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dl=new Vt(2e3,1e4);function Au(){return(Au=(0,p.Z)(function*(m,c,f){const y=Ae(m);Oe(m,c,Li);const D=si(y,f);return new ai(y,"signInViaPopup",c,D).executeNotNull()})).apply(this,arguments)}function Ca(){return(Ca=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m);Oe(y.auth,c,Li);const D=si(y.auth,f);return new ai(y.auth,"reauthViaPopup",c,D,y).executeNotNull()})).apply(this,arguments)}function Ia(){return(Ia=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m);Oe(y.auth,c,Li);const D=si(y.auth,f);return new ai(y.auth,"linkViaPopup",c,D,y).executeNotNull()})).apply(this,arguments)}let ai=(()=>{class m extends bn{constructor(f,y,D,k,W){super(f,y,k,W),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,p.Z)(function*(){const y=yield f.execute();return ee(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,p.Z)(function*(){te(1===f.filter.length,"Popup operations only handle one event");const y=no();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(D=>{f.reject(D)}),f.resolver._isIframeWebStorageSupported(f.auth,D=>{D||f.reject(pe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,D;this.pollId=(null===(D=null===(y=this.authWindow)||void 0===y?void 0:y.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Dl.get())};f()}}return m.currentPopupAction=null,m})();const li=new Map;class Dn extends bn{constructor(c,f,y=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var c=()=>super.execute,f=this;return(0,p.Z)(function*(){let y=li.get(f.auth._key());if(!y){try{const k=(yield function Rr(m,c){return Tl.apply(this,arguments)}(f.resolver,f.auth))?yield c().call(f):null;y=()=>Promise.resolve(k)}catch(D){y=()=>Promise.reject(D)}li.set(f.auth._key(),y)}return f.bypassAuthState||li.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(c){var f=()=>super.onAuthEvent,y=this;return(0,p.Z)(function*(){if("signInViaRedirect"===c.type)return f().call(y,c);if("unknown"!==c.type){if(c.eventId){const D=yield y.auth._redirectUserForId(c.eventId);if(D)return y.user=D,f().call(y,c);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Tl(){return(Tl=(0,p.Z)(function*(m,c){const f=w(c),y=I(m);if(!(yield y._isAvailable()))return!1;const D="true"===(yield y._get(f));return yield y._remove(f),D})).apply(this,arguments)}function As(m,c){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(m,c){return I(m)._set(w(c),"true")})).apply(this,arguments)}function I(m){return ne(m._redirectPersistence)}function w(m){return le("pendingRedirect",m.config.apiKey,m.name)}function z(){return(z=(0,p.Z)(function*(m,c,f){const y=Ae(m);Oe(m,c,Li);const D=si(y,f);return yield As(D,y),D._openRedirect(y,c,"signInViaRedirect")})).apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m);Oe(y.auth,c,Li);const D=si(y.auth,f);yield As(D,y.auth);const k=yield Rs(y);return D._openRedirect(y.auth,c,"reauthViaRedirect",k)})).apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(m,c,f){const y=(0,P.m9)(m);Oe(y.auth,c,Li);const D=si(y.auth,f);yield Bi(!1,y,c.providerId),yield As(D,y.auth);const k=yield Rs(y);return D._openRedirect(y.auth,c,"linkViaRedirect",k)})).apply(this,arguments)}function En(){return(En=(0,p.Z)(function*(m,c){return yield Ae(m)._initializationPromise,an(m,c,!1)})).apply(this,arguments)}function an(m,c){return ho.apply(this,arguments)}function ho(){return(ho=(0,p.Z)(function*(m,c,f=!1){const y=Ae(m),D=si(y,c),W=yield new Dn(y,D,f).execute();return W&&!f&&(delete W.user._redirectEventId,yield y._persistUserIfCurrent(W.user),yield y._setRedirectUser(null,c)),W})).apply(this,arguments)}function Rs(m){return nr.apply(this,arguments)}function nr(){return(nr=(0,p.Z)(function*(m){const c=no(`${m.uid}:::`);return m._redirectEventId=c,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),c})).apply(this,arguments)}class $r{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(c,y)&&(f=!0,this.sendToConsumer(c,y),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Sl(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ku(m);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=c,f=!0)),f}sendToConsumer(c,f){var y;if(c.error&&!ku(c)){const D=(null===(y=c.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(pe(this.auth,D))}else f.onAuthEvent(c)}isEventForConsumer(c,f){const y=null===f.eventId||!!c.eventId&&c.eventId===f.eventId;return f.filter.includes(c.type)&&y}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ks(c))}saveEventToCache(c){this.cachedEventUids.add(ks(c)),this.lastProcessedEventTime=Date.now()}}function ks(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(c=>c).join("-")}function ku({type:m,error:c}){return"unknown"===m&&"auth/no-auth-event"===(null==c?void 0:c.code)}function Al(m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(m,c={}){return wt(m,"GET","/v1/projects",c)})).apply(this,arguments)}const gh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kf=/^https?/;function wi(){return(wi=(0,p.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:c}=yield Al(m);for(const f of c)try{if(Rl(f))return}catch(y){}Ee(m,"unauthorized-domain")})).apply(this,arguments)}function Rl(m){const c=lt(),{protocol:f,hostname:y}=new URL(c);if(m.startsWith("chrome-extension://")){const W=new URL(m);return""===W.hostname&&""===y?"chrome-extension:"===f&&m.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===f&&W.hostname===y}if(!Kf.test(f))return!1;if(gh.test(m))return y===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(y)}const Qf=new Vt(3e4,6e4);function Jf(){const m=Gt().___jsl;if(null==m?void 0:m.H)for(const c of Object.keys(m.H))if(m.H[c].r=m.H[c].r||[],m.H[c].L=m.H[c].L||[],m.H[c].r=[...m.H[c].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let Mu=null;function Xf(m){return Mu=Mu||function mh(m){return new Promise((c,f)=>{var y,D,k;function W(){Jf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Jf(),f(pe(m,"network-request-failed"))},timeout:Qf.get()})}if(null===(D=null===(y=Gt().gapi)||void 0===y?void 0:y.iframes)||void 0===D?void 0:D.Iframe)c(gapi.iframes.getContext());else{if(!(null===(k=Gt().gapi)||void 0===k?void 0:k.load)){const re=ao("iframefcb");return Gt()[re]=()=>{gapi.load?W():f(pe(m,"network-request-failed"))},rn(`https://apis.google.com/js/api.js?onload=${re}`).catch(xe=>f(xe))}W()}}).catch(c=>{throw Mu=null,c})}(m),Mu}const Uc=new Vt(5e3,15e3),Ps={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bo(m){const c=m.config;ee(c.authDomain,m,"auth-domain-config-required");const f=c.emulator?jt(c,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,y={apiKey:c.apiKey,appName:m.name,v:se.SDK_VERSION},D=Pu.get(m.config.apiHost);D&&(y.eid=D);const k=m._getFrameworks();return k.length&&(y.fw=k.join(",")),`${f}?${(0,P.xO)(y).slice(1)}`}function fo(){return fo=(0,p.Z)(function*(m){const c=yield Xf(m),f=Gt().gapi;return ee(f,m,"internal-error"),c.open({where:document.body,url:Bo(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ps,dontclear:!0},y=>new Promise(function(){var D=(0,p.Z)(function*(k,W){yield y.restyle({setHideOnLeave:!1});const re=pe(m,"network-request-failed"),xe=Gt().setTimeout(()=>{W(re)},Uc.get());function He(){Gt().clearTimeout(xe),k(y)}y.ping(He).then(He,()=>{W(re)})});return function(k,W){return D.apply(this,arguments)}}()))}),fo.apply(this,arguments)}const tp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ou{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(c){}}}function Hc(m,c,f,y,D,k){ee(m.config.authDomain,m,"auth-domain-config-required"),ee(m.config.apiKey,m,"invalid-api-key");const W={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:y,v:se.SDK_VERSION,eventId:D};if(c instanceof Li){c.setDefaultLanguage(m.languageCode),W.providerId=c.providerId||"",(0,P.xb)(c.getCustomParameters())||(W.customParameters=JSON.stringify(c.getCustomParameters()));for(const[xe,He]of Object.entries(k||{}))W[xe]=He}if(c instanceof lr){const xe=c.getScopes().filter(He=>""!==He);xe.length>0&&(W.scopes=xe.join(","))}m.tenantId&&(W.tid=m.tenantId);const re=W;for(const xe of Object.keys(re))void 0===re[xe]&&delete re[xe];return`${function rp({config:m}){return m.emulator?jt(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,P.xO)(re).slice(1)}`}const es="webStorageSupport";class $c extends class _h{constructor(c){this.factorId=c}_process(c,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(c,f.credential,y);case"signin":return this._finalizeSignIn(c,f.credential);default:return G("unexpected MultiFactorSessionType")}}}{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new $c(c)}_finalizeEnroll(c,f,y){return function Cu(m,c){return wt(m,"POST","/v2/accounts/mfaEnrollment:finalize",xt(m,c))}(c,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,f){return function Fo(m,c){return wt(m,"POST","/v2/accounts/mfaSignIn:finalize",xt(m,c))}(c,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ip=(()=>{class m{constructor(){}static assertion(f){return $c._fromCredential(f)}}return m.FACTOR_ID="phone",m})();var sp="@firebase/auth",Wc="0.19.11";class yh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var f=this;return(0,p.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const f=this.auth.onIdTokenChanged(y=>{var D;c((null===(D=y)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,f),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const f=this.internalListeners.get(c);!f||(this.internalListeners.delete(c),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ts(){return window}function Ta(){return(Ta=(0,p.Z)(function*(m,c,f){var y;const{BuildInfo:D}=ts();te(c.sessionId,"AuthEvent did not contain a session ID");const k=yield Vo(c.sessionId),W={};return Rn()?W.ibi=D.packageName:tn()?W.apn=D.packageName:Ee(m,"operation-not-supported-in-this-environment"),D.displayName&&(W.appDisplayName=D.displayName),W.sessionId=k,Hc(m,f,c.type,void 0,null!==(y=c.eventId)&&void 0!==y?y:void 0,W)})).apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(m){const{BuildInfo:c}=ts(),f={};Rn()?f.iosBundleId=c.packageName:tn()?f.androidPackageName=c.packageName:Ee(m,"operation-not-supported-in-this-environment"),yield Al(m,f)})).apply(this,arguments)}function Lu(){return(Lu=(0,p.Z)(function*(m,c,f){const{cordova:y}=ts();let D=()=>{};try{yield new Promise((k,W)=>{let re=null;function xe(){var qe;k();const ln=null===(qe=y.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof ln&&ln(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function He(){re||(re=window.setTimeout(()=>{W(pe(m,"redirect-cancelled-by-user"))},2e3))}function nt(){"visible"===(null==document?void 0:document.visibilityState)&&He()}c.addPassiveListener(xe),document.addEventListener("resume",He,!1),tn()&&document.addEventListener("visibilitychange",nt,!1),D=()=>{c.removePassiveListener(xe),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",nt,!1),re&&window.clearTimeout(re)}})}finally{D()}})).apply(this,arguments)}function Vo(m){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,p.Z)(function*(m){const c=Sa(m),f=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(f)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Sa(m){if(te(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const c=new ArrayBuffer(m.length),f=new Uint8Array(c);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return f}!function ap(m){(0,se._registerComponent)(new ie.wA("auth",(c,{options:f})=>{const y=c.getProvider("app").getImmediate(),D=c.getProvider("heartbeat"),{apiKey:k,authDomain:W}=y.options;return((re,xe)=>{ee(k&&!k.includes(":"),"invalid-api-key",{appName:re.name}),ee(!(null==W?void 0:W.includes(":")),"argument-error",{appName:re.name});const He={apiKey:k,authDomain:W,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:To(m)},nt=new Ir(re,xe,He);return function oe(m,c){const f=(null==c?void 0:c.persistence)||[],y=(Array.isArray(f)?f:[f]).map(ne);(null==c?void 0:c.errorMap)&&m._updateErrorMap(c.errorMap),m._initializeWithPersistence(y,null==c?void 0:c.popupRedirectResolver)}(nt,f),nt})(y,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,f,y)=>{c.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ie.wA("auth-internal",c=>{const f=Ae(c.getProvider("auth").getImmediate());return new yh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(sp,Wc,function op(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,se.registerVersion)(sp,Wc,"esm2017")}("Browser");class qc extends $r{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(c)),super.onEvent(c)}initialized(){var c=this;return(0,p.Z)(function*(){yield c.initPromise})()}}function Pl(m){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(m){const c=yield Bu()._get(Yc(m));return c&&(yield Bu()._remove(Yc(m))),c})).apply(this,arguments)}function xl(){const m=[],c="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const y=Math.floor(Math.random()*c.length);m.push(c.charAt(y))}return m.join("")}function Bu(){return ne(hn)}function Yc(m){return le("authEvent",m.config.apiKey,m.name)}function Vu(m){if(!(null==m?void 0:m.includes("?")))return{};const[c,...f]=m.split("?");return(0,P.zd)(f.join("?"))}function ed(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function ju(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function Ih(m=(0,P.z$)()){return!("file:"!==ju()&&"ionic:"!==ju()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kn(){try{const m=self.localStorage,c=no();if(m)return m.setItem(c,"1"),m.removeItem(c),!function mo(m=(0,P.z$)()){return function hp(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fp(m=(0,P.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,P.hl)()}catch(m){return xs()&&(0,P.hl)()}return!1}function xs(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fl(){return(function dp(){return"http:"===ju()||"https:"===ju()}()||(0,P.ru)()||Ih())&&!function Hu(){return(0,P.b$)()||(0,P.UG)()}()&&Kn()&&!xs()}function td(){return Ih()&&"undefined"!=typeof document}function jo(){return(jo=(0,p.Z)(function*(){return!!td()&&new Promise(m=>{const c=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),m(!0)})})})).apply(this,arguments)}const Gr={LOCAL:"local",NONE:"none",SESSION:"session"},Ho=ee,rd="persistence";function $o(m){return id.apply(this,arguments)}function id(){return(id=(0,p.Z)(function*(m){yield m._initializationPromise;const c=Ll(),f=le(rd,m.config.apiKey,m.name);c&&c.setItem(f,m._getPersistence())})).apply(this,arguments)}function Ll(){var m;try{return(null===(m=function nd(){return"undefined"!=typeof window?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch(c){return null}}const pp=ee;class Mr{constructor(){this.browserResolver=ne(class po{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fn,this._completeRedirectFn=an}_openPopup(c,f,y,D){var k=this;return(0,p.Z)(function*(){var W;te(null===(W=k.eventManagers[c._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const re=Hc(c,f,y,lt(),D);return function Fu(m,c,f,y=500,D=600){const k=Math.max((window.screen.availHeight-D)/2,0).toString(),W=Math.max((window.screen.availWidth-y)/2,0).toString();let re="";const xe=Object.assign(Object.assign({},tp),{width:y.toString(),height:D.toString(),top:k,left:W}),He=(0,P.z$)().toLowerCase();f&&(re=Vn(He)?"_blank":f),tt(He)&&(c=c||"http://localhost",xe.scrollbars="yes");const nt=Object.entries(xe).reduce((ln,[ui,Bl])=>`${ln}${ui}=${Bl},`,"");if(function Jo(m=(0,P.z$)()){var c;return Rn(m)&&!!(null===(c=window.navigator)||void 0===c?void 0:c.standalone)}(He)&&"_self"!==re)return function jc(m,c){const f=document.createElement("a");f.href=m,f.target=c;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(c||"",re),new Ou(null);const qe=window.open(c||"",re,nt);ee(qe,m,"popup-blocked");try{qe.focus()}catch(ln){}return new Ou(qe)}(c,re,no())})()}_openRedirect(c,f,y,D){var k=this;return(0,p.Z)(function*(){return yield k._originValidation(c),function Oc(m){Gt().location.href=m}(Hc(c,f,y,lt(),D)),new Promise(()=>{})})()}_initialize(c){const f=c._key();if(this.eventManagers[f]){const{manager:D,promise:k}=this.eventManagers[f];return D?Promise.resolve(D):(te(k,"If manager is not set, promise should be"),k)}const y=this.initAndGetManager(c);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(c){var f=this;return(0,p.Z)(function*(){const y=yield function ep(m){return fo.apply(this,arguments)}(c),D=new $r(c);return y.register("authEvent",k=>(ee(null==k?void 0:k.authEvent,c,"invalid-auth-event"),{status:D.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[c._key()]={manager:D},f.iframes[c._key()]=y,D})()}_isIframeWebStorageSupported(c,f){this.iframes[c._key()].send(es,{type:es},D=>{var k;const W=null===(k=null==D?void 0:D[0])||void 0===k?void 0:k[es];void 0!==W&&f(!!W),Ee(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yf(m){return wi.apply(this,arguments)}(c)),this.originValidationPromises[f]}get _shouldInitProactively(){return hi()||At()||Rn()}}),this.cordovaResolver=ne(class Xc{constructor(){this._redirectPersistence=Fn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=an}_initialize(c){var f=this;return(0,p.Z)(function*(){const y=c._key();let D=f.eventManagers.get(y);return D||(D=new qc(c),f.eventManagers.set(y,D),f.attachCallbackListeners(c,D)),D})()}_openPopup(c){Ee(c,"operation-not-supported-in-this-environment")}_openRedirect(c,f,y,D){var k=this;return(0,p.Z)(function*(){!function Uu(m){var c,f,y,D,k,W,re,xe,He,nt;const qe=ts();ee("function"==typeof(null===(c=null==qe?void 0:qe.universalLinks)||void 0===c?void 0:c.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(f=null==qe?void 0:qe.BuildInfo)||void 0===f?void 0:f.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(k=null===(D=null===(y=null==qe?void 0:qe.cordova)||void 0===y?void 0:y.plugins)||void 0===D?void 0:D.browsertab)||void 0===k?void 0:k.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(xe=null===(re=null===(W=null==qe?void 0:qe.cordova)||void 0===W?void 0:W.plugins)||void 0===re?void 0:re.browsertab)||void 0===xe?void 0:xe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(nt=null===(He=null==qe?void 0:qe.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===nt?void 0:nt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const W=yield k._initialize(c);yield W.initialized(),W.resetRedirect(),function wa(){li.clear()}(),yield k._originValidation(c);const re=function Kc(m,c,f=null){return{type:c,eventId:f,urlResponse:null,sessionId:xl(),postBody:null,tenantId:m.tenantId,error:pe(m,"no-auth-event")}}(c,y,D);yield function Km(m,c){return Bu()._set(Yc(m),c)}(c,re);const xe=yield function Gc(m,c,f){return Ta.apply(this,arguments)}(c,re,f),He=yield function Ml(m){const{cordova:c}=ts();return new Promise(f=>{c.plugins.browsertab.isAvailable(y=>{let D=null;y?c.plugins.browsertab.openUrl(m):D=c.InAppBrowser.open(m,function ms(m=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(D)})})}(xe);return function vh(m,c,f){return Lu.apply(this,arguments)}(c,W,He)})()}_isIframeWebStorageSupported(c,f){throw new Error("Method not implemented.")}_originValidation(c){const f=c._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function zc(m){return Wr.apply(this,arguments)}(c)),this.originValidationPromises[f]}attachCallbackListeners(c,f){const{universalLinks:y,handleOpenURL:D,BuildInfo:k}=ts(),W=setTimeout((0,p.Z)(function*(){yield Pl(c),f.onEvent(ed())}),500),re=function(){var nt=(0,p.Z)(function*(qe){clearTimeout(W);const ln=yield Pl(c);let ui=null;ln&&(null==qe?void 0:qe.url)&&(ui=function up(m,c){var f,y;const D=function Nl(m){const c=Vu(m),f=c.link?decodeURIComponent(c.link):void 0,y=Vu(f).link,D=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Vu(D).link||D||y||f||m}(c);if(D.includes("/__/auth/callback")){const k=Vu(D),W=k.firebaseError?function Qc(m){try{return JSON.parse(m)}catch(c){return null}}(decodeURIComponent(k.firebaseError)):null,re=null===(y=null===(f=null==W?void 0:W.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],xe=re?pe(re):null;return xe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(ln,qe.url)),f.onEvent(ui||ed())});return function(ln){return nt.apply(this,arguments)}}();void 0!==y&&"function"==typeof y.subscribe&&y.subscribe(null,re);const xe=D,He=`${k.packageName.toLowerCase()}://`;ts().handleOpenURL=function(){var nt=(0,p.Z)(function*(qe){if(qe.toLowerCase().startsWith(He)&&re({url:qe}),"function"==typeof xe)try{xe(qe)}catch(ln){console.error(ln)}});return function(qe){return nt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Fn,this._completeRedirectFn=an}_initialize(c){var f=this;return(0,p.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,f,y,D){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(c,f,y,D)})()}_openRedirect(c,f,y,D){var k=this;return(0,p.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(c,f,y,D)})()}_isIframeWebStorageSupported(c,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,f)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return td()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,p.Z)(function*(){if(c.underlyingResolver)return;const f=yield function rr(){return jo.apply(this,arguments)}();c.underlyingResolver=f?c.cordovaResolver:c.browserResolver})()}}function Dh(m){return m.unwrap()}function Wo(m){return Th(m)}function Th(m){const{_tokenResponse:c}=m instanceof P.ZR?m.customData:m;if(!c)return null;if(!(m instanceof P.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Hr.credentialFromResult(m);const f=c.providerId;if(!f||"password"===f)return null;let y;switch(f){case"google.com":y=Ao;break;case"facebook.com":y=vs;break;case"github.com":y=hu;break;case"twitter.com":y=ia;break;default:const{oauthIdToken:D,oauthAccessToken:k,oauthTokenSecret:W,pendingToken:re,nonce:xe}=c;return k||W||D||re?re?f.startsWith("saml.")?Qs._create(f,re):gi._fromParams({providerId:f,signInMethod:f,pendingToken:re,idToken:D,accessToken:k}):new Ys(f).credential({idToken:D,accessToken:k,rawNonce:xe}):null}return m instanceof P.ZR?y.credentialFromError(m):y.credentialFromResult(m)}function Yn(m,c){return c.catch(f=>{throw f instanceof P.ZR&&function mp(m,c){var f;const y=null===(f=c.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===c.code)c.resolver=new _p(m,function ya(m,c){var f;const y=(0,P.m9)(m),D=c;return ee(c.customData.operationType,y,"argument-error"),ee(null===(f=D.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),No._fromError(y,D)}(m,c));else if(y){const D=Th(c),k=c;D&&(k.credential=D,k.tenantId=y.tenantId||void 0,k.email=y.email||void 0,k.phoneNumber=y.phoneNumber||void 0)}}(m,f),f}).then(f=>{const D=f.user;return{operationType:f.operationType,credential:Wo(f),additionalUserInfo:Gn(f),user:Ns.getOrCreate(D)}})}function sd(m,c){return od.apply(this,arguments)}function od(){return(od=(0,p.Z)(function*(m,c){const f=yield c;return{verificationId:f.verificationId,confirm:y=>Yn(m,f.confirm(y))}})).apply(this,arguments)}class _p{constructor(c,f){this.resolver=f,this.auth=function gp(m){return m.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Yn(Dh(this.auth),this.resolver.resolveSignIn(c))}}class Ns{constructor(c){this._delegate=c,this.multiFactor=function Iu(m){const c=(0,P.m9)(m);return to.has(c)||to.set(c,vi._fromUser(c)),to.get(c)}(c)}static getOrCreate(c){return Ns.USER_MAP.has(c)||Ns.USER_MAP.set(c,new Ns(c)),Ns.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var f=this;return(0,p.Z)(function*(){return Yn(f.auth,Ur(f._delegate,c))})()}linkWithPhoneNumber(c,f){var y=this;return(0,p.Z)(function*(){return sd(y.auth,function vl(m,c,f){return uo.apply(this,arguments)}(y._delegate,c,f))})()}linkWithPopup(c){var f=this;return(0,p.Z)(function*(){return Yn(f.auth,function oi(m,c,f){return Ia.apply(this,arguments)}(f._delegate,c,Mr))})()}linkWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield $o(Ae(f.auth)),function Ve(m,c,f){return function at(m,c,f){return ft.apply(this,arguments)}(m,c,f)}(f._delegate,c,Mr)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var f=this;return(0,p.Z)(function*(){return Yn(f.auth,Vi(f._delegate,c))})()}reauthenticateWithPhoneNumber(c,f){return sd(this.auth,function ph(m,c,f){return El.apply(this,arguments)}(this._delegate,c,f))}reauthenticateWithPopup(c){return Yn(this.auth,function Ss(m,c,f){return Ca.apply(this,arguments)}(this._delegate,c,Mr))}reauthenticateWithRedirect(c){var f=this;return(0,p.Z)(function*(){return yield $o(Ae(f.auth)),function X(m,c,f){return function be(m,c,f){return De.apply(this,arguments)}(m,c,f)}(f._delegate,c,Mr)})()}sendEmailVerification(c){return function Br(m,c){return al.apply(this,arguments)}(this._delegate,c)}unlink(c){var f=this;return(0,p.Z)(function*(){return yield function Ro(m,c){return tl.apply(this,arguments)}(f._delegate,c),f})()}updateEmail(c){return function cl(m,c){return dl((0,P.m9)(m),c,null)}(this._delegate,c)}updatePassword(c){return function _u(m,c){return dl((0,P.m9)(m),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Cl(m,c){return Ii.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function xo(m,c){return ul.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,f){return function ma(m,c,f){return _a.apply(this,arguments)}(this._delegate,c,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ns.USER_MAP=new WeakMap;const Ul=ee;let ad=(()=>{class m{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=f.options;Ul(D,"invalid-api-key",{appName:f.name}),Ul(D,"invalid-api-key",{appName:f.name});const k="undefined"!=typeof window?Mr:void 0;this._delegate=y.initialize({options:{persistence:yp(D,f.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function Wt(m,c,f){const y=Ae(m);ee(y._canInitEmulator,y,"emulator-config-failed"),ee(/^https?:\/\//.test(c),y,"invalid-emulator-scheme");const D=!!(null==f?void 0:f.disableWarnings),k=Nn(c),{host:W,port:re}=function Pi(m){const c=Nn(m),f=/(\/\/)?([^?#/]+)/.exec(m.substr(c.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(y);if(D){const k=D[1];return{host:k,port:_n(y.substr(k.length+1))}}{const[k,W]=y.split(":");return{host:k,port:_n(W)}}}(c);y.config.emulator={url:`${k}//${W}${null===re?"":`:${re}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:W,port:re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function ei(){function m(){const c=document.createElement("p"),f=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,f,y)}applyActionCode(f){return function rl(m,c){return ye.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return yt(this._delegate,f)}confirmPasswordReset(f,y){return function fa(m,c,f){return nl.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var D=this;return(0,p.Z)(function*(){return Yn(D._delegate,function eo(m,c,f){return dr.apply(this,arguments)}(D._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ga(m,c){return Wi.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function ol(m,c){const f=ys.parseLink(c);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,p.Z)(function*(){Ul(Fl(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function ut(m,c){return En.apply(this,arguments)}(f._delegate,Mr);return y?Yn(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Ch(m,c){Ae(m)._logFramework(c)}(this._delegate,f)}onAuthStateChanged(f,y,D){const{next:k,error:W,complete:re}=ld(f,y,D);return this._delegate.onAuthStateChanged(k,W,re)}onIdTokenChanged(f,y,D){const{next:k,error:W,complete:re}=ld(f,y,D);return this._delegate.onIdTokenChanged(k,W,re)}sendSignInLinkToEmail(f,y){return function sl(m,c,f){return mu.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function da(m,c,f){return ha.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,p.Z)(function*(){let D;switch(function wh(m,c){Ho(Object.values(Gr).includes(c),m,"invalid-persistence-type"),(0,P.b$)()?Ho(c!==Gr.SESSION,m,"unsupported-persistence-type"):(0,P.UG)()?Ho(c===Gr.NONE,m,"unsupported-persistence-type"):xs()?Ho(c===Gr.NONE||c===Gr.LOCAL&&(0,P.hl)(),m,"unsupported-persistence-type"):Ho(c===Gr.NONE||Kn(),m,"unsupported-persistence-type")}(y._delegate,f),f){case Gr.SESSION:D=Fn;break;case Gr.LOCAL:D=(yield ne(Vr)._isAvailable())?Vr:hn;break;case Gr.NONE:D=$;break;default:return Ee("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Yn(this._delegate,function oa(m){return fu.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Yn(this._delegate,dn(this._delegate,f))}signInWithCustomToken(f){return Yn(this._delegate,function ji(m,c){return Hi.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return Yn(this._delegate,function il(m,c,f){return dn((0,P.m9)(m),el.credential(c,f))}(this._delegate,f,y))}signInWithEmailLink(f,y){return Yn(this._delegate,function pa(m,c,f){return $i.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return sd(this._delegate,function Ea(m,c,f){return Xt.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,p.Z)(function*(){return Ul(Fl(),y._delegate,"operation-not-supported-in-this-environment"),Yn(y._delegate,function Xi(m,c,f){return Au.apply(this,arguments)}(y._delegate,f,Mr))})()}signInWithRedirect(f){var y=this;return(0,p.Z)(function*(){return Ul(Fl(),y._delegate,"operation-not-supported-in-this-environment"),yield $o(y._delegate),function A(m,c,f){return function F(m,c,f){return z.apply(this,arguments)}(m,c,f)}(y._delegate,f,Mr)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Qt(m,c){return Xs.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Gr,m})();function ld(m,c,f){let y=m;"function"!=typeof m&&({next:y,error:c,complete:f}=m);const D=y;return{next:W=>D(W&&Ns.getOrCreate(W)),error:c,complete:f}}function yp(m,c){const f=function bh(m,c){const f=Ll();if(!f)return[];const y=le(rd,m,c);switch(f.getItem(y)){case Gr.NONE:return[$];case Gr.LOCAL:return[Vr,Fn];case Gr.SESSION:return[Fn];default:return[]}}(m,c);if("undefined"!=typeof self&&!f.includes(Vr)&&f.push(Vr),"undefined"!=typeof window)for(const y of[hn,Fn])f.includes(y)||f.push(y);return f.includes($)||f.push($),f}class ud{constructor(){this.providerId="phone",this._delegate=new Hr(Dh(q.Z.auth()))}static credential(c,f){return Hr.credential(c,f)}verifyPhoneNumber(c,f){return this._delegate.verifyPhoneNumber(c,f)}unwrap(){return this._delegate}}ud.PHONE_SIGN_IN_METHOD=Hr.PHONE_SIGN_IN_METHOD,ud.PROVIDER_ID=Hr.PROVIDER_ID;const vp=ee;class Ep{constructor(c,f,y=q.Z.app()){var D;vp(null===(D=y.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new fh(c,f,y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sh(m){m.INTERNAL.registerComponent(new ie.wA("auth-compat",c=>{const f=c.getProvider("app-compat").getImmediate(),y=c.getProvider("auth");return new ad(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:el,FacebookAuthProvider:vs,GithubAuthProvider:hu,GoogleAuthProvider:Ao,OAuthProvider:Ys,SAMLAuthProvider:br,PhoneAuthProvider:ud,PhoneMultiFactorGenerator:ip,RecaptchaVerifier:Ep,TwitterAuthProvider:ia,Auth:ad,AuthCredential:Ft,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.11")}(q.Z)},8306:(ze,ve,M)=>{M.d(ve,{y:()=>j});var p=M(930),q=M(727),P=M(8822),se=M(4671);var ie=M(2416),ue=M(576),ae=M(2806);let j=(()=>{class we{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const ce=new we;return ce.source=this,ce.operator=ke,ce}subscribe(ke,ce,_e){const $e=function Le(we){return we&&we instanceof p.Lv||function Y(we){return we&&(0,ue.m)(we.next)&&(0,ue.m)(we.error)&&(0,ue.m)(we.complete)}(we)&&(0,q.Nn)(we)}(ke)?ke:new p.Hp(ke,ce,_e);return(0,ae.x)(()=>{const{operator:Ue,source:Ee}=this;$e.add(Ue?Ue.call($e,Ee):Ee?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(ke){try{return this._subscribe(ke)}catch(ce){ke.error(ce)}}forEach(ke,ce){return new(ce=H(ce))((_e,$e)=>{const Ue=new p.Hp({next:Ee=>{try{ke(Ee)}catch(pe){$e(pe),Ue.unsubscribe()}},error:$e,complete:_e});this.subscribe(Ue)})}_subscribe(ke){var ce;return null===(ce=this.source)||void 0===ce?void 0:ce.subscribe(ke)}[P.L](){return this}pipe(...ke){return function de(we){return 0===we.length?se.y:1===we.length?we[0]:function(ke){return we.reduce((ce,_e)=>_e(ce),ke)}}(ke)(this)}toPromise(ke){return new(ke=H(ke))((ce,_e)=>{let $e;this.subscribe(Ue=>$e=Ue,Ue=>_e(Ue),()=>ce($e))})}}return we.create=Se=>new we(Se),we})();function H(we){var Se;return null!==(Se=null!=we?we:ie.v.Promise)&&void 0!==Se?Se:Promise}},7579:(ze,ve,M)=>{M.d(ve,{x:()=>ie});var p=M(8306),q=M(727);const se=(0,M(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=M(8737),de=M(2806);let ie=(()=>{class ae extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new ue(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new se}next(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:Le,observers:we}=this;return Y||Le?q.Lc:(this.currentObservers=null,we.push(H),new q.w0(()=>{this.currentObservers=null,(0,J.P)(we,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:Le,isStopped:we}=this;Y?H.error(Le):we&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return ae.create=(j,H)=>new ue(j,H),ae})();class ue extends ie{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,j)}error(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==Y?Y:q.Lc}}},930:(ze,ve,M)=>{M.d(ve,{Hp:()=>ke,Lv:()=>Y});var p=M(576),q=M(727),P=M(2416),se=M(7849),J=M(5032);const de=ae("C",void 0,void 0);function ae(Ee,pe,me){return{kind:Ee,value:pe,error:me}}var j=M(3410),H=M(2806);class Y extends q.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,q.Nn)(pe)&&pe.add(this)):this.destination=Ue}static create(pe,me,Oe){return new ke(pe,me,Oe)}next(pe){this.isStopped?$e(function ue(Ee){return ae("N",Ee,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?$e(function ie(Ee){return ae("E",void 0,Ee)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?$e(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function we(Ee,pe){return Le.call(Ee,pe)}class Se{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:me}=this;if(me.next)try{me.next(pe)}catch(Oe){ce(Oe)}}error(pe){const{partialObserver:me}=this;if(me.error)try{me.error(pe)}catch(Oe){ce(Oe)}else ce(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(me){ce(me)}}}class ke extends Y{constructor(pe,me,Oe){let Ne;if(super(),(0,p.m)(pe)||!pe)Ne={next:null!=pe?pe:void 0,error:null!=me?me:void 0,complete:null!=Oe?Oe:void 0};else{let ee;this&&P.v.useDeprecatedNextContext?(ee=Object.create(pe),ee.unsubscribe=()=>this.unsubscribe(),Ne={next:pe.next&&we(pe.next,ee),error:pe.error&&we(pe.error,ee),complete:pe.complete&&we(pe.complete,ee)}):Ne=pe}this.destination=new Se(Ne)}}function ce(Ee){P.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ee):(0,se.h)(Ee)}function $e(Ee,pe){const{onStoppedNotification:me}=P.v;me&&j.z.setTimeout(()=>me(Ee,pe))}const Ue={closed:!0,next:J.Z,error:function _e(Ee){throw Ee},complete:J.Z}},727:(ze,ve,M)=>{M.d(ve,{Lc:()=>de,w0:()=>J,Nn:()=>ie});var p=M(576);const P=(0,M(3888).d)(ae=>function(H){ae(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,Le)=>`${Le+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var se=M(8737);class J{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const we of H)we.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,p.m)(Y))try{Y()}catch(we){j=we instanceof P?we.errors:[we]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const we of Le)try{ue(we)}catch(Se){j=null!=j?j:[],Se instanceof P?j=[...j,...Se.errors]:j.push(Se)}}if(j)throw new P(j)}}add(j){var H;if(j&&j!==this)if(this.closed)ue(j);else{if(j instanceof J){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,se.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,se.P)(H,j),j instanceof J&&j._removeParent(this)}}J.EMPTY=(()=>{const ae=new J;return ae.closed=!0,ae})();const de=J.EMPTY;function ie(ae){return ae instanceof J||ae&&"closed"in ae&&(0,p.m)(ae.remove)&&(0,p.m)(ae.add)&&(0,p.m)(ae.unsubscribe)}function ue(ae){(0,p.m)(ae)?ae():ae.unsubscribe()}},2416:(ze,ve,M)=>{M.d(ve,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ze,ve,M)=>{M.d(ve,{E:()=>q});const q=new(M(8306).y)(J=>J.complete())},8996:(ze,ve,M)=>{M.d(ve,{D:()=>pe});var p=M(8421),q=M(5363),P=M(9468),de=M(8306),ue=M(2202),ae=M(576),j=M(9672);function Y(me,Oe){if(!me)throw new Error("Iterable cannot be null");return new de.y(Ne=>{(0,j.f)(Ne,Oe,()=>{const ee=me[Symbol.asyncIterator]();(0,j.f)(Ne,Oe,()=>{ee.next().then(G=>{G.done?Ne.complete():Ne.next(G.value)})},0,!0)})})}var Le=M(3670),we=M(8239),Se=M(1144),ke=M(6495),ce=M(2206),_e=M(4532),$e=M(3260);function pe(me,Oe){return Oe?function Ee(me,Oe){if(null!=me){if((0,Le.c)(me))return function se(me,Oe){return(0,p.Xf)(me).pipe((0,P.R)(Oe),(0,q.Q)(Oe))}(me,Oe);if((0,Se.z)(me))return function ie(me,Oe){return new de.y(Ne=>{let ee=0;return Oe.schedule(function(){ee===me.length?Ne.complete():(Ne.next(me[ee++]),Ne.closed||this.schedule())})})}(me,Oe);if((0,we.t)(me))return function J(me,Oe){return(0,p.Xf)(me).pipe((0,P.R)(Oe),(0,q.Q)(Oe))}(me,Oe);if((0,ce.D)(me))return Y(me,Oe);if((0,ke.T)(me))return function H(me,Oe){return new de.y(Ne=>{let ee;return(0,j.f)(Ne,Oe,()=>{ee=me[ue.h](),(0,j.f)(Ne,Oe,()=>{let G,te;try{({value:G,done:te}=ee.next())}catch(he){return void Ne.error(he)}te?Ne.complete():Ne.next(G)},0,!0)}),()=>(0,ae.m)(null==ee?void 0:ee.return)&&ee.return()})}(me,Oe);if((0,$e.L)(me))return function Ue(me,Oe){return Y((0,$e.Q)(me),Oe)}(me,Oe)}throw(0,_e.z)(me)}(me,Oe):(0,p.Xf)(me)}},8421:(ze,ve,M)=>{M.d(ve,{Xf:()=>Le});var p=M(655),q=M(1144),P=M(8239),se=M(8306),J=M(3670),de=M(2206),ie=M(4532),ue=M(6495),ae=M(3260),j=M(576),H=M(7849),Y=M(8822);function Le(Ee){if(Ee instanceof se.y)return Ee;if(null!=Ee){if((0,J.c)(Ee))return function we(Ee){return new se.y(pe=>{const me=Ee[Y.L]();if((0,j.m)(me.subscribe))return me.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,q.z)(Ee))return function Se(Ee){return new se.y(pe=>{for(let me=0;me<Ee.length&&!pe.closed;me++)pe.next(Ee[me]);pe.complete()})}(Ee);if((0,P.t)(Ee))return function ke(Ee){return new se.y(pe=>{Ee.then(me=>{pe.closed||(pe.next(me),pe.complete())},me=>pe.error(me)).then(null,H.h)})}(Ee);if((0,de.D)(Ee))return _e(Ee);if((0,ue.T)(Ee))return function ce(Ee){return new se.y(pe=>{for(const me of Ee)if(pe.next(me),pe.closed)return;pe.complete()})}(Ee);if((0,ae.L)(Ee))return function $e(Ee){return _e((0,ae.Q)(Ee))}(Ee)}throw(0,ie.z)(Ee)}function _e(Ee){return new se.y(pe=>{(function Ue(Ee,pe){var me,Oe,Ne,ee;return(0,p.mG)(this,void 0,void 0,function*(){try{for(me=(0,p.KL)(Ee);!(Oe=yield me.next()).done;)if(pe.next(Oe.value),pe.closed)return}catch(G){Ne={error:G}}finally{try{Oe&&!Oe.done&&(ee=me.return)&&(yield ee.call(me))}finally{if(Ne)throw Ne.error}}pe.complete()})})(Ee,pe).catch(me=>pe.error(me))})}},6451:(ze,ve,M)=>{M.d(ve,{T:()=>de});var p=M(8189),q=M(8421),P=M(515),se=M(7669),J=M(8996);function de(...ie){const ue=(0,se.yG)(ie),ae=(0,se._6)(ie,1/0),j=ie;return j.length?1===j.length?(0,q.Xf)(j[0]):(0,p.J)(ae)((0,J.D)(j,ue)):P.E}},5403:(ze,ve,M)=>{M.d(ve,{x:()=>q});var p=M(930);function q(se,J,de,ie,ue){return new P(se,J,de,ie,ue)}class P extends p.Lv{constructor(J,de,ie,ue,ae,j){super(J),this.onFinalize=ae,this.shouldUnsubscribe=j,this._next=de?function(H){try{de(H)}catch(Y){J.error(Y)}}:super._next,this._error=ue?function(H){try{ue(H)}catch(Y){J.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(H){J.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(ze,ve,M)=>{M.d(ve,{U:()=>P});var p=M(4482),q=M(5403);function P(se,J){return(0,p.e)((de,ie)=>{let ue=0;de.subscribe((0,q.x)(ie,ae=>{ie.next(se.call(J,ae,ue++))}))})}},8189:(ze,ve,M)=>{M.d(ve,{J:()=>P});var p=M(5577),q=M(4671);function P(se=1/0){return(0,p.z)(q.y,se)}},5577:(ze,ve,M)=>{M.d(ve,{z:()=>ue});var p=M(4004),q=M(8421),P=M(4482),se=M(9672),J=M(5403),ie=M(576);function ue(ae,j,H=1/0){return(0,ie.m)(j)?ue((Y,Le)=>(0,p.U)((we,Se)=>j(Y,we,Le,Se))((0,q.Xf)(ae(Y,Le))),H):("number"==typeof j&&(H=j),(0,P.e)((Y,Le)=>function de(ae,j,H,Y,Le,we,Se,ke){const ce=[];let _e=0,$e=0,Ue=!1;const Ee=()=>{Ue&&!ce.length&&!_e&&j.complete()},pe=Oe=>_e<Y?me(Oe):ce.push(Oe),me=Oe=>{we&&j.next(Oe),_e++;let Ne=!1;(0,q.Xf)(H(Oe,$e++)).subscribe((0,J.x)(j,ee=>{null==Le||Le(ee),we?pe(ee):j.next(ee)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(_e--;ce.length&&_e<Y;){const ee=ce.shift();Se?(0,se.f)(j,Se,()=>me(ee)):me(ee)}Ee()}catch(ee){j.error(ee)}}))};return ae.subscribe((0,J.x)(j,pe,()=>{Ue=!0,Ee()})),()=>{null==ke||ke()}}(Y,Le,ae,H)))}},5363:(ze,ve,M)=>{M.d(ve,{Q:()=>se});var p=M(9672),q=M(4482),P=M(5403);function se(J,de=0){return(0,q.e)((ie,ue)=>{ie.subscribe((0,P.x)(ue,ae=>(0,p.f)(ue,J,()=>ue.next(ae),de),()=>(0,p.f)(ue,J,()=>ue.complete(),de),ae=>(0,p.f)(ue,J,()=>ue.error(ae),de)))})}},3099:(ze,ve,M)=>{M.d(ve,{B:()=>de});var p=M(8996),q=M(5698),P=M(7579),se=M(930),J=M(4482);function de(ue={}){const{connector:ae=(()=>new P.x),resetOnError:j=!0,resetOnComplete:H=!0,resetOnRefCountZero:Y=!0}=ue;return Le=>{let we=null,Se=null,ke=null,ce=0,_e=!1,$e=!1;const Ue=()=>{null==Se||Se.unsubscribe(),Se=null},Ee=()=>{Ue(),we=ke=null,_e=$e=!1},pe=()=>{const me=we;Ee(),null==me||me.unsubscribe()};return(0,J.e)((me,Oe)=>{ce++,!$e&&!_e&&Ue();const Ne=ke=null!=ke?ke:ae();Oe.add(()=>{ce--,0===ce&&!$e&&!_e&&(Se=ie(pe,Y))}),Ne.subscribe(Oe),we||(we=new se.Hp({next:ee=>Ne.next(ee),error:ee=>{$e=!0,Ue(),Se=ie(Ee,j,ee),Ne.error(ee)},complete:()=>{_e=!0,Ue(),Se=ie(Ee,H),Ne.complete()}}),(0,p.D)(me).subscribe(we))})(Le)}}function ie(ue,ae,...j){return!0===ae?(ue(),null):!1===ae?null:ae(...j).pipe((0,q.q)(1)).subscribe(()=>ue())}},9468:(ze,ve,M)=>{M.d(ve,{R:()=>q});var p=M(4482);function q(P,se=0){return(0,p.e)((J,de)=>{de.add(P.schedule(()=>J.subscribe(de),se))})}},5698:(ze,ve,M)=>{M.d(ve,{q:()=>se});var p=M(515),q=M(4482),P=M(5403);function se(J){return J<=0?()=>p.E:(0,q.e)((de,ie)=>{let ue=0;de.subscribe((0,P.x)(ie,ae=>{++ue<=J&&(ie.next(ae),J<=ue&&ie.complete())}))})}},8505:(ze,ve,M)=>{M.d(ve,{b:()=>J});var p=M(576),q=M(4482),P=M(5403),se=M(4671);function J(de,ie,ue){const ae=(0,p.m)(de)||ie||ue?{next:de,error:ie,complete:ue}:de;return ae?(0,q.e)((j,H)=>{var Y;null===(Y=ae.subscribe)||void 0===Y||Y.call(ae);let Le=!0;j.subscribe((0,P.x)(H,we=>{var Se;null===(Se=ae.next)||void 0===Se||Se.call(ae,we),H.next(we)},()=>{var we;Le=!1,null===(we=ae.complete)||void 0===we||we.call(ae),H.complete()},we=>{var Se;Le=!1,null===(Se=ae.error)||void 0===Se||Se.call(ae,we),H.error(we)},()=>{var we,Se;Le&&(null===(we=ae.unsubscribe)||void 0===we||we.call(ae)),null===(Se=ae.finalize)||void 0===Se||Se.call(ae)}))}):se.y}},4408:(ze,ve,M)=>{M.d(ve,{o:()=>J});var p=M(727);class q extends p.w0{constructor(ie,ue){super()}schedule(ie,ue=0){return this}}const P={setInterval(de,ie,...ue){const{delegate:ae}=P;return(null==ae?void 0:ae.setInterval)?ae.setInterval(de,ie,...ue):setInterval(de,ie,...ue)},clearInterval(de){const{delegate:ie}=P;return((null==ie?void 0:ie.clearInterval)||clearInterval)(de)},delegate:void 0};var se=M(8737);class J extends q{constructor(ie,ue){super(ie,ue),this.scheduler=ie,this.work=ue,this.pending=!1}schedule(ie,ue=0){if(this.closed)return this;this.state=ie;const ae=this.id,j=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(j,ae,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(j,this.id,ue),this}requestAsyncId(ie,ue,ae=0){return P.setInterval(ie.flush.bind(ie,this),ae)}recycleAsyncId(ie,ue,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return ue;P.clearInterval(ue)}execute(ie,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(ie,ue);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ue){let j,ae=!1;try{this.work(ie)}catch(H){ae=!0,j=H||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ue}=this,{actions:ae}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ae,this),null!=ie&&(this.id=this.recycleAsyncId(ue,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(ze,ve,M)=>{M.d(ve,{v:()=>P});var p=M(6063);class q{constructor(J,de=q.now){this.schedulerActionCtor=J,this.now=de}schedule(J,de=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,de)}}q.now=p.l.now;class P extends q{constructor(J,de=q.now){super(J,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:de}=this;if(this._active)return void de.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=de.shift());if(this._active=!1,ie){for(;J=de.shift();)J.unsubscribe();throw ie}}}},4986:(ze,ve,M)=>{M.d(ve,{z:()=>P});var p=M(4408);const P=new(M(7565).v)(p.o)},6063:(ze,ve,M)=>{M.d(ve,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ze,ve,M)=>{M.d(ve,{z:()=>p});const p={setTimeout(q,P,...se){const{delegate:J}=p;return(null==J?void 0:J.setTimeout)?J.setTimeout(q,P,...se):setTimeout(q,P,...se)},clearTimeout(q){const{delegate:P}=p;return((null==P?void 0:P.clearTimeout)||clearTimeout)(q)},delegate:void 0}},2202:(ze,ve,M)=>{M.d(ve,{h:()=>q});const q=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ze,ve,M)=>{M.d(ve,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ze,ve,M)=>{M.d(ve,{_6:()=>de,jO:()=>se,yG:()=>J});var p=M(576);function P(ie){return ie[ie.length-1]}function se(ie){return(0,p.m)(P(ie))?ie.pop():void 0}function J(ie){return function q(ie){return ie&&(0,p.m)(ie.schedule)}(P(ie))?ie.pop():void 0}function de(ie,ue){return"number"==typeof P(ie)?ie.pop():ue}},8737:(ze,ve,M)=>{function p(q,P){if(q){const se=q.indexOf(P);0<=se&&q.splice(se,1)}}M.d(ve,{P:()=>p})},3888:(ze,ve,M)=>{function p(q){const se=q(J=>{Error.call(J),J.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}M.d(ve,{d:()=>p})},2806:(ze,ve,M)=>{M.d(ve,{x:()=>P,O:()=>se});var p=M(2416);let q=null;function P(J){if(p.v.useDeprecatedSynchronousErrorHandling){const de=!q;if(de&&(q={errorThrown:!1,error:null}),J(),de){const{errorThrown:ie,error:ue}=q;if(q=null,ie)throw ue}}else J()}function se(J){p.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=J)}},9672:(ze,ve,M)=>{function p(q,P,se,J=0,de=!1){const ie=P.schedule(function(){se(),de?q.add(this.schedule(null,J)):this.unsubscribe()},J);if(q.add(ie),!de)return ie}M.d(ve,{f:()=>p})},4671:(ze,ve,M)=>{function p(q){return q}M.d(ve,{y:()=>p})},1144:(ze,ve,M)=>{M.d(ve,{z:()=>p});const p=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(ze,ve,M)=>{M.d(ve,{D:()=>q});var p=M(576);function q(P){return Symbol.asyncIterator&&(0,p.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(ze,ve,M)=>{function p(q){return"function"==typeof q}M.d(ve,{m:()=>p})},3670:(ze,ve,M)=>{M.d(ve,{c:()=>P});var p=M(8822),q=M(576);function P(se){return(0,q.m)(se[p.L])}},6495:(ze,ve,M)=>{M.d(ve,{T:()=>P});var p=M(2202),q=M(576);function P(se){return(0,q.m)(null==se?void 0:se[p.h])}},8239:(ze,ve,M)=>{M.d(ve,{t:()=>q});var p=M(576);function q(P){return(0,p.m)(null==P?void 0:P.then)}},3260:(ze,ve,M)=>{M.d(ve,{Q:()=>P,L:()=>se});var p=M(655),q=M(576);function P(J){return(0,p.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:ue,done:ae}=yield(0,p.qq)(ie.read());if(ae)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ue)}}finally{ie.releaseLock()}})}function se(J){return(0,q.m)(null==J?void 0:J.getReader)}},4482:(ze,ve,M)=>{M.d(ve,{A:()=>q,e:()=>P});var p=M(576);function q(se){return(0,p.m)(null==se?void 0:se.lift)}function P(se){return J=>{if(q(J))return J.lift(function(de){try{return se(de,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ze,ve,M)=>{function p(){}M.d(ve,{Z:()=>p})},7849:(ze,ve,M)=>{M.d(ve,{h:()=>P});var p=M(2416),q=M(3410);function P(se){q.z.setTimeout(()=>{const{onUnhandledError:J}=p.v;if(!J)throw se;J(se)})}},4532:(ze,ve,M)=>{function p(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(ve,{z:()=>p})},655:(ze,ve,M)=>{function se(G,te){var he={};for(var ne in G)Object.prototype.hasOwnProperty.call(G,ne)&&te.indexOf(ne)<0&&(he[ne]=G[ne]);if(null!=G&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(ne=Object.getOwnPropertySymbols(G);Te<ne.length;Te++)te.indexOf(ne[Te])<0&&Object.prototype.propertyIsEnumerable.call(G,ne[Te])&&(he[ne[Te]]=G[ne[Te]])}return he}function ue(G,te,he,ne){return new(he||(he=Promise))(function(oe,lt){function Pt(et){try{Ze(ne.next(et))}catch(Vt){lt(Vt)}}function un(et){try{Ze(ne.throw(et))}catch(Vt){lt(Vt)}}function Ze(et){et.done?oe(et.value):function Te(oe){return oe instanceof he?oe:new he(function(lt){lt(oe)})}(et.value).then(Pt,un)}Ze((ne=ne.apply(G,te||[])).next())})}function ce(G){return this instanceof ce?(this.v=G,this):new ce(G)}function _e(G,te,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,ne=he.apply(G,te||[]),oe=[];return Te={},lt("next"),lt("throw"),lt("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function lt(jt){ne[jt]&&(Te[jt]=function(Or){return new Promise(function(Nt,Yr){oe.push([jt,Or,Nt,Yr])>1||Pt(jt,Or)})})}function Pt(jt,Or){try{!function un(jt){jt.value instanceof ce?Promise.resolve(jt.value.v).then(Ze,et):Vt(oe[0][2],jt)}(ne[jt](Or))}catch(Nt){Vt(oe[0][3],Nt)}}function Ze(jt){Pt("next",jt)}function et(jt){Pt("throw",jt)}function Vt(jt,Or){jt(Or),oe.shift(),oe.length&&Pt(oe[0][0],oe[0][1])}}function Ue(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,te=G[Symbol.asyncIterator];return te?te.call(G):(G=function Y(G){var te="function"==typeof Symbol&&Symbol.iterator,he=te&&G[te],ne=0;if(he)return he.call(G);if(G&&"number"==typeof G.length)return{next:function(){return G&&ne>=G.length&&(G=void 0),{value:G&&G[ne++],done:!G}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(G),he={},ne("next"),ne("throw"),ne("return"),he[Symbol.asyncIterator]=function(){return this},he);function ne(oe){he[oe]=G[oe]&&function(lt){return new Promise(function(Pt,un){!function Te(oe,lt,Pt,un){Promise.resolve(un).then(function(Ze){oe({value:Ze,done:Pt})},lt)}(Pt,un,(lt=G[oe](lt)).done,lt.value)})}}}M.d(ve,{_T:()=>se,mG:()=>ue,qq:()=>ce,FC:()=>_e,KL:()=>Ue})},5e3:(ze,ve,M)=>{M.d(ve,{deG:()=>ch,tb:()=>$v,AFp:()=>jm,ip1:()=>Rc,CZH:()=>Vm,hGG:()=>Rw,z2F:()=>NC,sBO:()=>fw,Sil:()=>zv,_Vd:()=>Ln,EJc:()=>kC,SBq:()=>Bd,qLn:()=>Yn,vpe:()=>bo,tBr:()=>nr,XFs:()=>Ye,OlP:()=>on,zs3:()=>Vs,ZZ4:()=>VC,aQg:()=>jC,soG:()=>Wm,YKP:()=>Y0,h0i:()=>jd,PXZ:()=>mn,R0b:()=>t,FiY:()=>kr,Lbi:()=>$m,g9A:()=>Hm,Qsj:()=>Nf,FYo:()=>sv,JOm:()=>re,tp0:()=>ks,Rgc:()=>Gd,dDg:()=>U,q4F:()=>Of,GfV:()=>Em,s_b:()=>zd,ifc:()=>bt,eFA:()=>Ja,G48:()=>hw,X6Q:()=>dw,_c5:()=>Aw,VLi:()=>ge,c2e:()=>Wv,zSh:()=>It,wAp:()=>st,vHH:()=>Se,cg1:()=>Yg,kL8:()=>Ny,dqk:()=>Dt,sIi:()=>Ba,CqO:()=>bg,QGY:()=>wg,F4k:()=>ay,RDi:()=>mi,AaK:()=>ue,TTD:()=>vs,uIk:()=>hg,Suo:()=>Ev,Xpm:()=>_t,lG2:()=>At,Yz7:()=>Nt,cJS:()=>xt,oAB:()=>K,Yjl:()=>Vn,Y36:()=>Dd,_UZ:()=>yf,qZA:()=>_f,TgZ:()=>Td,LFG:()=>Ve,$8M:()=>ao,$Z:()=>iy,NdJ:()=>Dg,CRH:()=>Cv,iGM:()=>vv,LSH:()=>Aa,_uU:()=>Tf});var p=M(7579),q=M(727),P=M(8306),se=M(6451),J=M(3099);function de(n){for(let r in n)if(n[r]===de)return r;throw Error("Could not find renamed property on target object.")}function ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ae(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const j=de({__forward_ref__:de});function H(n){return n.__forward_ref__=H,n.toString=function(){return ue(this())},n}function Y(n){return function Le(n){return"function"==typeof n&&n.hasOwnProperty(j)&&n.__forward_ref__===H}(n)?n():n}class Se extends Error{constructor(r,s){super(function ke(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function ce(n){return"string"==typeof n?n:null==n?"":String(n)}function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ce(n)}function pe(n,r){const s=r?` in ${r}`:"";throw new Se(-201,`No provider for ${_e(n)} found${s}`)}function Ze(n,r){null==n&&function et(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Nt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xt(n){return{providers:n.providers||[],imports:n.imports||[]}}function wt(n){return Mn(n,Qr)||Mn(n,ci)}function Mn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Xn(n){return n&&(n.hasOwnProperty(er)||n.hasOwnProperty(Jr))?n[er]:null}const Qr=de({\u0275prov:de}),er=de({\u0275inj:de}),ci=de({ngInjectableDef:de}),Jr=de({ngInjectorDef:de});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let or;function In(n){const r=or;return or=n,r}function Cr(n,r,s){const a=wt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ye.Optional?null:void 0!==r?r:void pe(ue(n),"Injector")}function zt(n){return{toString:n}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),bt=(()=>{return(n=bt||(bt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",bt;var n})();const Ge="undefined"!=typeof globalThis&&globalThis,ot="undefined"!=typeof window&&window,Pn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt=Ge||"undefined"!=typeof global&&global||ot||Pn,xn={},Qe=[],Bn=de({\u0275cmp:de}),vt=de({\u0275dir:de}),Be=de({\u0275pipe:de}),Ce=de({\u0275mod:de}),je=de({\u0275fac:de}),Je=de({__NG_ELEMENT_ID__:de});let Ct=0;function _t(n){return zt(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Qe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||bt.Emulated,id:"c",styles:n.styles||Qe,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,h=n.features,_=n.pipes;return a.id+=Ct++,a.inputs=tt(n.inputs,s),a.outputs=tt(n.outputs),h&&h.forEach(v=>v(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(L):null,a.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,a})}function L(n){return St(n)||function tn(n){return n[vt]||null}(n)}function $(n){return function ht(n){return n[Be]||null}(n)}const le={};function K(n){return zt(()=>{const r={type:n.type,bootstrap:n.bootstrap||Qe,declarations:n.declarations||Qe,imports:n.imports||Qe,exports:n.exports||Qe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(le[n.id]=n.type),r})}function tt(n,r){if(null==n)return xn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let u=n[a],h=u;Array.isArray(u)&&(h=u[1],u=u[0]),s[u]=a,r&&(r[u]=h)}return s}const At=_t;function Vn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function St(n){return n[Bn]||null}function $t(n,r){const s=n[Ce]||null;if(!s&&!0===r)throw new Error(`Type ${ue(n)} does not have '\u0275mod' property.`);return s}function Lr(n){return Array.isArray(n)&&"object"==typeof n[1]}function wr(n){return Array.isArray(n)&&!0===n[1]}function ou(n){return 0!=(8&n.flags)}function Oi(n){return 2==(2&n.flags)}function ta(n){return 1==(1&n.flags)}function ar(n){return null!==n.template}function kc(n){return 0!=(512&n[2])}function lr(n,r){return n.hasOwnProperty(je)?n[je]:null}class Ys{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function vs(){return Ao}function Ao(n){return n.type.prototype.ngOnChanges&&(n.setInput=ah),hu}function hu(){const n=Ui(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===xn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ah(n,r,s,a){const u=Ui(n)||function br(n,r){return n[Qs]=r}(n,{previous:xn,current:null}),h=u.current||(u.current={}),_=u.previous,v=this.declaredInputs[s],C=_[v];h[v]=new Ys(C&&C.currentValue,r,_===xn),n[a]=r}vs.ngInherit=!0;const Qs="__ngSimpleChanges__";function Ui(n){return n[Qs]||null}let la;function mi(n){la=n}function Zt(n){return!!n.listen}const Js={createRenderer:(n,r)=>function Ro(){return void 0!==la?la:"undefined"!=typeof document?document:void 0}()};function Ut(n){for(;Array.isArray(n);)n=n[0];return n}function $n(n,r){return Ut(r[n.index])}function ko(n,r){return n.data[r]}function Wn(n,r){const s=r[n];return Lr(s)?s:s[0]}function Vi(n){return 4==(4&n[2])}function _i(n){return 128==(128&n[2])}function cr(n,r){return null==r?null:n[r]}function ji(n){n[18]=0}function Hi(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Xe={lFrame:ws(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fa(){return Xe.bindingsEnabled}function ye(){return Xe.lFrame.lView}function yt(){return Xe.lFrame.tView}function Qt(){let n=Xs();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xs(){return Xe.lFrame.currentTNode}function dr(n,r){const s=Xe.lFrame;s.currentTNode=n,s.isParent=r}function il(){return Xe.lFrame.isParent}function pa(){return Xe.isInCheckNoChangesMode}function $i(n){Xe.isInCheckNoChangesMode=n}function _a(n,r){const s=Xe.lFrame;s.bindingIndex=s.bindingRootIndex=n,Po(r)}function Po(n){Xe.lFrame.currentDirectiveIndex=n}function ul(){return Xe.lFrame.currentQueryIndex}function cl(n){Xe.lFrame.currentQueryIndex=n}function _u(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function dl(n,r,s){if(s&Ye.SkipSelf){let u=r,h=n;for(;!(u=u.parent,null!==u||s&Ye.Host||(u=_u(h),null===u||(h=h[15],10&u.type))););if(null===u)return!1;r=u,n=h}const a=Xe.lFrame=yu();return a.currentTNode=r,a.lView=n,!0}function Is(n){const r=yu(),s=n[1];Xe.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function yu(){const n=Xe.lFrame,r=null===n?null:n.child;return null===r?ws(n):r}function ws(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function vu(){const n=Xe.lFrame;return Xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Eu=vu;function bs(){const n=vu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zi(n){Xe.lFrame.selectedIndex=n}function yi(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:S}=h;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),v&&((n.contentHooks||(n.contentHooks=[])).push(s,v),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,v)),C&&(n.viewHooks||(n.viewHooks=[])).push(-s,C),T&&((n.viewHooks||(n.viewHooks=[])).push(s,T),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,T)),null!=S&&(n.destroyHooks||(n.destroyHooks=[])).push(s,S)}}function No(n,r,s){Cu(n,r,3,s)}function ya(n,r,s,a){(3&n[2])===s&&Cu(n,r,s,a)}function vn(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Cu(n,r,s,a){const h=null!=a?a:-1,_=r.length-1;let v=0;for(let C=void 0!==a?65535&n[18]:0;C<_;C++)if("number"==typeof r[C+1]){if(v=r[C],null!=a&&v>=a)break}else r[C]<0&&(n[18]+=65536),(v<h||-1==h)&&(lh(n,s,r,C),n[18]=(4294901760&n[18])+C+2),C++}function lh(n,r,s,a){const u=s[a]<0,h=s[a+1],v=n[u?-s[a]:s[a]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class to{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function it(n,r,s){const a=Zt(n);let u=0;for(;u<s.length;){const h=s[u];if("number"==typeof h){if(0!==h)break;u++;const _=s[u++],v=s[u++],C=s[u++];a?n.setAttribute(r,v,C,_):r.setAttributeNS(_,v,C)}else{const _=h,v=s[++u];hr(_)?a&&n.setProperty(r,_,v):a?n.setAttribute(r,_,v):r.setAttribute(_,v),u++}}return u}function Fn(n){return 3===n||4===n||6===n}function hr(n){return 64===n.charCodeAt(0)}function Tr(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const u=r[a];"number"==typeof u?s=u:0===s||no(n,s,u,null,-1===s||2===s?r[++a]:null)}}return n}function no(n,r,s,a,u){let h=0,_=n.length;if(-1===r)_=-1;else for(;h<n.length;){const v=n[h++];if("number"==typeof v){if(v===r){_=-1;break}if(v>r){_=h-1;break}}}for(;h<n.length;){const v=n[h];if("number"==typeof v)break;if(v===s){if(null===a)return void(null!==u&&(n[h+1]=u));if(a===n[h+1])return void(n[h+2]=u)}h++,null!==a&&h++,null!==u&&h++}-1!==_&&(n.splice(_,0,r),h=_+1),n.splice(h++,0,s),null!==a&&n.splice(h++,0,a),null!==u&&n.splice(h++,0,u)}function bu(n){return-1!==n}function Gt(n){return 32767&n}function ti(n,r){let s=function Oc(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let va=!0;function fr(n){const r=va;return va=n,r}let Fc=0;function fn(n,r){const s=io(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ei(a.data,n),Ei(r,null),Ei(a.blueprint,null));const u=Sr(n,r),h=n.injectorIndex;if(bu(u)){const _=Gt(u),v=ti(u,r),C=v[1].data;for(let T=0;T<8;T++)r[h+T]=v[_+T]|C[_+T]}return r[h+8]=u,h}function Ei(n,r){n.push(0,0,0,0,0,0,0,0,r)}function io(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Sr(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,u=r;for(;null!==u;){const h=u[1],_=h.type;if(a=2===_?h.declTNode:1===_?u[6]:null,null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Zi(n,r,s){!function ro(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Je)&&(a=s[Je]),null==a&&(a=s[Je]=Fc++);const u=255&a;r.data[n+(u>>5)]|=1<<u}(n,r,s)}function ni(n,r,s){if(s&Ye.Optional)return n;pe(r,"NodeInjector")}function _l(n,r,s,a){if(s&Ye.Optional&&void 0===a&&(a=null),0==(s&(Ye.Self|Ye.Host))){const u=n[9],h=In(void 0);try{return u?u.get(r,a,s&Ye.Optional):Cr(r,a,s&Ye.Optional)}finally{In(h)}}return ni(a,r,s)}function qi(n,r,s,a=Ye.Default,u){if(null!==n){const h=function oo(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Je)?n[Je]:void 0;return"number"==typeof r?r>=0?255&r:yl:r}(s);if("function"==typeof h){if(!dl(r,n,a))return a&Ye.Host?ni(u,s,a):_l(r,s,a,u);try{const _=h(a);if(null!=_||a&Ye.Optional)return _;pe(s)}finally{Eu()}}else if("number"==typeof h){let _=null,v=io(n,r),C=-1,T=a&Ye.Host?r[16][6]:null;for((-1===v||a&Ye.SkipSelf)&&(C=-1===v?Sr(n,r):r[v+8],-1!==C&&Zn(a,!1)?(_=r[1],v=Gt(C),r=ti(C,r)):v=-1);-1!==v;){const S=r[1];if(Fo(h,v,S.data)){const x=Tu(v,r,s,_,a,T);if(x!==ri)return x}C=r[v+8],-1!==C&&Zn(a,r[1].data[v+8]===T)&&Fo(h,v,r)?(_=S,v=Gt(C),r=ti(C,r)):v=-1}}}return _l(r,s,a,u)}const ri={};function yl(){return new jr(Qt(),ye())}function Tu(n,r,s,a,u,h){const _=r[1],v=_.data[n+8],S=so(v,_,s,null==a?Oi(v)&&va:a!=_&&0!=(3&v.type),u&Ye.Host&&h===v);return null!==S?Vr(r,_,S,v):ri}function so(n,r,s,a,u){const h=n.providerIndexes,_=r.data,v=1048575&h,C=n.directiveStart,S=h>>20,V=u?v+S:n.directiveEnd;for(let Z=a?v:v+S;Z<V;Z++){const fe=_[Z];if(Z<C&&s===fe||Z>=C&&fe.type===s)return Z}if(u){const Z=_[C];if(Z&&ar(Z)&&Z.type===s)return C}return null}function Vr(n,r,s,a){let u=n[s];const h=r.data;if(function Iu(n){return n instanceof to}(u)){const _=u;_.resolving&&function $e(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Se(-200,`Circular dependency in DI detected for ${n}${s}`)}(_e(h[s]));const v=fr(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?In(_.injectImpl):null;dl(n,a,Ye.Default);try{u=n[s]=_.factory(void 0,h,n,a),r.firstCreatePass&&s>=a.directiveStart&&function pl(n,r,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:h}=r.type.prototype;if(a){const _=Ao(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,u),h&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,h),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,h))}(s,h[s],r)}finally{null!==C&&In(C),fr(v),_.resolving=!1,Eu()}}return u}function Fo(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Zn(n,r){return!(n&Ye.Self||n&Ye.Host&&r)}class jr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return qi(this._tNode,this._lView,r,a,s)}}function ao(n){return function Oo(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const h=s[u];if(Fn(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(h===r)return s[u+1];u+=2}}}return null}(Qt(),n)}const lo="__parameters__";function sn(n,r,s){return zt(()=>{const a=function ii(n){return function(...s){if(n){const a=n(...s);for(const u in a)this[u]=a[u]}}}(r);function u(...h){if(this instanceof u)return a.apply(this,h),this;const _=new u(...h);return v.annotation=_,v;function v(C,T,S){const x=C.hasOwnProperty(lo)?C[lo]:Object.defineProperty(C,lo,{value:[]})[lo];for(;x.length<=S;)x.push(null);return(x[S]=x[S]||[]).push(_),C}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class on{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Nt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ch=new on("AnalyzeForEntryComponents");function qn(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),qn(a,r)):r!==n&&r.push(a)}return r}function Ar(n,r){n.forEach(s=>Array.isArray(s)?Ar(s,r):r(s))}function Cl(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ii(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}const As={},co="__NG_DI_FLAG__",wa="ngTempTokenPath",w=/\n/gm,F="__source",z=de({provide:String,useValue:de});let X;function be(n){const r=X;return X=n,r}function De(n,r=Ye.Default){if(void 0===X)throw new Se(203,"");return null===X?Cr(n,void 0,r):X.get(n,r&Ye.Optional?null:void 0,r)}function Ve(n,r=Ye.Default){return(function Sn(){return or}()||De)(Y(n),r)}const ft=Ve;function ut(n){const r=[];for(let s=0;s<n.length;s++){const a=Y(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Se(900,"");let u,h=Ye.Default;for(let _=0;_<a.length;_++){const v=a[_],C=an(v);"number"==typeof C?-1===C?u=v.token:h|=C:u=v}r.push(Ve(u,h))}else r.push(Ve(a))}return r}function En(n,r){return n[co]=r,n.prototype[co]=r,n}function an(n){return n[co]}const nr=En(sn("Inject",n=>({token:n})),-1),kr=En(sn("Optional"),8),ks=En(sn("SkipSelf"),4);class Fu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const ts=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ot=(()=>((Ot=Ot||{})[Ot.NONE=0]="NONE",Ot[Ot.HTML=1]="HTML",Ot[Ot.STYLE=2]="STYLE",Ot[Ot.SCRIPT=3]="SCRIPT",Ot[Ot.URL=4]="URL",Ot[Ot.RESOURCE_URL=5]="RESOURCE_URL",Ot))();function Aa(n){const r=function mo(){const n=ye();return n&&n[12]}();return r?r.sanitize(Ot.URL,n)||"":function po(n,r){const s=function Da(n){return n instanceof Fu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?function es(n){return n instanceof Fu?n.changingThisBreaksApplicationSecurity:n}(n):function Ta(n){return(n=String(n)).match(ts)||n.match(Gc)?n:"unsafe:"+n}(ce(n))}const td="__ngContext__";function rr(n,r){n[td]=r}function nd(n){const r=function jo(n){return n[td]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Wo(n){return n.ngOriginalError}function Th(n,...r){n.error(...r)}class Yn{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function mp(n){return n&&n.ngErrorLogger||Th}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Wo(r);for(;s&&Wo(s);)s=Wo(s);return s||null}}const Ep=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function f(n){return n instanceof Function?n():n}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();function He(n,r){return undefined(n,r)}function ln(n){const r=n[3];return wr(r)?r[3]:r}function Ra(n){return cd(n[13])}function ka(n){return cd(n[4])}function cd(n){for(;null!==n&&!wr(n);)n=n[4];return n}function _o(n,r,s,a,u){if(null!=a){let h,_=!1;wr(a)?h=a:Lr(a)&&(_=!0,a=a[0]);const v=Ut(a);0===n&&null!==s?null==u?Ap(r,s,v):bi(r,s,v,u||null,!0):1===n&&null!==s?bi(r,s,v,u||null,!0):2===n?function Pp(n,r,s){const a=fd(n,r);a&&function Qv(n,r,s,a){Zt(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,v,_):3===n&&r.destroyNode(v),null!=h&&function eE(n,r,s,a,u){const h=s[7];h!==Ut(s)&&_o(r,n,a,h,u);for(let v=10;v<s.length;v++){const C=s[v];Mh(C[1],C,n,r,a,h)}}(r,n,h,s,u)}}function Gu(n,r,s){if(Zt(n))return n.createElement(r,s);{const a=null!==s?function aa(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Ym(n,r){const s=n[9],a=s.indexOf(r),u=r[3];1024&r[2]&&(r[2]&=-1025,Hi(u,-1)),s.splice(a,1)}function Dp(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const u=a[17];null!==u&&u!==n&&Ym(u,a),r>0&&(n[s-1][4]=a[4]);const h=Ii(n,10+r);!function zr(n,r){Mh(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const _=h[19];null!==_&&_.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Tp(n,r){if(!(256&r[2])){const s=r[11];Zt(s)&&s.destroyNode&&Mh(n,r,s,3,null,null),function wp(n){let r=n[13];if(!r)return Sp(n[1],n);for(;r;){let s=null;if(Lr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Lr(r)&&Sp(r[1],r),r=r[3];null===r&&(r=n),Lr(r)&&Sp(r[1],r),s=r&&r[4]}r=s}}(r)}}function Sp(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Jm(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const u=r[s[a]];if(!(u instanceof to)){const h=s[a+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const v=u[h[_]],C=h[_+1];try{C.call(v)}finally{}}else try{h.call(u)}finally{}}}}(n,r),function Qm(n,r){const s=n.cleanup,a=r[7];let u=-1;if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const _=s[h+1],v="function"==typeof _?_(r):Ut(r[_]),C=a[u=s[h+2]],T=s[h+3];"boolean"==typeof T?v.removeEventListener(s[h],C,T):T>=0?a[u=T]():a[u=-T].unsubscribe(),h+=2}else{const _=a[u=s[h+1]];s[h].call(_)}if(null!==a){for(let h=u+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&Zt(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&wr(r[3])){s!==r[3]&&Ym(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Rh(n,r,s){return function Yv(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const u=n.data[a.directiveStart].encapsulation;if(u===bt.None||u===bt.Emulated)return null}return $n(a,s)}(n,r.parent,s)}function bi(n,r,s,a,u){Zt(n)?n.insertBefore(r,s,a,u):r.insertBefore(s,a,u)}function Ap(n,r,s){Zt(n)?n.appendChild(r,s):r.appendChild(s)}function Xm(n,r,s,a,u){null!==a?bi(n,r,s,a,u):Ap(n,r,s)}function fd(n,r){return Zt(n)?n.parentNode(r):r.parentNode}let Rp=function t_(n,r,s){return 40&n.type?$n(n,s):null};function kh(n,r,s,a){const u=Rh(n,a,r),h=r[11],v=function e_(n,r,s){return Rp(n,r,s)}(a.parent||r[6],a,r);if(null!=u)if(Array.isArray(s))for(let C=0;C<s.length;C++)Xm(h,u,s[C],v,!1);else Xm(h,u,s,v,!1)}function Zu(n,r){if(null!==r){const s=r.type;if(3&s)return $n(r,n);if(4&s)return Mp(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Zu(n,a);{const u=n[r.index];return wr(u)?Mp(-1,u):Ut(u)}}if(32&s)return He(r,n)()||Ut(n[r.index]);{const a=r_(n,r);return null!==a?Array.isArray(a)?a[0]:Zu(ln(n[16]),a):Zu(n,r.next)}}return null}function r_(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Mp(n,r){const s=10+n+1;if(s<r.length){const a=r[s],u=a[1].firstChild;if(null!==u)return Zu(a,u)}return r[7]}function xp(n,r,s,a,u,h,_){for(;null!=s;){const v=a[s.index],C=s.type;if(_&&0===r&&(v&&rr(Ut(v),a),s.flags|=4),64!=(64&s.flags))if(8&C)xp(n,r,s.child,a,u,h,!1),_o(r,n,u,v,h);else if(32&C){const T=He(s,a);let S;for(;S=T();)_o(r,n,u,S,h);_o(r,n,u,v,h)}else 16&C?i_(n,r,a,s,u,h):_o(r,n,u,v,h);s=_?s.projectionNext:s.next}}function Mh(n,r,s,a,u,h){xp(s,a,n.firstChild,r,u,h,!1)}function i_(n,r,s,a,u,h){const _=s[16],C=_[6].projection[a.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)_o(r,n,u,C[T],h);else xp(n,r,C,_[3],u,h,!0)}function s_(n,r,s){Zt(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Np(n,r,s){Zt(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ph(n,r,s){let a=n.length;for(;;){const u=n.indexOf(r,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const h=r.length;if(u+h===a||n.charCodeAt(u+h)<=32)return u}s=u+1}}const o_="ng-template";function rE(n,r,s){let a=0;for(;a<n.length;){let u=n[a++];if(s&&"class"===u){if(u=n[a],-1!==Ph(u.toLowerCase(),r,0))return!0}else if(1===u){for(;a<n.length&&"string"==typeof(u=n[a++]);)if(u.toLowerCase()===r)return!0;return!1}}return!1}function a_(n){return 4===n.type&&n.value!==o_}function iE(n,r,s){return r===(4!==n.type||s?n.value:o_)}function sE(n,r,s){let a=4;const u=n.attrs||[],h=function Vl(n){for(let r=0;r<n.length;r++)if(Fn(n[r]))return r;return n.length}(u);let _=!1;for(let v=0;v<r.length;v++){const C=r[v];if("number"!=typeof C){if(!_)if(4&a){if(a=2|1&a,""!==C&&!iE(n,C,s)||""===C&&1===r.length){if(Tn(a))return!1;_=!0}}else{const T=8&a?C:r[++v];if(8&a&&null!==n.attrs){if(!rE(n.attrs,T,s)){if(Tn(a))return!1;_=!0}continue}const x=Os(8&a?"class":C,u,a_(n),s);if(-1===x){if(Tn(a))return!1;_=!0;continue}if(""!==T){let V;V=x>h?"":u[x+1].toLowerCase();const Z=8&a?V:null;if(Z&&-1!==Ph(Z,T,0)||2&a&&T!==V){if(Tn(a))return!1;_=!0}}}}else{if(!_&&!Tn(a)&&!Tn(C))return!1;if(_&&Tn(C))continue;_=!1,a=C|1&a}}return Tn(a)||_}function Tn(n){return 0==(1&n)}function Os(n,r,s,a){if(null===r)return-1;let u=0;if(a||!s){let h=!1;for(;u<r.length;){const _=r[u];if(_===n)return u;if(3===_||6===_)h=!0;else{if(1===_||2===_){let v=r[++u];for(;"string"==typeof v;)v=r[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=h?1:2}return-1}return function jl(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function oE(n,r,s=!1){for(let a=0;a<r.length;a++)if(sE(n,r[a],s))return!0;return!1}function N(n,r){return n?":not("+r.trim()+")":r}function xh(n){let r=n[0],s=1,a=2,u="",h=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&a){const v=n[++s];u+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?u+="."+_:4&a&&(u+=" "+_);else""!==u&&!Tn(_)&&(r+=N(h,u),u=""),a=_,h=h||!Tn(a);s++}return""!==u&&(r+=N(h,u)),r}const ct={};function Hp(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],h=s[a+1];if(-1!==h){const _=n.data[h];cl(u),_.contentQueries(2,r[h],h)}}}function Gl(n,r,s,a,u,h,_,v,C,T){const S=r.blueprint.slice();return S[0]=u,S[2]=140|a,ji(S),S[3]=S[15]=n,S[8]=s,S[10]=_||n&&n[10],S[11]=v||n&&n[11],S[12]=C||n&&n[12]||null,S[9]=T||n&&n[9]||null,S[6]=h,S[16]=2==r.type?n[16]:S,S}function Pa(n,r,s,a,u){let h=n.data[r];if(null===h)h=function Wp(n,r,s,a,u){const h=Xs(),_=il(),C=n.data[r]=function _E(n,r,s,a,u,h){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,s,r,a,u);return null===n.firstChild&&(n.firstChild=C),null!==h&&(_?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(n,r,s,a,u),function al(){return Xe.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=s,h.value=a,h.attrs=u;const _=function eo(){const n=Xe.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return dr(h,!0),h}function Ju(n,r,s,a){if(0===s)return-1;const u=r.length;for(let h=0;h<s;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return u}function Xu(n,r,s){Is(r);try{const a=n.viewQuery;null!==a&&tg(1,a,s);const u=n.template;null!==u&&v_(n,r,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Hp(n,r),n.staticViewQueries&&tg(2,n.viewQuery,s);const h=n.components;null!==h&&function $p(n,r){for(let s=0;s<r.length;s++)Xp(n,r[s])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,bs()}}function ec(n,r,s,a){const u=r[2];if(256==(256&u))return;Is(r);const h=pa();try{ji(r),function ga(n){return Xe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&v_(n,r,s,2,a);const _=3==(3&u);if(!h)if(_){const T=n.preOrderCheckHooks;null!==T&&No(r,T,null)}else{const T=n.preOrderHooks;null!==T&&ya(r,T,0,null),vn(r,0)}if(function Tt(n){for(let r=Ra(n);null!==r;r=ka(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const u=s[a],h=u[3];0==(1024&u[2])&&Hi(h,1),u[2]|=1024}}}(r),function Bt(n){for(let r=Ra(n);null!==r;r=ka(r))for(let s=10;s<r.length;s++){const a=r[s],u=a[1];_i(a)&&ec(u,a,u.template,a[8])}}(r),null!==n.contentQueries&&Hp(n,r),!h)if(_){const T=n.contentCheckHooks;null!==T&&No(r,T)}else{const T=n.contentHooks;null!==T&&ya(r,T,1),vn(r,1)}!function fE(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)zi(~u);else{const h=u,_=s[++a],v=s[++a];_a(_,h),v(2,r[h])}}}finally{zi(-1)}}(n,r);const v=n.components;null!==v&&function pE(n,r){for(let s=0;s<r.length;s++)xa(n,r[s])}(r,v);const C=n.viewQuery;if(null!==C&&tg(2,C,a),!h)if(_){const T=n.viewCheckHooks;null!==T&&No(r,T)}else{const T=n.viewHooks;null!==T&&ya(r,T,2),vn(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Hi(r[3],-1))}finally{bs()}}function gE(n,r,s,a){const u=r[10],h=!pa(),_=Vi(r);try{h&&!_&&u.begin&&u.begin(),_&&Xu(n,r,a),ec(n,r,s,a)}finally{h&&!_&&u.end&&u.end()}}function v_(n,r,s,a,u){const h=function Gn(){return Xe.lFrame.selectedIndex}(),_=2&a;try{zi(-1),_&&r.length>20&&function d_(n,r,s,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&No(r,h,s)}else{const h=n.preOrderHooks;null!==h&&ya(r,h,0,s)}zi(s)}(n,r,20,pa()),s(a,u)}finally{zi(h)}}function E_(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Gh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Gh(n,r,s,a,u,h,_,v,C,T){const S=20+a,x=S+u,V=function mE(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:ct);return s}(S,x),Z="function"==typeof T?T():T;return V[1]={type:n,blueprint:V,template:s,queries:null,viewQuery:v,declTNode:r,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:Z,incompleteFirstPass:!1}}function Zp(n,r,s,a){const u=ng(r);null===s?u.push(a):(u.push(s),n.firstCreatePass&&Oa(n).push(a,u.length-1))}function I_(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const u=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,u):s[a]=[r,u]}return s}function w_(n,r,s,a,u,h){const _=h.hostBindings;if(_){let v=n.hostBindingOpCodes;null===v&&(v=n.hostBindingOpCodes=[]);const C=~r.index;(function Kp(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(v)!=C&&v.push(C),v.push(a,u,_)}}function Yp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Qp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function T_(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;ar(r)&&(s[""]=n)}}function Jp(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function S_(n,r,s,a,u){n.data[a]=u;const h=u.factory||(u.factory=lr(u.type)),_=new to(h,ar(u),null);n.blueprint[a]=_,s[a]=_,w_(n,r,0,a,Ju(n,s,u.hostVars,ct),u)}function A_(n,r,s){const a=$n(r,n),u=E_(s),h=n[10],_=Na(n,Gl(n,u,null,s.onPush?64:16,a,r,h,h.createRenderer(a,s),null,null));n[r.index]=_}function Ls(n,r,s,a,u,h){const _=$n(n,r);!function Kh(n,r,s,a,u,h,_){if(null==h)Zt(n)?n.removeAttribute(r,u,s):r.removeAttribute(u);else{const v=null==_?ce(h):_(h,a||"",u);Zt(n)?n.setAttribute(r,u,v,s):s?r.setAttributeNS(s,u,v):r.setAttribute(u,v)}}(r[11],_,h,n.value,s,a,u)}function Yh(n,r,s,a,u,h){const _=h[r];if(null!==_){const v=a.setInput;for(let C=0;C<_.length;){const T=_[C++],S=_[C++],x=_[C++];null!==v?a.setInput(s,x,T,S):s[S]=x}}}function R_(n,r){let s=null,a=0;for(;a<r.length;){const u=r[a];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,n[u],r[a+1])),a+=2}else a+=2;else a+=4}return s}function xa(n,r){const s=Wn(r,n);if(_i(s)){const a=s[1];80&s[2]?ec(a,s,a.template,s[8]):s[5]>0&&qt(s)}}function qt(n){for(let a=Ra(n);null!==a;a=ka(a))for(let u=10;u<a.length;u++){const h=a[u];if(1024&h[2]){const _=h[1];ec(_,h,_.template,h[8])}else h[5]>0&&qt(h)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Wn(s[a],n);_i(u)&&u[5]>0&&qt(u)}}function Xp(n,r){const s=Wn(r,n),a=s[1];(function DE(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Xu(a,s,s[8])}function Na(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Qh(n){for(;n;){n[2]|=64;const r=ln(n);if(kc(n)&&!r)return n;n=r}return null}function yr(n,r,s){const a=r[10];a.begin&&a.begin();try{ec(n,r,n.template,s)}catch(u){throw nc(r,u),u}finally{a.end&&a.end()}}function k_(n){!function Et(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=nd(s),u=a[1];gE(u,a,u.template,s)}}(n[8])}function tg(n,r,s){cl(0),r(n,s)}const TE=(()=>Promise.resolve(null))();function ng(n){return n[7]||(n[7]=[])}function Oa(n){return n.cleanup||(n.cleanup=[])}function nc(n,r){const s=n[9],a=s?s.get(Yn,null):null;a&&a.handleError(r)}function _d(n,r,s){let a=s?n.styles:null,u=s?n.classes:null,h=0;if(null!==r)for(let _=0;_<r.length;_++){const v=r[_];"number"==typeof v?h=v:1==h?u=ae(u,v):2==h&&(a=ae(a,v+": "+r[++_]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=u:n.classesWithoutHost=u}const Xh=new on("INJECTOR",-1);class Fa{get(r,s=As){if(s===As){const a=new Error(`NullInjectorError: No provider for ${ue(r)}!`);throw a.name="NullInjectorError",a}return s}}const It=new on("Set Injector scope."),La={},ef={};let tf;function Us(){return void 0===tf&&(tf=new Fa),tf}function yd(n,r=null,s=null,a){const u=rs(n,r,s,a);return u._resolveInjectorDefTypes(),u}function rs(n,r=null,s=null,a){return new RE(n,s,r||Us(),a)}class RE{constructor(r,s,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];s&&Ar(s,v=>this.processProvider(v,r,s)),Ar([r],v=>this.processInjectorType(v,[],h)),this.records.set(Xh,rc(void 0,this));const _=this.records.get(It);this.scope=null!=_?_.value:null,this.source=u||("object"==typeof r?null:ue(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=As,a=Ye.Default){this.assertNotDestroyed();const u=be(this),h=In(void 0);try{if(!(a&Ye.SkipSelf)){let v=this.records.get(r);if(void 0===v){const C=function PE(n){return"function"==typeof n||"object"==typeof n&&n instanceof on}(r)&&wt(r);v=C&&this.injectableDefInScope(C)?rc(Pr(r),La):null,this.records.set(r,v)}if(null!=v)return this.hydrate(r,v)}return(a&Ye.Self?Us():this.parent).get(r,s=a&Ye.Optional&&s===As?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[wa]=_[wa]||[]).unshift(ue(r)),u)throw _;return function ho(n,r,s,a){const u=n[wa];throw r[F]&&u.unshift(r[F]),n.message=function Rs(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=ue(r);if(Array.isArray(r))u=r.map(ue).join(" -> ");else if("object"==typeof r){let h=[];for(let _ in r)if(r.hasOwnProperty(_)){let v=r[_];h.push(_+":"+("string"==typeof v?JSON.stringify(v):ue(v)))}u=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${n.replace(w,"\n  ")}`}("\n"+n.message,u,s,a),n.ngTokenPath=u,n[wa]=null,n}(_,r,"R3InjectorError",this.source)}throw _}finally{In(h),be(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,u)=>r.push(ue(u))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processInjectorType(r,s,a){if(!(r=Y(r)))return!1;let u=Xn(r);const h=null==u&&r.ngModule||void 0,_=void 0===h?r:h,v=-1!==a.indexOf(_);if(void 0!==h&&(u=Xn(h)),null==u)return!1;if(null!=u.imports&&!v){let S;a.push(_);try{Ar(u.imports,x=>{this.processInjectorType(x,s,a)&&(void 0===S&&(S=[]),S.push(x))})}finally{}if(void 0!==S)for(let x=0;x<S.length;x++){const{ngModule:V,providers:Z}=S[x];Ar(Z,fe=>this.processProvider(fe,V,Z||Qe))}}this.injectorDefTypes.add(_);const C=lr(_)||(()=>new _);this.records.set(_,rc(C,La));const T=u.providers;if(null!=T&&!v){const S=r;Ar(T,x=>this.processProvider(x,S,T))}return void 0!==h&&void 0!==r.providers}processProvider(r,s,a){let u=Bs(r=Y(r))?r:Y(r&&r.provide);const h=function rg(n,r,s){return ig(n)?rc(void 0,n.useValue):rc(function nf(n,r,s){let a;if(Bs(n)){const u=Y(n);return lr(u)||Pr(u)}if(ig(n))a=()=>Y(n.useValue);else if(function x_(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...ut(n.deps||[]));else if(function P_(n){return!(!n||!n.useExisting)}(n))a=()=>Ve(Y(n.useExisting));else{const u=Y(n&&(n.useClass||n.provide));if(!function O_(n){return!!n.deps}(n))return lr(u)||Pr(u);a=()=>new u(...ut(n.deps))}return a}(n),La)}(r);if(Bs(r)||!0!==r.multi)this.records.get(u);else{let _=this.records.get(u);_||(_=rc(void 0,La,!0),_.factory=()=>ut(_.multi),this.records.set(u,_)),u=r,_.multi.push(r)}this.records.set(u,h)}hydrate(r,s){return s.value===La&&(s.value=ef,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ME(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Y(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Pr(n){const r=wt(n),s=null!==r?r.factory:lr(n);if(null!==s)return s;if(n instanceof on)throw new Se(204,!1);if(n instanceof Function)return function kE(n){const r=n.length;if(r>0)throw function Hr(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Se(204,!1);const s=function sr(n){const r=n&&(n[Qr]||n[ci]);if(r){const s=function ki(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Se(204,!1)}function rc(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function ig(n){return null!==n&&"object"==typeof n&&z in n}function Bs(n){return"function"==typeof n}let Vs=(()=>{class n{static create(s,a){var u;if(Array.isArray(s))return yd({name:""},a,s,"");{const h=null!==(u=s.name)&&void 0!==u?u:"";return yd({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=As,n.NULL=new Fa,n.\u0275prov=Nt({token:n,providedIn:"any",factory:()=>Ve(Xh)}),n.__NG_ELEMENT_ID__=-1,n})();function OE(n,r){yi(nd(n)[1],Qt())}let Zl=null;function ql(){if(!Zl){const n=Dt.Symbol;if(n&&n.iterator)Zl=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Zl=a)}}}return Zl}function Ba(n){return!!Va(n)&&(Array.isArray(n)||!(n instanceof Map)&&ql()in n)}function Va(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function hg(n,r,s,a){const u=ye();return function xr(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}(u,function Wi(){return Xe.lFrame.bindingIndex++}(),r)&&(yt(),Ls(function nn(){const n=Xe.lFrame;return ko(n.tView,n.selectedIndex)}(),u,n,r,s,a)),hg}function Dd(n,r=Ye.Default){const s=ye();return null===s?Ve(n,r):qi(Qt(),s,Y(n),r)}function iy(){throw new Error("invalid")}function dc(n,r,s,a,u){const _=u?"class":"style";!function M_(n,r,s,a,u){for(let h=0;h<s.length;){const _=s[h++],v=s[h++],C=r[_],T=n.data[_];null!==T.setInput?T.setInput(C,u,a,v):C[v]=u}}(n,s,r.inputs[_],_,a)}function Td(n,r,s,a){const u=ye(),h=yt(),_=20+n,v=u[11],C=u[_]=Gu(v,r,function qf(){return Xe.lFrame.currentNamespace}()),T=h.firstCreatePass?function Eg(n,r,s,a,u,h,_){const v=r.consts,T=Pa(r,n,2,u,cr(v,h));return function qp(n,r,s,a){let u=!1;if(fa()){const h=function wE(n,r,s){const a=n.directiveRegistry;let u=null;if(a)for(let h=0;h<a.length;h++){const _=a[h];oE(s,_.selectors,!1)&&(u||(u=[]),Zi(fn(s,r),n,_.type),ar(_)?(Qp(n,s),u.unshift(_)):u.push(_))}return u}(n,r,s),_=null===a?null:{"":-1};if(null!==h){u=!0,Jp(s,n.data.length,h.length);for(let S=0;S<h.length;S++){const x=h[S];x.providersResolver&&x.providersResolver(x)}let v=!1,C=!1,T=Ju(n,r,h.length,null);for(let S=0;S<h.length;S++){const x=h[S];s.mergedAttrs=Tr(s.mergedAttrs,x.hostAttrs),S_(n,s,r,T,x),T_(T,x,_),null!==x.contentQueries&&(s.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(s.flags|=128);const V=x.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),v=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),C=!0),T++}!function yE(n,r){const a=r.directiveEnd,u=n.data,h=r.attrs,_=[];let v=null,C=null;for(let T=r.directiveStart;T<a;T++){const S=u[T],x=S.inputs,V=null===h||a_(r)?null:R_(x,h);_.push(V),v=I_(x,T,v),C=I_(S.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(r.flags|=16),v.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=_,r.inputs=v,r.outputs=C}(n,s)}_&&function D_(n,r,s){if(r){const a=n.localNames=[];for(let u=0;u<r.length;u+=2){const h=s[r[u+1]];if(null==h)throw new Se(-301,!1);a.push(r[u],h)}}}(s,a,_)}return s.mergedAttrs=Tr(s.mergedAttrs,s.attrs),u}(r,s,T,cr(v,_)),null!==T.attrs&&_d(T,T.attrs,!1),null!==T.mergedAttrs&&_d(T,T.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,T),T}(_,h,u,0,r,s,a):h.data[_];dr(T,!0);const S=T.mergedAttrs;null!==S&&it(v,C,S);const x=T.classes;null!==x&&Np(v,C,x);const V=T.styles;return null!==V&&s_(v,C,V),64!=(64&T.flags)&&kh(h,u,C,T),0===function Mo(){return Xe.lFrame.elementDepthCount}()&&rr(C,u),function da(){Xe.lFrame.elementDepthCount++}(),ta(T)&&(function $h(n,r,s){!fa()||(function b_(n,r,s,a){const u=s.directiveStart,h=s.directiveEnd;n.firstCreatePass||fn(s,r),rr(a,r);const _=s.initialInputs;for(let v=u;v<h;v++){const C=n.data[v],T=ar(C);T&&A_(r,s,C);const S=Vr(r,n,v,s);rr(S,r),null!==_&&Yh(0,v-u,S,C,0,_),T&&(Wn(s.index,r)[8]=S)}}(n,r,s,$n(s,r)),128==(128&s.flags)&&function IE(n,r,s){const a=s.directiveStart,u=s.directiveEnd,_=s.index,v=function ll(){return Xe.lFrame.currentDirectiveIndex}();try{zi(_);for(let C=a;C<u;C++){const T=n.data[C],S=r[C];Po(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Yp(T,S)}}finally{zi(-1),Po(v)}}(n,r,s))}(h,u,T),function Gp(n,r,s){if(ou(r)){const u=r.directiveEnd;for(let h=r.directiveStart;h<u;h++){const _=n.data[h];_.contentQueries&&_.contentQueries(1,s[h],h)}}}(h,T,u)),null!==a&&function Wh(n,r,s=$n){const a=r.localNames;if(null!==a){let u=r.index+1;for(let h=0;h<a.length;h+=2){const _=a[h+1],v=-1===_?s(r,n):n[_];n[u++]=v}}}(u,T),Td}function _f(){let n=Qt();il()?function sl(){Xe.lFrame.isParent=!1}():(n=n.parent,dr(n,!1));const r=n;!function ha(){Xe.lFrame.elementDepthCount--}();const s=yt();return s.firstCreatePass&&(yi(s,n),ou(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Nc(n){return 0!=(16&n.flags)}(r)&&dc(s,r,ye(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function uh(n){return 0!=(32&n.flags)}(r)&&dc(s,r,ye(),r.stylesWithoutHost,!1),_f}function yf(n,r,s,a){return Td(n,r,s,a),_f(),yf}function wg(n){return!!n&&"function"==typeof n.then}function ay(n){return!!n&&"function"==typeof n.subscribe}const bg=ay;function Dg(n,r,s,a){const u=ye(),h=yt(),_=Qt();return function uy(n,r,s,a,u,h,_,v){const C=ta(a),S=n.firstCreatePass&&Oa(n),x=r[8],V=ng(r);let Z=!0;if(3&a.type||v){const Fe=$n(a,r),We=v?v(Fe):Fe,Ie=V.length,rt=v?Mt=>v(Ut(Mt[a.index])):a.index;if(Zt(s)){let Mt=null;if(!v&&C&&(Mt=function ly(n,r,s,a){const u=n.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const _=u[h];if(_===s&&u[h+1]===a){const v=r[7],C=u[h+2];return v.length>C?v[C]:null}"string"==typeof _&&(h+=2)}return null}(n,r,u,a.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=h,Mt.__ngLastListenerFn__=h,Z=!1;else{h=hc(a,r,x,h,!1);const Yt=s.listen(We,u,h);V.push(h,Yt),S&&S.push(u,rt,Ie,Ie+1)}}else h=hc(a,r,x,h,!0),We.addEventListener(u,h,_),V.push(h),S&&S.push(u,rt,Ie,_)}else h=hc(a,r,x,h,!1);const fe=a.outputs;let Re;if(Z&&null!==fe&&(Re=fe[u])){const Fe=Re.length;if(Fe)for(let We=0;We<Fe;We+=2){const zs=r[Re[We]][Re[We+1]].subscribe(h),th=V.length;V.push(h,zs),S&&S.push(u,a.index,th,-(th+1))}}}(h,u,u[11],_,n,r,!!s,a),Dg}function Sg(n,r,s,a){try{return!1!==s(a)}catch(u){return nc(n,u),!1}}function hc(n,r,s,a,u){return function h(_){if(_===Function)return a;const v=2&n.flags?Wn(n.index,r):r;0==(32&r[2])&&Qh(v);let C=Sg(r,0,a,_),T=h.__ngNextListenerFn__;for(;T;)C=Sg(r,0,T,_)&&C,T=T.__ngNextListenerFn__;return u&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Tf(n,r=""){const s=ye(),a=yt(),u=n+20,h=a.firstCreatePass?Pa(a,u,1,r,null):a.data[u],_=s[u]=function $u(n,r){return Zt(n)?n.createText(r):n.createTextNode(r)}(s[11],r);kh(a,s,_,h),dr(h,!1)}const nu=void 0;var kf=["en",[["a","p"],["AM","PM"],nu],[["AM","PM"],nu,nu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nu,"{1} 'at' {0}",nu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kg(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let vc={};function Yg(n){const r=function p0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Qg(r);if(s)return s;const a=r.split("-")[0];if(s=Qg(a),s)return s;if("en"===a)return kf;throw new Error(`Missing locale data for the locale "${n}".`)}function Ny(n){return Yg(n)[st.PluralCase]}function Qg(n){return n in vc||(vc[n]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[n]),vc[n]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const Mf="en-US";let Fy=Mf;class rv{}class Ya{resolveComponentFactory(r){throw function G0(n){const r=Error(`No component factory found for ${ue(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ln=(()=>{class n{}return n.NULL=new Ya,n})();function Ri(){return wo(Qt(),ye())}function wo(n,r){return new Bd($n(n,r))}let Bd=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Ri,n})();function z0(n){return n instanceof Bd?n.nativeElement:n}class sv{}let Nf=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function q0(){const n=ye(),s=Wn(Qt().index,n);return function Z0(n){return n[11]}(Lr(s)?s:n)}(),n})(),ov=(()=>{class n{}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>null}),n})();class Em{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Of=new Em("13.2.7"),Ff={};function iu(n,r,s,a,u=!1){for(;null!==s;){const h=r[s.index];if(null!==h&&a.push(Ut(h)),wr(h))for(let v=10;v<h.length;v++){const C=h[v],T=C[1].firstChild;null!==T&&iu(C[1],C,T,a)}const _=s.type;if(8&_)iu(n,r,s.child,a);else if(32&_){const v=He(s,r);let C;for(;C=v();)a.push(C)}else if(16&_){const v=r_(r,s);if(Array.isArray(v))a.push(...v);else{const C=ln(r[16]);iu(C[1],C,v,a,!0)}}s=u?s.projectionNext:s.next}return a}class Vd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return iu(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(wr(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Dp(r,a),Ii(s,a))}this._attachedToViewContainer=!1}Tp(this._lView[1],this._lView)}onDestroy(r){Zp(this._lView[1],this._lView,null,r)}markForCheck(){Qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){yr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function eg(n,r,s){$i(!0);try{yr(n,r,s)}finally{$i(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Se(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ah(n,r){Mh(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Se(902,"");this._appRef=r}}class II extends Vd{constructor(r){super(r),this._view=r}detectChanges(){k_(this._view)}checkNoChanges(){!function ns(n){$i(!0);try{k_(n)}finally{$i(!1)}}(this._view)}get context(){return null}}class av extends Ln{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=St(r);return new Cm(s,this.ngModule)}}function Lf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Cm extends rv{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function l_(n){return n.map(xh).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Lf(this.componentDef.inputs)}get outputs(){return Lf(this.componentDef.outputs)}create(r,s,a,u){const h=(u=u||this.ngModule)?function bI(n,r){return{get:(s,a,u)=>{const h=n.get(s,Ff,u);return h!==Ff||a===Ff?h:r.get(s,a,u)}}}(r,u.injector):r,_=h.get(sv,Js),v=h.get(ov,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=a?function zp(n,r,s){if(Zt(n))return n.selectRootElement(r,s===bt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(C,a,this.componentDef.encapsulation):Gu(_.createRenderer(null,this.componentDef),T,function wI(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(T)),x=this.componentDef.onPush?576:528,V=function oc(n,r){return{components:[],scheduler:n||Ep,clean:TE,playerHandler:r||null,flags:0}}(),Z=Gh(0,null,null,1,0,null,null,null,null,null),fe=Gl(null,Z,V,x,null,null,_,C,v,h);let Re,Fe;Is(fe);try{const We=function zl(n,r,s,a,u,h){const _=s[1];s[20]=n;const C=Pa(_,20,2,"#host",null),T=C.mergedAttrs=r.hostAttrs;null!==T&&(_d(C,T,!0),null!==n&&(it(u,n,T),null!==C.classes&&Np(u,n,C.classes),null!==C.styles&&s_(u,n,C.styles)));const S=a.createRenderer(n,r),x=Gl(s,E_(r),null,r.onPush?64:16,s[20],C,a,S,h||null,null);return _.firstCreatePass&&(Zi(fn(C,s),_,r.type),Qp(_,C),Jp(C,s.length,1)),Na(s,x),s[20]=x}(S,this.componentDef,fe,_,C);if(S)if(a)it(C,S,["ng-version",Of.full]);else{const{attrs:Ie,classes:rt}=function u_(n){const r=[],s=[];let a=1,u=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===u?""!==h&&r.push(h,n[++a]):8===u&&s.push(h);else{if(!Tn(u))break;u=h}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ie&&it(C,S,Ie),rt&&rt.length>0&&Np(C,S,rt.join(" "))}if(Fe=ko(Z,20),void 0!==s){const Ie=Fe.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const Mt=s[rt];Ie.push(null!=Mt?Array.from(Mt):null)}}Re=function sc(n,r,s,a,u){const h=s[1],_=function CE(n,r,s){const a=Qt();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),S_(n,a,r,Ju(n,r,1,null),s));const u=Vr(r,n,a.directiveStart,a);rr(u,r);const h=$n(a,r);return h&&rr(h,r),u}(h,s,r);if(a.components.push(_),n[8]=_,u&&u.forEach(C=>C(_,r)),r.contentQueries){const C=Qt();r.contentQueries(1,_,C.directiveStart)}const v=Qt();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(zi(v.index),w_(s[1],v,0,v.directiveStart,v.directiveEnd,r),Yp(r,_)),_}(We,this.componentDef,fe,V,[OE]),Xu(Z,fe,null)}finally{bs()}return new DI(this.componentType,Re,wo(Fe,fe),fe,Fe)}}class DI extends class nv{}{constructor(r,s,a,u,h){super(),this.location=a,this._rootLView=u,this._tNode=h,this.instance=s,this.hostView=this.changeDetectorRef=new II(u),this.componentType=r}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class jd{}class Y0{}const Hd=new Map;class fs extends jd{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new av(this);const a=$t(r);this._bootstrapComponents=f(a.bootstrap),this._r3Injector=rs(r,s,[{provide:jd,useValue:this},{provide:Ln,useValue:this.componentFactoryResolver}],ue(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Vs.THROW_IF_NOT_FOUND,a=Ye.Default){return r===Vs||r===jd||r===Xh?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class bc extends Y0{constructor(r){super(),this.moduleType=r,null!==$t(r)&&function lv(n){const r=new Set;!function s(a){const u=$t(a,!0),h=u.id;null!==h&&(function Q0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${ue(r)} vs ${ue(r.name)}`)}(h,Hd.get(h),a),Hd.set(h,a));const _=f(u.imports);for(const v of _)r.has(v)||(r.add(v),s(v))}(n)}(r)}create(r){return new fs(this.moduleType,r)}}function jf(n){return r=>{setTimeout(n,void 0,r)}}const bo=class Vf extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var u,h,_;let v=r,C=s||(()=>null),T=a;if(r&&"object"==typeof r){const x=r;v=null===(u=x.next)||void 0===u?void 0:u.bind(x),C=null===(h=x.error)||void 0===h?void 0:h.bind(x),T=null===(_=x.complete)||void 0===_?void 0:_.bind(x)}this.__isAsync&&(C=jf(C),v&&(v=jf(v)),T&&(T=jf(T)));const S=super.subscribe({next:v,error:C,complete:T});return r instanceof q.w0&&r.add(S),S}};function cC(){return this._results[ql()]()}class Dm{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=ql(),a=Dm.prototype;a[s]||(a[s]=cC)}get changes(){return this._changes||(this._changes=new bo)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const u=qn(r);(this._changesDetected=!function El(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let u=n[a],h=r[a];if(s&&(u=s(u),h=s(h)),h!==u)return!1}return!0}(a._results,u,s))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Gd=(()=>{class n{}return n.__NG_ELEMENT_ID__=fv,n})();const hv=Gd,Tm=class extends hv{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Gl(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(s)),Xu(s,a,r),new Vd(a)}};function fv(){return Tc(Qt(),ye())}function Tc(n,r){return 4&n.type?new Tm(r,n,wo(n,r)):null}let zd=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zd,n})();function Zd(){return $f(Qt(),ye())}const dC=zd,Hf=class extends dC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return wo(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){const r=Sr(this._hostTNode,this._hostLView);if(bu(r)){const s=ti(r,this._hostLView),a=Gt(r);return new jr(s[1].data[a+8],s)}return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Sm(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const u=r.createEmbeddedView(s||{});return this.insert(u,a),u}createComponent(r,s,a,u,h){const _=r&&!function uo(n){return"function"==typeof n}(r);let v;if(_)v=s;else{const x=s||{};v=x.index,a=x.injector,u=x.projectableNodes,h=x.ngModuleRef}const C=_?r:new Cm(St(r)),T=a||this.parentInjector;if(!h&&null==C.ngModule){const V=(_?T:this.parentInjector).get(jd,null);V&&(h=V)}const S=C.create(T,u,void 0,h);return this.insert(S.hostView,v),S}insert(r,s){const a=r._lView,u=a[1];if(function ua(n){return wr(n[3])}(a)){const S=this.indexOf(r);if(-1!==S)this.detach(S);else{const x=a[3],V=new Hf(x,x[6],x[3]);V.detach(V.indexOf(r))}}const h=this._adjustIndex(s),_=this._lContainer;!function bp(n,r,s,a){const u=10+a,h=s.length;a>0&&(s[u-1][4]=r),a<h-10?(r[4]=s[u],Cl(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const _=r[17];null!==_&&s!==_&&function zu(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(_,r);const v=r[19];null!==v&&v.insertView(n),r[2]|=128}(u,a,_,h);const v=Mp(h,_),C=a[11],T=fd(C,_[7]);return null!==T&&function hd(n,r,s,a,u,h){a[0]=u,a[6]=r,Mh(n,a,s,1,u,h)}(u,_[6],C,a,T,v),r.attachToViewContainerRef(),Cl(Am(_),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Sm(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Dp(this._lContainer,s);a&&(Ii(Am(this._lContainer),s),Tp(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Dp(this._lContainer,s);return a&&null!=Ii(Am(this._lContainer),s)?new Vd(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function Sm(n){return n[8]}function Am(n){return n[8]||(n[8]=[])}function $f(n,r){let s;const a=r[n.index];if(wr(a))s=a;else{let u;if(8&n.type)u=Ut(a);else{const h=r[11];u=h.createComment("");const _=$n(n,r);bi(h,fd(h,_),u,function Jv(n,r){return Zt(n)?n.nextSibling(r):r.nextSibling}(h,_),!1)}r[n.index]=s=function Ht(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}(a,r,u,n),Na(r,s)}return new Hf(s,n,r)}class Rm{constructor(r){this.queryList=r,this.matches=null}clone(){return new Rm(this.queryList)}setDirty(){this.queryList.setDirty()}}class km{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let h=0;h<a;h++){const _=s.getByIndex(h);u.push(this.queries[_.indexInDeclarationView].clone())}return new km(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==bv(r,s).matches&&this.queries[s].setDirty()}}class _v{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class Sc{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,u);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new Sc(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class qd{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new qd(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const h=a[u];this.matchTNodeWithReadOption(r,s,Mm(s,h)),this.matchTNodeWithReadOption(r,s,so(s,r,h,!1,!1))}else a===Gd?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,so(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===Bd||u===zd||u===Gd&&4&s.type)this.addMatch(s.index,-2);else{const h=so(s,r,u,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Mm(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function yv(n,r,s,a){return-1===s?function Pm(n,r){return 11&n.type?wo(n,r):4&n.type?Tc(n,r):null}(r,n):-2===s?function hC(n,r,s){return s===Bd?wo(r,n):s===Gd?Tc(r,n):s===zd?$f(r,n):void 0}(n,r,a):Vr(n,n[1],s,r)}function xm(n,r,s,a){const u=r[19].queries[a];if(null===u.matches){const h=n.data,_=s.matches,v=[];for(let C=0;C<_.length;C+=2){const T=_[C];v.push(T<0?null:yv(r,h[T],_[C+1],s.metadata.read))}u.matches=v}return u.matches}function Ac(n,r,s,a){const u=n.queries.getByIndex(s),h=u.matches;if(null!==h){const _=xm(n,r,u,s);for(let v=0;v<h.length;v+=2){const C=h[v];if(C>0)a.push(_[v/2]);else{const T=h[v+1],S=r[-C];for(let x=10;x<S.length;x++){const V=S[x];V[17]===V[3]&&Ac(V[1],V,T,a)}if(null!==S[9]){const x=S[9];for(let V=0;V<x.length;V++){const Z=x[V];Ac(Z[1],Z,T,a)}}}}}return a}function vv(n){const r=ye(),s=yt(),a=ul();cl(a+1);const u=bv(s,a);if(n.dirty&&Vi(r)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const h=u.crossesNgTemplate?Ac(s,r,a,[]):xm(s,r,u,a);n.reset(h,z0),n.notifyOnChanges()}return!0}return!1}function Ev(n,r,s,a){const u=yt();if(u.firstCreatePass){const h=Qt();(function wv(n,r,s){null===n.queries&&(n.queries=new Sc),n.queries.track(new qd(r,s))})(u,new _v(r,s,a),h.index),function gC(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(u,n),2==(2&s)&&(u.staticContentQueries=!0)}!function Iv(n,r,s){const a=new Dm(4==(4&s));Zp(n,r,a,a.destroy),null===r[19]&&(r[19]=new km),r[19].queries.push(new Rm(a))}(u,ye(),s)}function Cv(){return function pC(n,r){return n[19].queries[r].queryList}(ye(),ul())}function bv(n,r){return n.queries.getByIndex(r)}function Xd(...n){}const Rc=new on("Application Initializer");let Vm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Xd,this.reject=Xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const h=this.appInits[u]();if(wg(h))s.push(h);else if(bg(h)){const _=new Promise((v,C)=>{h.subscribe({complete:v,error:C})});s.push(_)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ve(Rc,8))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jm=new on("AppId",{providedIn:"root",factory:function Hv(){return`${zf()}${zf()}${zf()}`}});function zf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hm=new on("Platform Initializer"),$m=new on("Platform ID"),$v=new on("appBootstrapListener");let Wv=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const Wm=new on("LocaleId",{providedIn:"root",factory:()=>ft(Wm,Ye.Optional|Ye.SkipSelf)||function Gv(){return"undefined"!=typeof $localize&&$localize.locale||Mf}()}),kC=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class PC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zv=(()=>{class n{compileModuleSync(s){return new bc(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=f($t(s).declarations).reduce((_,v)=>{const C=St(v);return C&&_.push(new Cm(C)),_},[]);return new PC(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zv=(()=>Promise.resolve(0))();function Gm(n){"undefined"==typeof Zone?Zv.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class t{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bo(!1),this.onMicrotaskEmpty=new bo(!1),this.onStable=new bo(!1),this.onError=new bo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function i(){let n=Dt.requestAnimationFrame,r=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function d(n){const r=()=>{!function l(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,g(n),n.isCheckStableRunning=!0,o(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),g(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,h,_,v)=>{try{return E(n),s.invokeTask(u,h,_,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),b(n)}},onInvoke:(s,a,u,h,_,v,C)=>{try{return E(n),s.invoke(u,h,_,v,C)}finally{n.shouldCoalesceRunChangeDetection&&r(),b(n)}},onHasTask:(s,a,u,h)=>{s.hasTask(u,h),a===u&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,g(n),o(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,u,h)=>(s.handleError(u,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,u){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+u,r,e,Xd,Xd);try{return h.runTask(_,s,a)}finally{h.cancelTask(_)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const e={};function o(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function g(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function E(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function b(n){n._nesting--,o(n)}class R{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bo,this.onMicrotaskEmpty=new bo,this.onStable=new bo,this.onError=new bo}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,u){return r.apply(s,a)}}let U=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{t.assertNotInAngularZone(),Gm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gm(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,u){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ve(t))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),O=(()=>{class n{constructor(){this._applications=new Map,Me.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Me.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();class Q{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function ge(n){Me=n}let Ke,Me=new Q;const Nr=new on("AllowMultipleToken");class mn{constructor(r,s){this.name=r,this.token=s}}function Ja(n,r,s=[]){const a=`Platform: ${r}`,u=new on(a);return(h=[])=>{let _=jI();if(!_||_.injector.get(Nr,!1))if(n)n(s.concat(h).concat({provide:u,useValue:!0}));else{const v=s.concat(h).concat({provide:u,useValue:!0},{provide:It,useValue:"platform"});!function ps(n){if(Ke&&!Ke.destroyed&&!Ke.injector.get(Nr,!1))throw new Se(400,"");Ke=n.get(HI);const r=n.get(Hm,null);r&&r.forEach(s=>s())}(Vs.create({providers:v,name:a}))}return function aw(n){const r=jI();if(!r)throw new Se(401,"");return r}()}}function jI(){return Ke&&!Ke.destroyed?Ke:null}let HI=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const v=function lw(n,r){let s;return s="noop"===n?new R:("zone.js"===n?void 0:n)||new t({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),C=[{provide:t,useValue:v}];return v.run(()=>{const T=Vs.create({providers:C,parent:this.injector,name:s.moduleType.name}),S=s.create(T),x=S.injector.get(Yn,null);if(!x)throw new Se(402,"");return v.runOutsideAngular(()=>{const V=v.onError.subscribe({next:Z=>{x.handleError(Z)}});S.onDestroy(()=>{OC(this._modules,S),V.unsubscribe()})}),function uw(n,r,s){try{const a=s();return wg(a)?a.catch(u=>{throw r.runOutsideAngular(()=>n.handleError(u)),u}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(x,v,()=>{const V=S.injector.get(Vm);return V.runInitializers(),V.donePromise.then(()=>(function Cc(n){Ze(n,"Expected localeId to be defined"),"string"==typeof n&&(Fy=n.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Wm,Mf)||Mf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(s,a=[]){const u=$I({},a);return function kt(n,r,s){const a=new bc(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(s){const a=s.injector.get(NC);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new Se(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ve(Vs))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();function $I(n,r){return Array.isArray(r)?r.reduce($I,n):Object.assign(Object.assign({},n),r)}let NC=(()=>{class n{constructor(s,a,u,h,_){this._zone=s,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new P.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new P.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{t.assertNotInAngularZone(),Gm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{t.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,se.T)(v,C.pipe((0,J.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Se(405,"");let u;u=s instanceof rv?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(u.componentType);const h=function en(n){return n.isBoundToModule}(u)?void 0:this._injector.get(jd),v=u.create(Vs.NULL,[],a||u.selector,h),C=v.location.nativeElement,T=v.injector.get(U,null),S=T&&v.injector.get(O);return T&&S&&S.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),OC(this.components,v),S&&S.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Se(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;OC(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get($v,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ve(t),Ve(Vs),Ve(Yn),Ve(Ln),Ve(Vm))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OC(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let GI=!0,zI=!1;function dw(){return zI=!0,GI}function hw(){if(zI)throw new Error("Cannot enable prod mode after platform setup.");GI=!1}let fw=(()=>{class n{}return n.__NG_ELEMENT_ID__=pw,n})();function pw(n){return function gw(n,r,s){if(Oi(n)&&!s){const a=Wn(n.index,r);return new Vd(a,a)}return 47&n.type?new Vd(r[16],r):null}(Qt(),ye(),16==(16&n))}class YI{constructor(){}supports(r){return Ba(r)}create(r){return new Cw(r)}}const Ew=(n,r)=>r;class Cw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Ew}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,u=0,h=null;for(;s||a;){const _=!a||s&&s.currentIndex<JI(a,u,h)?s:a,v=JI(_,u,h),C=_.currentIndex;if(_===a)u--,a=a._nextRemoved;else if(s=s._next,null==_.previousIndex)u++;else{h||(h=[]);const T=v-u,S=C-u;if(T!=S){for(let V=0;V<T;V++){const Z=V<h.length?h[V]:h[V]=0,fe=Z+V;S<=fe&&fe<T&&(h[V]=Z+1)}h[_.previousIndex]=S-T}}v!==C&&r(_,v,C)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ba(r))throw new Se(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,h,_,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let v=0;v<this.length;v++)h=r[v],_=this._trackByFn(v,h),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,h,_,v)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,_,v),a=!0),s=s._next}else u=0,function af(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[ql()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,v=>{_=this._trackByFn(u,v),null!==s&&Object.is(s.trackById,_)?(a&&(s=this._verifyReinsertion(s,v,_,u)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,_,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,u){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,u)):r=this._addAfter(new Iw(s,a),h,u),r}_verifyReinsertion(r,s,a,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,h=r._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new QI),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QI),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Iw{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ww{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class QI{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new ww,this.map.set(s,a)),a.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JI(n,r,s){const a=n.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+r+u}class XI{constructor(){}supports(r){return r instanceof Map||Va(r)}create(){return new bw}}class bw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Va(r)))throw new Se(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const h=u._prev,_=u._next;return h&&(h._next=_),_&&(_._prev=h),u._next=null,u._prev=null,u}const a=new Dw(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class Dw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ew(){return new VC([new YI])}let VC=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||ew()),deps:[[n,new ks,new kr]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new Se(901,"")}}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:ew}),n})();function tw(){return new jC([new XI])}let jC=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||tw()),deps:[[n,new ks,new kr]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Se(901,"")}}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:tw}),n})();const Aw=Ja(null,"core",[{provide:$m,useValue:"unknown"},{provide:HI,deps:[Vs]},{provide:O,deps:[]},{provide:Wv,deps:[]}]);let Rw=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ve(NC))},n.\u0275mod=K({type:n}),n.\u0275inj=xt({}),n})()},3942:(ze,ve,M)=>{M.d(ve,{Z:()=>Se});var p=M(2090),q=M(4859),P=M(9681),se=M(1877);class J{constructor(ce,_e){this._delegate=ce,this.firebase=_e,(0,P._addComponent)(ce,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ce,_e=P._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(ce);return!Ue.isInitialized()&&"EXPLICIT"===(null===($e=Ue.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:_e})}_removeServiceInstance(ce,_e=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(_e)}_addComponent(ce){(0,P._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,P._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ae(){const ke=function ue(ke){const ce={},_e={__esModule:!0,initializeApp:function Ee(Ne,ee={}){const G=P.initializeApp(Ne,ee);if((0,p.r3)(ce,G.name))return ce[G.name];const te=new ke(G,_e);return ce[G.name]=te,te},app:Ue,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function me(Ne){const ee=Ne.name,G=ee.replace("-compat","");if(P._registerComponent(Ne)&&"PUBLIC"===Ne.type){const te=(he=Ue())=>{if("function"!=typeof he[G])throw ie.create("invalid-app-argument",{appName:ee});return he[G]()};void 0!==Ne.serviceProps&&(0,p.ZB)(te,Ne.serviceProps),_e[G]=te,ke.prototype[G]=function(...he){return this._getService.bind(this,ee).apply(this,Ne.multipleInstances?he:[])}}return"PUBLIC"===Ne.type?_e[G]:null},removeApp:function $e(Ne){delete ce[Ne]},useAsService:function Oe(Ne,ee){return"serverAuth"===ee?null:ee},modularAPIs:P}};function Ue(Ne){if(!(0,p.r3)(ce,Ne=Ne||P._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ne});return ce[Ne]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function pe(){return Object.keys(ce).map(Ne=>ce[Ne])}}),Ue.App=ke,_e}(J);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function ce(_e){(0,p.ZB)(ke,_e)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),ke}(),H=new se.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=j;!function we(ke){(0,P.registerVersion)("@firebase/app-compat","0.1.21",ke)}()},9681:(ze,ve,M)=>{M.r(ve),M.d(ve,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Xn,_DEFAULT_ENTRY_NAME:()=>un,_addComponent:()=>jt,_addOrOverwriteComponent:()=>Or,_apps:()=>et,_clearComponents:()=>wt,_components:()=>Vt,_getProvider:()=>Yr,_registerComponent:()=>Nt,_removeServiceInstance:()=>xt,deleteApp:()=>Jr,getApp:()=>er,getApps:()=>ci,initializeApp:()=>Qr,onLog:()=>Sn,registerVersion:()=>or,setLogLevel:()=>In});var p=M(5861),q=M(4859),P=M(1877),se=M(2090);class J{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(je=>{if(function de(Be){const Ce=Be.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(je)){const Je=je.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(je=>je).join(" ")}}const ie="@firebase/app",ae=new P.Yd("@firebase/app"),un="[DEFAULT]",Ze={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,Vt=new Map;function jt(Be,Ce){try{Be.container.addComponent(Ce)}catch(je){ae.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Be.name}`,je)}}function Or(Be,Ce){Be.container.addOrOverwriteComponent(Ce)}function Nt(Be){const Ce=Be.name;if(Vt.has(Ce))return ae.debug(`There were multiple attempts to register component ${Ce}.`),!1;Vt.set(Ce,Be);for(const je of et.values())jt(je,Be);return!0}function Yr(Be,Ce){const je=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return je&&je.triggerHeartbeat(),Be.container.getProvider(Ce)}function xt(Be,Ce,je=un){Yr(Be,Ce).clearInstance(je)}function wt(){Vt.clear()}const sr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ki{constructor(Ce,je,Je){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},je),this._name=je.name,this._automaticDataCollectionEnabled=je.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const Xn="9.6.10";function Qr(Be,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const je=Object.assign({name:un,automaticDataCollectionEnabled:!1},Ce),Je=je.name;if("string"!=typeof Je||!Je)throw sr.create("bad-app-name",{appName:String(Je)});const Ct=et.get(Je);if(Ct){if((0,se.vZ)(Be,Ct.options)&&(0,se.vZ)(je,Ct.config))return Ct;throw sr.create("duplicate-app",{appName:Je})}const _t=new q.H0(Je);for(const L of Vt.values())_t.addComponent(L);const B=new ki(Be,je,_t);return et.set(Je,B),B}function er(Be=un){const Ce=et.get(Be);if(!Ce)throw sr.create("no-app",{appName:Be});return Ce}function ci(){return Array.from(et.values())}function Jr(Be){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(Be){const Ce=Be.name;et.has(Ce)&&(et.delete(Ce),yield Promise.all(Be.container.getProviders().map(je=>je.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function or(Be,Ce,je){var Je;let Ct=null!==(Je=Ze[Be])&&void 0!==Je?Je:Be;je&&(Ct+=`-${je}`);const _t=Ct.match(/\s|\//),B=Ce.match(/\s|\//);if(_t||B){const L=[`Unable to register library "${Ct}" with version "${Ce}":`];return _t&&L.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),_t&&B&&L.push("and"),B&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ae.warn(L.join(" "))}Nt(new q.wA(`${Ct}-version`,()=>({library:Ct,version:Ce}),"VERSION"))}function Sn(Be,Ce){if(null!==Be&&"function"!=typeof Be)throw sr.create("invalid-log-argument");(0,P.Am)(Be,Ce)}function In(Be){(0,P.Ub)(Be)}const zt="firebase-heartbeat-store";let An=null;function di(){return An||(An=(0,se.X3)("firebase-heartbeat-database",1,(Be,Ce)=>{0===Ce&&Be.createObjectStore(zt)}).catch(Be=>{throw sr.create("storage-open",{originalErrorMessage:Be.message})})),An}function bt(){return(bt=(0,p.Z)(function*(Be){try{return(yield di()).transaction(zt).objectStore(zt).get(Pn(Be))}catch(Ce){throw sr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function Ge(Be,Ce){return ot.apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(Be,Ce){try{const Je=(yield di()).transaction(zt,"readwrite");return yield Je.objectStore(zt).put(Ce,Pn(Be)),Je.complete}catch(je){throw sr.create("storage-set",{originalErrorMessage:je.message})}})).apply(this,arguments)}function Pn(Be){return`${Be.name}!${Be.options.appId}`}class gs{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const je=this.container.getProvider("app").getImmediate();this._storage=new Qe(je),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var Ce=this;return(0,p.Z)(function*(){const Je=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Un();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Ce._heartbeatsCache.heartbeats.some(_t=>_t.date===Ct))return Ce._heartbeatsCache.heartbeats.push({date:Ct,agent:Je}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(_t=>{const B=new Date(_t.date).valueOf();return Date.now()-B<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,p.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const je=Un(),{heartbeatsToSend:Je,unsentEntries:Ct}=function xn(Be,Ce=1024){const je=[];let Je=Be.slice();for(const Ct of Be){const _t=je.find(B=>B.agent===Ct.agent);if(_t){if(_t.dates.push(Ct.date),Bn(je)>Ce){_t.dates.pop();break}}else if(je.push({agent:Ct.agent,dates:[Ct.date]}),Bn(je)>Ce){je.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:je,unsentEntries:Je}}(Ce._heartbeatsCache.heartbeats),_t=(0,se.L)(JSON.stringify({version:2,heartbeats:Je}));return Ce._heartbeatsCache.lastSentHeartbeatDate=je,Ct.length>0?(Ce._heartbeatsCache.heartbeats=Ct,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),_t})()}}function Un(){return(new Date).toISOString().substring(0,10)}class Qe{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,p.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Zs(Be){return bt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var je=this;return(0,p.Z)(function*(){var Je;if(yield je._canUseIndexedDBPromise){const _t=yield je.read();return Ge(je.app,{lastSentHeartbeatDate:null!==(Je=Ce.lastSentHeartbeatDate)&&void 0!==Je?Je:_t.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var je=this;return(0,p.Z)(function*(){var Je;if(yield je._canUseIndexedDBPromise){const _t=yield je.read();return Ge(je.app,{lastSentHeartbeatDate:null!==(Je=Ce.lastSentHeartbeatDate)&&void 0!==Je?Je:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Ce.heartbeats]})}})()}}function Bn(Be){return(0,se.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function vt(Be){Nt(new q.wA("platform-logger",Ce=>new J(Ce),"PRIVATE")),Nt(new q.wA("heartbeat",Ce=>new gs(Ce),"PRIVATE")),or(ie,"0.7.20",Be),or(ie,"0.7.20","esm2017"),or("fire-js","")}("")},4859:(ze,ve,M)=>{M.d(ve,{wA:()=>P,H0:()=>ue,zt:()=>J});var p=M(5861),q=M(2090);class P{constructor(j,H,Y){this.name=j,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const se="[DEFAULT]";class J{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const Y=new q.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:H});Le&&Y.resolve(Le)}catch(Le){}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const Y=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Le=null!==(H=null==j?void 0:j.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(we){if(Le)return null;throw we}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ie(ae){return"EAGER"===ae.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:se})}catch(H){}for(const[H,Y]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(H);try{const we=this.getOrInitializeService({instanceIdentifier:Le});Y.resolve(we)}catch(we){}}}}clearInstance(j=se){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,p.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=se){return this.instances.has(j)}getOptions(j=se){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,Y=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[we,Se]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(we)&&Se.resolve(Le);return Le}onInit(j,H){var Y;const Le=this.normalizeInstanceIdentifier(H),we=null!==(Y=this.onInitCallbacks.get(Le))&&void 0!==Y?Y:new Set;we.add(j),this.onInitCallbacks.set(Le,we);const Se=this.instances.get(Le);return Se&&j(Se,Le),()=>{we.delete(j)}}invokeOnInitCallbacks(j,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const Le of Y)try{Le(j,H)}catch(we){}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let Y=this.instances.get(j);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=j,ae===se?void 0:ae),options:H}),this.instances.set(j,Y),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(Y,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Y)}catch(Le){}var ae;return Y||null}normalizeInstanceIdentifier(j=se){return this.component?this.component.multipleInstances?j:se:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new J(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ze,ve,M)=>{M.d(ve,{in:()=>q,Yd:()=>ie,Ub:()=>ue,Am:()=>ae});const p=[];var q=(()=>{return(j=q||(q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",q;var j})();const P={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},se=q.INFO,J={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},de=(j,H,...Y)=>{if(H<j.logLevel)return;const Le=(new Date).toISOString(),we=J[H];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[we](`[${Le}]  ${j.name}:`,...Y)};class ie{constructor(H){this.name=H,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?P[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...H),this._logHandler(this,q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...H),this._logHandler(this,q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,q.INFO,...H),this._logHandler(this,q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,q.WARN,...H),this._logHandler(this,q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...H),this._logHandler(this,q.ERROR,...H)}}function ue(j){p.forEach(H=>{H.setLogLevel(j)})}function ae(j,H){for(const Y of p){let Le=null;H&&H.level&&(Le=P[H.level]),Y.userLogHandler=null===j?null:(we,Se,...ke)=>{const ce=ke.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch($e){return null}}).filter(_e=>_e).join(" ");Se>=(null!=Le?Le:we.logLevel)&&j({level:q[Se].toLowerCase(),message:ce,args:ke,type:we.name})}}}},5861:(ze,ve,M)=>{function p(P,se,J,de,ie,ue,ae){try{var j=P[ue](ae),H=j.value}catch(Y){return void J(Y)}j.done?se(H):Promise.resolve(H).then(de,ie)}function q(P){return function(){var se=this,J=arguments;return new Promise(function(de,ie){var ue=P.apply(se,J);function ae(H){p(ue,de,ie,ae,j,"next",H)}function j(H){p(ue,de,ie,ae,j,"throw",H)}ae(void 0)})}}M.d(ve,{Z:()=>q})}},ze=>{ze(ze.s=8936)}]);